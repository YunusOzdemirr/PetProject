(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,s=void 0===o?{}:o,a=this.normalizeInstanceIdentifier(void 0===i?"[DEFAULT]":i);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var c=Object(r.g)(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var h=Object(r.e)(l.value,2),d=h[1];a===this.normalizeInstanceIdentifier(h[0])&&d.resolve(u)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return u},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("/6Yf"),o=n("qOnz"),s=n("mrSG"),a=n("q/0M"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.H)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.B)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new a.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.G)(t),n=new o.d;n.update(e);var r=n.digest();return o.g.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(o.H)(i):i,n+=" "}return n},y=null,v=!0,b=function(t,e){Object(o.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=a.a.VERBOSE,y=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===y&&!0===d.get("logging_enabled")&&b(!0)),y){var n=m.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(s.f)([t],Object(s.e)(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(s.f)([],Object(s.e)(t)));throw f.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.warn(n)},E=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.H)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(o.H)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.H)(e[i]),r+=":",r+=j(t[e[i]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var N=function(t){var e,n,r,i,s;Object(o.e)(!E(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},F=function(t){try{t()}catch(e){setTimeout(function(){throw S("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},M=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},U=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';S(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),V=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function H(t,e,n){var r;if(Object(o.e)("string"==typeof e,"typeof type must == string"),Object(o.e)("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return R(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var z=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.k)(this.counters_)},t}(),Y={},X={};function W(t){var e=t.toString();return Y[e]||(Y[e]=new z),Y[e]}var K=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&F(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),G=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=W(e),this.urlFn=function(t){return H(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new K(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.x)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new $(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.x)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.H)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.h)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.x)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.H)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),$=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.x)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.x)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Q="";function J(t){Q=t}var Z=null;"undefined"!=typeof MozWebSocket?Z=MozWebSocket:"undefined"!=typeof WebSocket&&(Z=WebSocket);var tt=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=W(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.x)()&&"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),H(t,"websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.x)()){var r={headers:{"User-Agent":"Firebase/5/"+Q+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Z(this.connURL,[],r)}else this.mySock=new Z(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Z&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.B)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.H)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),et=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[G,tt]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=tt&&tt.isAvailable(),o=i&&!tt.previouslyFailed();if(e.webSocketOnly&&(i||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[tt];else{var a=this.transports_=[];try{for(var u=Object(s.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),nt=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new et(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=M(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),M(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):M(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),rt=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),it=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(s.f)([],Object(s.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.e)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ot=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.v)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(it),st=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function at(){return new st("")}function ut(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ct(t){return t.pieces_.length-t.pieceNum_}function lt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new st(t.pieces_,e)}function ht(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function dt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function ft(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new st(e,0)}function pt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof st)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new st(n,0)}function gt(t){return t.pieceNum_>=t.pieces_.length}function mt(t,e){var n=ut(t),r=ut(e);if(null===n)return e;if(n===r)return mt(lt(t),lt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function yt(t,e){for(var n=dt(t,0),r=dt(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function vt(t,e){if(ct(t)!==ct(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function bt(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ct(t)>ct(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var _t=function(){return function(t,e){this.errorPrefix_=e,this.parts_=dt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.F)(this.parts_[n]);wt(this)}}();function wt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ot(t))}function Ot(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Ct,St,Et=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(it),Tt=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.x)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Et.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ot.getInstance().on("online",l.onOnline_,l),l}return Object(s.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_(Object(o.H)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.i)(t,"w")){var n=Object(o.E)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.p)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.A)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.H)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(o.H)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new nt(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){S(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&S(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.t)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return j(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new st(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(s.g)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,Object(s.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.x)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Q.replace(/\./g,"-")]=1,Object(o.v)()?t["framework.cordova"]=1:Object(o.y)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ot.getInstance().currentlyOnline();return Object(o.t)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(rt),It=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),xt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new It(T,t),r=new It(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return It.MIN},t}(),kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Ct},set:function(t){Ct=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return It.MIN},e.prototype.maxPost=function(){return new It(I,Ct)},e.prototype.makePost=function(t,e){return Object(o.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new It(t,Ct)},e.prototype.toString=function(){return".key"},e}(xt),At=new kt,jt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Pt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Nt.EMPTY_NODE,this.right=null!=o?o:Nt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Nt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Nt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Pt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Nt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new jt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new jt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}();function Dt(t,e){return x(t.name,e.name)}function Lt(t,e){return x(t,e)}var Ft,Mt,Ut,Vt,qt,Bt=function(t){return"number"==typeof t?"number:"+N(t):"string:"+t},Ht=function(t){if(t.isLeafNode()){var e=t.val();Object(o.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.i)(e,".sv"),"Priority must be a string or number.")}else Object(o.e)(t===St||t.isEmpty(),"priority of unexpected type.");Object(o.e)(t===St||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},zt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ht(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ft},set:function(t){Ft=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return gt(e)?this:".priority"===ut(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ut(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===ct(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(lt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Bt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?N(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Yt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return It.MIN},e.prototype.maxPost=function(){return new It(I,new zt("[PRIORITY-POST]",Ut))},e.prototype.makePost=function(t,e){var n=Mt(t);return new It(e,new zt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(xt)),Xt=Math.log(2),Wt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Kt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Pt(s,o.node,Pt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Pt(s,o.node,Pt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Pt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Pt.BLACK):(a(h,Pt.BLACK),a(h,Pt.RED))}return o}(new Wt(t.length));return new Nt(r||e,o)},Gt={},$t=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.e)(Gt&&Yt,"ChildrenNode.ts has not been loaded"),Vt=Vt||new t({".priority":Gt},{".priority":Yt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.E)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Nt?e:null},t.prototype.hasIndex=function(t){return Object(o.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.e)(e!==At,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(It.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?Kt(i,e.getCompare()):Gt;var l=e.toString(),h=Object(s.a)({},this.indexSet_);h[l]=e;var d=Object(s.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.C)(this.indexes_,function(t,i){var s=Object(o.E)(r.indexSet_,i);if(Object(o.e)(s,"Missing index implementation for "+i),t===Gt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(It.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Kt(a,s.getCompare())}return Gt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new It(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.C)(this.indexes_,function(t){if(t===Gt)return t;var r=n.get(e.name);return r?t.remove(new It(e.name,r)):t}),this.indexSet_)},t}(),Qt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ht(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return qt||(qt=new t(new Nt(Lt),null,$t.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||qt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?qt:e},t.prototype.getChild=function(t){var e=ut(t);return null===e?this:this.getImmediateChild(e).getChild(lt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new It(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?qt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=ut(t);if(null===n)return e;Object(o.e)(".priority"!==ut(t)||1===ct(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(lt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Yt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Bt(this.getPriority().val())+":"),this.forEachChild(Yt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new It(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new It(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new It(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,It.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,It.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Jt?-1:0},t.prototype.withIndex=function(e){if(e===At||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===At||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Yt),r=e.getIterator(Yt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===At?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Jt=new(function(t){function e(){return t.call(this,new Nt(Lt),Qt.EMPTY_NODE,$t.Default)||this}return Object(s.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Qt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Qt));function Zt(t,e){if(void 0===e&&(e=null),null===t)return Qt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new zt(t,Zt(e));if(t instanceof Array){var n=Qt.EMPTY_NODE;return R(t,function(e,r){if(Object(o.i)(t,e)&&"."!==e.substring(0,1)){var i=Zt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(Zt(e))}var r=[],i=!1;if(R(t,function(t,e){if("."!==t.substring(0,1)){var n=Zt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new It(t,n)))}}),0===r.length)return Qt.EMPTY_NODE;var s=Kt(r,Dt,function(t){return t.name},Lt);if(i){var a=Kt(r,Yt.getCompare());return new Qt(s,Zt(e),new $t({".priority":a},{".priority":Yt}))}return new Qt(s,Zt(e),$t.Default)}Object.defineProperties(It,{MIN:{value:new It(T,Qt.EMPTY_NODE)},MAX:{value:new It(I,Jt)}}),kt.__EMPTY_NODE=Qt.EMPTY_NODE,zt.__childrenNodeConstructor=Qt,St=Jt,Ut=Jt,Mt=Zt;var te,ee,ne=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.e)(!gt(e)&&".priority"!==ut(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(s.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Zt(t),r=Qt.EMPTY_NODE.updateChild(this.indexPath_,n);return new It(e,r)},e.prototype.maxPost=function(){var t=Qt.EMPTY_NODE.updateChild(this.indexPath_,Jt);return new It(I,t)},e.prototype.toString=function(){return dt(this.indexPath_,0).join("/")},e}(xt),re=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return It.MIN},e.prototype.maxPost=function(){return It.MAX},e.prototype.makePost=function(t,e){var n=Zt(t);return new It(e,n)},e.prototype.toString=function(){return".value"},e}(xt)),ie="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",oe=(te=0,ee=[],function(t){var e,n=t===te;te=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=ie.charAt(t%64),t=Math.floor(t/64);Object(o.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ee[e];e--)ee[e]=0;ee[e]++}else for(e=0;e<12;e++)ee[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ie.charAt(ee[e]);return Object(o.e)(20===i.length,"nextPushId: Length should be 20."),i}),se=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=ie.charAt(ie.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},ae=function(t){if("-2147483648"===t)return T;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ie.charAt(ie.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ue(t){return{type:"value",snapshotNode:t}}function ce(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function le(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function he(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var de=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(le(e,a)):Object(o.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ce(e,n)):s.trackChildChange(he(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Yt,function(t,r){e.hasChild(t)||n.trackChildChange(le(t,r))}),e.isLeafNode()||e.forEachChild(Yt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(he(e,r,i))}else n.trackChildChange(ce(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Qt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),fe=function(){function t(e){this.indexedFilter_=new de(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new It(e,n))||(n=Qt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Qt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Qt.EMPTY_NODE);var i=this;return e.forEachChild(Yt,function(t,e){i.matches(new It(t,e))||(r=r.updateImmediateChild(t,Qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),pe=function(){function t(t){this.rangedFilter_=new fe(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new It(e,n))||(n=Qt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Qt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Qt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Qt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.e)(u.numChildren()===this.limit_,"");var c=new It(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(he(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(le(e,d));var g=u.updateImmediateChild(e,Qt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ce(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(le(l.name,l.node)),i.trackChildChange(ce(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Qt.EMPTY_NODE)):t},t}(),ge=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Yt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function me(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ye(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ve(t,e){var n=t.copy();return n.index_=e,n}function be(t){var e,n={};return t.isDefault()||(t.index_===Yt?e="$priority":t.index_===re?e="$value":t.index_===At?e="$key":(Object(o.e)(t.index_ instanceof ne,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.H)(e),t.startSet_&&(n.startAt=Object(o.H)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.H)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.H)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.H)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function _e(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Yt&&(e.i=t.index_.toString()),e}var we=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(s.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.e)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=be(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.E)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=be(t._queryParams),r=t._path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.D)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.B)(u.responseText)}catch(e){S("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(rt),Oe=function(){function t(){this.rootNode_=Qt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ce(){return{value:null,children:new Map}}function Se(t,e,n){if(gt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ut(e);t.children.has(r)||t.children.set(r,Ce()),Se(t.children.get(r),e=lt(e),n)}}function Ee(t,e){if(gt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Yt,function(e,n){Se(t,new st(e),n)}),Ee(t,e)}if(t.children.size>0){var r=ut(e);return e=lt(e),t.children.has(r)&&Ee(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Te(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Te(r,new st(e.toString()+"/"+t),n)})}var Ie=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(s.a)({},t);return this.last_&&R(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),xe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ie(t);var n=1e4+2e4*Math.random();M(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,function(e,i){i>0&&Object(o.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),M(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),ke=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ae(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var je,Pe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ke.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(gt(this.path)){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new st(e));return new t(at(),n,this.revert)}return Object(o.e)(ut(this.path)===e,"operationForChild called for unrelated child."),new t(lt(this.path),this.affectedTree,this.revert)},t}(),Re=function(){function t(t,e){this.source=t,this.path=e,this.type=ke.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return gt(this.path)?new t(this.source,at()):new t(this.source,lt(this.path))},t}(),Ne=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ke.OVERWRITE}return t.prototype.operationForChild=function(e){return gt(this.path)?new t(this.source,at(),this.snap.getImmediateChild(e)):new t(this.source,lt(this.path),this.snap)},t}(),De=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ke.MERGE}return t.prototype.operationForChild=function(e){if(gt(this.path)){var n=this.children.subtree(new st(e));return n.isEmpty()?null:n.value?new Ne(this.source,at(),n.value):new t(this.source,at(),n)}return Object(o.e)(ut(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,lt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Le=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(gt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ut(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Fe=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function Me(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.f)("Should only compare child_ events.");var r=new It(e.childName,e.snapshotNode),i=new It(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function Ue(t,e){return{eventCache:t,serverCache:e}}function Ve(t,e,n,r){return Ue(new Le(e,n,r),t.serverCache)}function qe(t,e,n,r){return Ue(t.eventCache,new Le(e,n,r))}function Be(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function He(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var ze=function(){function t(t,e){void 0===e&&(je||(je=new Nt(k)),e=je),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return R(e,function(t,e){n=n.set(new st(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:at(),value:this.value};if(gt(t))return null;var n=ut(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(lt(t),e);return null!=i?{path:pt(new st(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(gt(e))return this;var n=ut(e),r=this.children.get(n);return null!==r?r.subtree(lt(e)):new t(null)},t.prototype.set=function(e,n){if(gt(e))return new t(n,this.children);var r=ut(e),i=(this.children.get(r)||new t(null)).set(lt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(gt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ut(e),r=this.children.get(n);if(r){var i=r.remove(lt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(gt(t))return this.value;var e=ut(t),n=this.children.get(e);return n?n.get(lt(t)):null},t.prototype.setTree=function(e,n){if(gt(e))return n;var r,i=ut(e),o=(this.children.get(i)||new t(null)).setTree(lt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(at(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(pt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,at(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(gt(t))return null;var i=ut(t),o=this.children.get(i);return o?o.findOnPath_(lt(t),pt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,at(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(gt(e))return this;this.value&&r(n,this.value);var i=ut(e),o=this.children.get(i);return o?o.foreachOnPath_(lt(e),pt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(at(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(pt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Ye=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new ze(null))},t}();function Xe(t,e,n){if(gt(e))return new Ye(new ze(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=mt(i,e);return o=o.updateChild(s,n),new Ye(t.writeTree_.set(i,o))}var a=new ze(n),u=t.writeTree_.setTree(e,a);return new Ye(u)}function We(t,e,n){var r=t;return R(n,function(t,n){r=Xe(r,pt(e,t),n)}),r}function Ke(t,e){if(gt(e))return Ye.empty();var n=t.writeTree_.setTree(e,new ze(null));return new Ye(n)}function Ge(t,e){return null!=$e(t,e)}function $e(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(mt(n.path,e)):null}function Qe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Yt,function(t,n){e.push(new It(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new It(t,n.value))}),e}function Je(t,e){if(gt(e))return t;var n=$e(t,e);return new Ye(null!=n?new ze(n):t.writeTree_.subtree(e))}function Ze(t){return t.writeTree_.isEmpty()}function tn(t,e){return en(at(),t.writeTree_,e)}function en(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.e)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=en(pt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(pt(t,".priority"),r)),n}function nn(t,e){return pn(e,t)}function rn(t,e){if(t.snap)return bt(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&bt(pt(t.path,n),e))return!0;return!1}function on(t){return t.visible}function sn(t,e,n){for(var r=Ye.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)bt(n,a)?r=Xe(r,u=mt(n,a),s.snap):bt(a,n)&&(u=mt(a,n),r=Xe(r,at(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(bt(n,a))r=We(r,u=mt(n,a),s.children);else if(bt(a,n))if(gt(u=mt(a,n)))r=We(r,at(),s.children);else{var c=Object(o.E)(s.children,ut(u));if(c){var l=c.getChild(lt(u));r=Xe(r,at(),l)}}}}}return r}function an(t,e,n,r,i){if(r||i){var o=Je(t.visibleWrites,e);return!i&&Ze(o)?n:i||null!=n||Ge(o,at())?tn(sn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(bt(t.path,e)||bt(e,t.path))},e),n||Qt.EMPTY_NODE):null}var s=$e(t.visibleWrites,e);if(null!=s)return s;var a=Je(t.visibleWrites,e);return Ze(a)?n:null!=n||Ge(a,at())?tn(a,n||Qt.EMPTY_NODE):null}function un(t,e,n,r){return an(t.writeTree,t.treePath,e,n,r)}function cn(t,e){return function(t,e,n){var r=Qt.EMPTY_NODE,i=$e(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=Je(t.visibleWrites,e);return n.forEachChild(Yt,function(t,e){var n=tn(Je(o,new st(t)),e);r=r.updateImmediateChild(t,n)}),Qe(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return Qe(Je(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function ln(t,e,n,r){return function(t,e,n,r,i){Object(o.e)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=pt(e,n);if(Ge(t.visibleWrites,s))return null;var a=Je(t.visibleWrites,s);return Ze(a)?i.getChild(n):tn(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function hn(t,e){return function(t,e){return $e(t.visibleWrites,e)}(t.writeTree,pt(t.treePath,e))}function dn(t,e,n){return function(t,e,n,r){var i=pt(e,n),o=$e(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?tn(Je(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function fn(t,e){return pn(pt(t.treePath,e),t.writeTree)}function pn(t,e){return{treePath:t,writeTree:e}}var gn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.e)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,he(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,le(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ce(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,he(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),mn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),yn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Le(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:He(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=Je(t.visibleWrites,e),c=$e(u,at());if(null!=c)a=c;else{if(null==n)return[];a=tn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function vn(t,e,n,r,i,s){var a=e.eventCache;if(null!=hn(r,n))return e;var u=void 0,c=void 0;if(gt(n))if(Object(o.e)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=He(e),h=cn(r,l instanceof Qt?l:Qt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=un(r,He(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=ut(n);if(".priority"===f){Object(o.e)(1===ct(n),"Can't have a priority with additional path components");var p=a.getNode(),g=ln(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=lt(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=ln(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=dn(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,i,s):a.getNode()}}return Ve(e,u,a.isFullyInitialized()||gt(n),t.filter.filtersNodes())}function bn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(gt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=ut(n);if(!c.isCompleteForPath(n)&&ct(n)>1)return e;var f=lt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,mn,null)}var g=qe(e,u,c.isFullyInitialized()||gt(n),l.filtersNodes());return vn(t,g,n,i,new yn(i,g,o),a)}function _n(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new yn(i,e,o);if(gt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ve(e,u,!0,t.filter.filtersNodes());else{var h=ut(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ve(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=lt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(gt(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===ht(d)&&g.getChild(ft(d)).isEmpty()?g:g.updateChild(d,r):Qt.EMPTY_NODE}a=f.equals(p)?e:Ve(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function wn(t,e){return t.eventCache.isCompleteForChild(e)}function On(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Cn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=gt(n)?r:new ze(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=On(0,e.serverCache.getNode().getImmediateChild(n),r);c=bn(t,c,new st(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=On(0,e.serverCache.getNode().getImmediateChild(n),r);c=bn(t,c,new st(n),h,i,o,s,a)}}),c}var Sn,En=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new de(r.getIndex()),o=(n=r).loadsAllData()?new de(n.getIndex()):n.hasLimit()?new pe(n):new fe(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(Qt.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Qt.EMPTY_NODE,a.getNode(),null),l=new Le(u,s.isFullyInitialized(),i.filtersNodes()),h=new Le(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ue(h,l),this.eventGenerator_=new Fe(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Tn(t,e){var n=He(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!gt(e)&&!n.getImmediateChild(ut(e)).isEmpty())?n.getChild(e):null}function In(t){return 0===t.eventRegistrations_.length}function xn(t,e,n){var r=[];if(n){Object(o.e)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function kn(t,e,n,r){e.type===ke.MERGE&&null!==e.source.queryId&&(Object(o.e)(He(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.e)(Be(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new gn;if(n.type===ke.OVERWRITE){var c=n;c.source.fromUser?s=_n(t,e,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!gt(c.path),s=bn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===ke.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=pt(n,r);wn(e,ut(c))&&(a=_n(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=pt(n,r);wn(e,ut(c))||(a=_n(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Cn(t,e,l.path,l.children,r,i,a,u))}else if(n.type===ke.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=hn(r,n))return e;var u=new yn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(gt(n)||".priority"===ut(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=un(r,He(e));else{var d=e.serverCache.getNode();Object(o.e)(d instanceof Qt,"serverChildren would be complete if leaf node"),h=cn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=ut(n),p=dn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,lt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,Qt.EMPTY_NODE,lt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=un(r,He(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=hn(r,at()),Ve(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=hn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(gt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return bn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(gt(n)){var c=new ze(null);return u.getNode().forEachChild(At,function(t,e){c=c.set(new st(t),e)}),Cn(t,e,n,c,i,o,a,s)}return e}var l=new ze(null);return r.foreach(function(t,e){var r=pt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Cn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ke.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return vn(t,qe(e,o.getNode(),o.isFullyInitialized()||gt(n),o.isFiltered()),n,r,mn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Be(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ue(Be(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.e)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.e)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.e)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,An(t,u.changes,u.viewCache.eventCache.getNode(),null)}function An(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Me(t,i,"child_removed",e,r,n),Me(t,i,"child_added",e,r,n),Me(t,i,"child_moved",o,r,n),Me(t,i,"child_changed",e,r,n),Me(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var jn,Pn=function(){return function(){this.views=new Map}}();function Rn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.e)(null!=c,"SyncTree gave us an op for an invalid query."),kn(c,e,n,r)}var l=[];try{for(var h=Object(s.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(kn(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Nn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=un(n,i?r:null),a=!1;s?a=!0:r instanceof Qt?(s=cn(n,r),a=!1):(s=Qt.EMPTY_NODE,a=!1);var u=Ue(new Le(s,a,!1),new Le(r,i,!1));return new En(e,u)}return o}function Dn(t){var e,n,r=[];try{for(var i=Object(s.g)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Ln(t,e){var n,r,i=null;try{for(var o=Object(s.g)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Tn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Fn(t,e){return e._queryParams.loadsAllData()?Vn(t):t.views.get(e._queryIdentifier)}function Mn(t,e){return null!=Fn(t,e)}function Un(t){return null!=Vn(t)}function Vn(t){var e,n;try{for(var r=Object(s.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var qn=1,Bn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new ze(null),this.pendingWriteTree_={visibleWrites:Ye.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Hn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.e)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Gn(t,new Ne({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function zn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&rn(u,r.path)?i=!1:bt(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=sn(t.allWrites,on,at()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Ke(t.visibleWrites,r.path):R(r.children,function(e){t.visibleWrites=Ke(t.visibleWrites,pt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new ze(null);return null!=r.snap?i=i.set(at(),!0):R(r.children,function(t){i=i.set(new st(t),!0)}),Gn(t,new Pe(r.path,i,n))}return[]}function Yn(t,e,n){return Gn(t,new Ne({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||Mn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=Un(t);if("default"===u)try{for(var d=Object(s.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(s.e)(f.value,2),m=g[0];l=l.concat(xn(p=g[1],n,r)),In(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(xn(p,n,r)),In(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Un(t)&&c.push(new(Object(o.e)(Sn,"Reference.ts has not been loaded"),Sn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return Un(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Un(e))return[Vn(e)];var r=[];return e&&(r=Dn(e)),R(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,v=Jn(t,m);t.listenProvider_.startListening(ir(y),Zn(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(ir(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(tr(e));t.listenProvider_.stopListening(ir(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=tr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Wn(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=mt(t,r);i=i||Ln(e,n),s=s||Un(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Un(u),i=i||Ln(u,at())):(u=new Pn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Qt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Ln(e,at());n&&(i=i.updateImmediateChild(t,n))}));var c=Mn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=tr(e);Object(o.e)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=qn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Nn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Yt,function(t,e){r.push(ce(t,e))}),n.isFullyInitialized()&&r.push(ue(n.getNode())),An(t,r,n.getNode(),e)}(s,n)}(u,e,n,nn(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Fn(u,e);d=d.concat(function(t,e,n){var r=e._path,i=Zn(t,e),s=Jn(t,n),a=t.listenProvider_.startListening(ir(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.e)(!Un(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!gt(t)&&e&&Un(e))return[Vn(e).query];var r=[];return e&&(r=r.concat(Dn(e).map(function(t){return t.query}))),R(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(ir(h),Zn(t,h))}return a}(t,e,f))}return d}function Kn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Ln(n,mt(t,e));if(r)return r});return an(r,e,i,n,!0)}function Gn(t,e){return $n(e,t.syncPointTree_,null,nn(t.pendingWriteTree_,at()))}function $n(t,e,n,r){if(gt(t.path))return Qn(t,e,n,r);var i=e.get(at());null==n&&null!=i&&(n=Ln(i,at()));var o=[],s=ut(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=fn(r,s);o=o.concat($n(a,u,c,l))}return i&&(o=o.concat(Rn(i,t,r,n))),o}function Qn(t,e,n,r){var i=e.get(at());null==n&&null!=i&&(n=Ln(i,at()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=fn(r,e),u=t.operationForChild(e);u&&(o=o.concat(Qn(u,i,s,a)))}),i&&(o=o.concat(Rn(i,t,r,n))),o}function Jn(t,e){var n=e.query,r=Zn(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Qt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=er(t,n);if(r){var i=nr(r),o=i.path,s=i.queryId,a=mt(o,e);return rr(t,o,new Re(Ae(s),a))}return[]}(t,n._path,r):function(t,e){return Gn(t,new Re({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function Zn(t,e){var n=tr(e);return t.queryToTagMap.get(n)}function tr(t){return t._path.toString()+"$"+t._queryIdentifier}function er(t,e){return t.tagToQueryMap.get(e)}function nr(t){var e=t.indexOf("$");return Object(o.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new st(t.substr(0,e))}}function rr(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.e)(r,"Missing sync point for query tag that we're tracking"),Rn(r,n,nn(t.pendingWriteTree_,e),null)}function ir(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(o.e)(jn,"Reference.ts has not been loaded"),jn)(t._repo,t._path):t}var or=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),sr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=pt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Kn(this.syncTree_,this.path_)},t}(),ar=function(t,e,n){return t&&"object"==typeof t?(Object(o.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ur(t[".sv"],e,n):"object"==typeof t[".sv"]?cr(t[".sv"],e):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ur=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+t)}},cr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},lr=function(t,e,n,r){return dr(e,new sr(n,t),r)},hr=function(t,e,n){return dr(t,new or(e),n)};function dr(t,e,n){var r,i=t.getPriority().val(),o=ar(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ar(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new zt(a,Zt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new zt(o))),u.forEachChild(Yt,function(t,i){var o=dr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var fr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function pr(t,e){for(var n=e instanceof st?e:new st(e),r=t,i=ut(n);null!==i;){var s=Object(o.E)(r.node.children,i)||{children:{},childCount:0};r=new fr(i,r,s),i=ut(n=lt(n))}return r}function gr(t){return t.node.value}function mr(t,e){t.node.value=e,wr(t)}function yr(t){return t.node.childCount>0}function vr(t,e){R(t.node.children,function(n,r){e(new fr(n,t,r))})}function br(t,e,n,r){n&&!r&&e(t),vr(t,function(t){br(t,e,!0,r)}),n&&r&&e(t)}function _r(t){return new st(null===t.parent?t.name:_r(t.parent)+"/"+t.name)}function wr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===gr(t)&&!yr(t)}(n),i=Object(o.i)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,wr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,wr(t))}(t.parent,t.name,t)}var Or=/[\[\].#$\/\u0000-\u001F\u007F]/,Cr=/[\[\].#$\u0000-\u001F\u007F]/,Sr=function(t){return"string"==typeof t&&0!==t.length&&!Or.test(t)},Er=function(t){return"string"==typeof t&&0!==t.length&&!Cr.test(t)},Tr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!E(t)||t&&"object"==typeof t&&Object(o.i)(t,".sv")},Ir=function(t,e,n,r){r&&void 0===e||xr(Object(o.m)(t,"value"),e,n)},xr=function(t,e,n){var r=n instanceof st?new _t(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Ot(r));if("function"==typeof e)throw new Error(t+"contains a function "+Ot(r)+" with contents = "+e.toString());if(E(e))throw new Error(t+"contains "+e.toString()+" "+Ot(r));if("string"==typeof e&&e.length>10485760/3&&Object(o.F)(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Ot(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Sr(e)))throw new Error(t+" contains an invalid key ("+e+") "+Ot(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(o.F)(e),wt(t)}(r,e),xr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(o.F)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+Ot(r)+" in addition to actual children.")}},kr=function(t,e,n,r){if(!r||void 0!==e){var i=Object(o.m)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];R(e,function(t,e){var r=new st(t);if(xr(i,e,pt(n,r)),".priority"===ht(r)&&!Tr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=dt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Sr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(yt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&bt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Ar=function(t,e,n){if(!n||void 0!==e){if(E(e))throw new Error(Object(o.m)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Tr(e))throw new Error(Object(o.m)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Pr=function(t,e,n,r){if(!(r&&void 0===n||Sr(n)))throw new Error(Object(o.m)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Rr=function(t,e,n,r){if(!(r&&void 0===n||Er(n)))throw new Error(Object(o.m)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Nr=function(t,e){if(".info"===ut(e))throw new Error(t+" failed = Can't modify data under /.info/")},Dr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Sr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Er(t)}(n))throw new Error(Object(o.m)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Lr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.m)(t,e)+"must be a boolean.")},Fr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Mr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||vt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ur(t,e,n){Mr(t,n),qr(t,function(t){return vt(t,e)})}function Vr(t,e,n){Mr(t,n),qr(t,function(t){return bt(t,e)||bt(e,t)})}function qr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Br(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Br(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();y&&_("event: "+n.toString()),F(r)}}}var Hr=function(){function t(t,e,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ce(),this.transactionQueueTree_=new fr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function zr(t){var e=t.infoData_.getNode(new st(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Yr(t){return(e=(e={timestamp:zr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Xr(t,e,n,r,i){t.dataUpdateCount++;var s=new st(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.C)(n,function(t){return Zt(t)});a=function(t,e,n,r){var i=er(t,r);if(i){var o=nr(i),s=o.path,a=o.queryId,u=mt(s,e),c=ze.fromObject(n);return rr(t,s,new De(Ae(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=Zt(n);a=function(t,e,n,r){var i=er(t,r);if(null!=i){var o=nr(i),s=o.path,a=o.queryId,u=mt(s,e);return rr(t,s,new Ne(Ae(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.C)(n,function(t){return Zt(t)});a=function(t,e,n){var r=ze.fromObject(n);return Gn(t,new De({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=Zt(n);a=Yn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=oi(t,s)),Vr(t.eventQueue_,d,a)}function Wr(t,e){Kr(t,"connected",e),!1===e&&function(t){ei(t,"onDisconnectEvents");var e=Yr(t),n=Ce();Te(t.onDisconnect_,at(),function(r,i){var o=lr(r,i,t.serverSyncTree_,e);Se(n,r,o)});var r=[];Te(n,at(),function(e,n){r=r.concat(Yn(t.serverSyncTree_,e,n));var i=li(t,e);oi(t,i)}),t.onDisconnect_=Ce(),Vr(t.eventQueue_,at(),r)}(t)}function Kr(t,e,n){var r=new st("/.info/"+e),i=Zt(n);t.infoData_.updateSnapshot(r,i);var o=Yn(t.infoSyncTree_,r,i);Vr(t.eventQueue_,r,o)}function Gr(t){return t.nextWriteId_++}function $r(t,e,n,r,i){ei(t,"set",{path:e.toString(),value:n,priority:r});var o=Yr(t),s=Zt(n,r),a=Kn(t.serverSyncTree_,e),u=hr(s,a,o),c=Gr(t),l=Hn(t.serverSyncTree_,e,u,c,!0);Mr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||S("set at "+e+" failed: "+n);var s=zn(t.serverSyncTree_,c,!o);Vr(t.eventQueue_,e,s),ni(0,i,n,r)});var h=li(t,e);oi(t,h),Vr(t.eventQueue_,h,[])}function Qr(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Ee(t.onDisconnect_,e),ni(0,n,r,i)})}function Jr(t,e,n,r){var i=Zt(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Se(t.onDisconnect_,e,i),ni(0,r,n,o)})}function Zr(t,e,n){var r;r=".info"===ut(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Ur(t.eventQueue_,e._path,r)}function ti(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function ei(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(s.f)([r],Object(s.e)(e)))}function ni(t,e,n,r){e&&F(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function ri(t,e,n){return Kn(t.serverSyncTree_,e,n)||Qt.EMPTY_NODE}function ii(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||ci(t,e),gr(e)){var n=ai(t,e);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=ri(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.e)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=mt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ei(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(zn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(ci(t,pr(t.transactionQueueTree_,e)),ii(t,t.transactionQueueTree_),Vr(t.eventQueue_,e,i),a=0;a<o.length;a++)F(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(S("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;oi(t,e)}},a)}(t,_r(e),n)}else yr(e)&&vr(e,function(e){ii(t,e)})}function oi(t,e){var n=si(t,e),r=_r(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=mt(n,c.path),h=!1;if(Object(o.e)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(zn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(zn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=ri(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){xr("transaction failed: Data returned ",f,c.path);var p=Zt(f);"object"==typeof f&&null!=f&&Object(o.i)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=Yr(t),y=hr(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=Gr(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Hn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(zn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(zn(t.serverSyncTree_,c.currentWriteId,!0))}Vr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(ci(t,t.transactionQueueTree_),u=0;u<r.length;u++)F(r[u]);ii(t,t.transactionQueueTree_)}}(t,ai(t,n),r),r}function si(t,e){var n,r=t.transactionQueueTree_;for(n=ut(e);null!==n&&void 0===gr(r);)r=pr(r,n),n=ut(e=lt(e));return r}function ai(t,e){var n=[];return ui(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function ui(t,e,n){var r=gr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);vr(e,function(e){ui(t,e,n)})}function ci(t,e){var n=gr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,mr(e,n.length>0?n:void 0)}vr(e,function(e){ci(t,e)})}function li(t,e){var n=_r(si(t,e)),r=pr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){hi(t,e)}),hi(t,r),br(r,function(e){hi(t,e)}),n}function hi(t,e){var n=gr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.e)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.e)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(zn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?mr(e,void 0):n.length=s+1,Vr(t.eventQueue_,_r(e),i),a=0;a<r.length;a++)F(r[a])}}var di=function(t,e){var n=fi(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new B(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new st(n.pathString)}},fi=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(s.g)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},pi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.H)(this.snapshot.exportVal())},t}(),gi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),mi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(o.e)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),yi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.a;return Qr(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Nr("OnDisconnect.remove",this._path);var t=new o.a;return Jr(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Nr("OnDisconnect.set",this._path),Ir("OnDisconnect.set",t,this._path,!1);var e=new o.a;return Jr(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Nr("OnDisconnect.setWithPriority",this._path),Ir("OnDisconnect.setWithPriority",t,this._path,!1),Ar("OnDisconnect.setWithPriority",e,!1);var n=new o.a;return function(t,e,n,r,i){var o=Zt(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Se(t.onDisconnect_,e,o),ni(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Nr("OnDisconnect.update",this._path),kr("OnDisconnect.update",t,this._path,!1);var e=new o.a;return function(t,e,n,r){if(Object(o.t)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void ni(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&R(n,function(n,r){var i=Zt(r);Se(t.onDisconnect_,pt(e,n),i)}),ni(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),vi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return gt(this._path)?null:ht(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Oi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=_e(this._queryParams),e=j(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return _e(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(o.n)(e))instanceof t))return!1;var n=this._repo===e._repo,r=vt(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function bi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _i(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===At){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Yt){if(null!=e&&!Tr(e)||null!=n&&!Tr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(t.getIndex()instanceof ne||t.getIndex()===re,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Oi=function(t){function e(e,n){return t.call(this,e,n,new ge,!1)||this}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=ft(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(vi),Ci=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new st(e),r=Ti(this.ref,e);return new t(this._node.getChild(n),r,Yt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ti(n.ref,r),Yt))})},t.prototype.hasChild=function(t){var e=new st(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Si(t,e){return(t=Object(o.n)(t))._checkNotDeleted("ref"),void 0!==e?Ti(t._root,e):t._root}function Ei(t,e){(t=Object(o.n)(t))._checkNotDeleted("refFromURL");var n=di(e,t._repo.repoInfo_.nodeAdmin);Dr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Si(t,n.path.toString())}function Ti(t,e){var n;return null===ut((t=Object(o.n)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Rr("child","path",n,!1)):Rr("child","path",e,!1),new Oi(t._repo,pt(t._path,e))}function Ii(t,e){t=Object(o.n)(t),Nr("push",t._path),Ir("push",e,t._path,!0);var n,r=zr(t._repo),i=oe(r),s=Ti(t,i),a=Ti(t,i);return n=null!=e?ki(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function xi(t){return Nr("remove",t._path),ki(t,null)}function ki(t,e){t=Object(o.n)(t),Nr("set",t._path),Ir("set",e,t._path,!1);var n=new o.a;return $r(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Ai(t,e){t=Object(o.n)(t),Nr("setPriority",t._path),Ar("setPriority",e,!1);var n=new o.a;return $r(t._repo,pt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function ji(t,e,n){if(Nr("setWithPriority",t._path),Ir("setWithPriority",e,t._path,!1),Ar("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.a;return $r(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Pi(t,e){kr("update",e,t._path,!1);var n=new o.a;return function(t,e,n,r){ei(t,"update",{path:e.toString(),value:n});var i=!0,s=Yr(t),a={};if(R(n,function(n,r){i=!1,a[n]=lr(pt(e,n),Zt(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),ni(0,r,"ok",void 0);else{var u=Gr(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.e)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=We(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=ze.fromObject(n);return Gn(t,new De({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Mr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||S("update at "+e+" failed: "+n);var s=zn(t.serverSyncTree_,u,!o),a=s.length>0?oi(t,e):e;Vr(t.eventQueue_,a,s),ni(0,r,n,i)}),R(n,function(n){var r=li(t,pt(e,n));oi(t,r)}),Vr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Ri=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new pi("value",this,new Ci(t.snapshotNode,new Oi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new gi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Ni=function(){function t(t){this.callbacks=t}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.i)(this.callbacks,e)},t.prototype.createCancelEvent=function(t,e){return this.callbacks.cancel.hasCancelCallback?new gi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.e)(null!=t.childName,"Child events should have a childName.");var n=Ti(new Oi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new pi(t.type,this,new Ci(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){if("cancel"===t.getEventType()){var e=this.callbacks.cancel;return function(){return e.onCancel(t.error)}}var n=this.callbacks[t.eventType];return function(){return n.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks||!e.callbacks)return!0;var r=Object.keys(e.callbacks),i=Object.keys(this.callbacks),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return a===s&&(!e.callbacks[s]||!this.callbacks[a]||e.callbacks[s].matches(this.callbacks[a]))}return i.every(function(t){return e.callbacks[t].matches(n.callbacks[t])})}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks},t}();function Di(t,e,n,r,i){var o,s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){var a=n,u=function(e,n){a(e,n),Zr(t._repo,t,l)};u.userCallback=n.userCallback,u.context=n.context,n=u}var c=new mi(n,s||void 0),l="value"===e?new Ri(c):new Ni(((o={})[e]=c,o));return function(t,e,n){var r;r=".info"===ut(e._path)?Wn(t.infoSyncTree_,e,n):Wn(t.serverSyncTree_,e,n),Ur(t.eventQueue_,e._path,r)}(t._repo,t,l),function(){return Zr(t._repo,t,l)}}function Li(t,e,n,r){return Di(t,"value",e,n,r)}function Fi(t,e,n,r){return Di(t,"child_added",e,n,r)}function Mi(t,e,n,r){return Di(t,"child_changed",e,n,r)}function Ui(t,e,n,r){return Di(t,"child_moved",e,n,r)}function Vi(t,e,n,r){return Di(t,"child_removed",e,n,r)}function qi(t,e,n){var r=null,i=null,o=n?new mi(n):null;"value"===e?r=new Ri(o):e&&(n&&((i={})[e]=o),r=new Ni(i)),Zr(t._repo,t,r)}var Bi=function(){return function(){}}(),Hi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Ir("endAt",this._value,t._path,!0);var e=ye(t._queryParams,this._value,this._key);if(wi(e),_i(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vi(t._repo,t._path,e,t._orderByCalled)},e}(Bi);function zi(t,e){return Pr("endAt","key",e,!0),new Hi(t,e)}var Yi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Ir("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===At?("string"==typeof n&&(n=ae(n)),i=ye(e,n,r)):i=ye(e,n,null==r?T:ae(r)),i.endBeforeSet_=!0,i);if(wi(o),_i(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vi(t._repo,t._path,o,t._orderByCalled)},e}(Bi);function Xi(t,e){return Pr("endBefore","key",e,!0),new Yi(t,e)}var Wi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Ir("startAt",this._value,t._path,!0);var e=me(t._queryParams,this._value,this._key);if(wi(e),_i(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vi(t._repo,t._path,e,t._orderByCalled)},e}(Bi);function Ki(t,e){return void 0===t&&(t=null),Pr("startAt","key",e,!0),new Wi(t,e)}var Gi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Ir("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===At?("string"==typeof n&&(n=se(n)),i=me(e,n,r)):i=me(e,n,null==r?I:se(r)),i.startAfterSet_=!0,i);if(wi(o),_i(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vi(t._repo,t._path,o,t._orderByCalled)},e}(Bi);function $i(t,e){return Pr("startAfter","key",e,!0),new Gi(t,e)}var Qi=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Bi);function Ji(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Qi(t)}var Zi=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Bi);function to(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Zi(t)}var eo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByChild");var e=new st(this._path);if(gt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ne(e),r=ve(t._queryParams,n);return _i(r),new vi(t._repo,t._path,r,!0)},e}(Bi);function no(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Rr("orderByChild","path",t,!1),new eo(t)}var ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByKey");var e=ve(t._queryParams,At);return _i(e),new vi(t._repo,t._path,e,!0)},e}(Bi);function io(){return new ro}var oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByPriority");var e=ve(t._queryParams,Yt);return _i(e),new vi(t._repo,t._path,e,!0)},e}(Bi);function so(){return new oo}var ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByValue");var e=ve(t._queryParams,re);return _i(e),new vi(t._repo,t._path,e,!0)},e}(Bi);function uo(){return new ao}var co=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){if(Ir("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Hi(this._value,this._key)._apply(new Wi(this._value,this._key)._apply(t))},e}(Bi);function lo(t,e){return Pr("equalTo","key",e,!0),new co(t,e)}function ho(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=Object(o.n)(t);try{for(var u=Object(s.g)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(o.e)(!Sn,"__referenceConstructor has already been defined"),Sn=t}(Oi),function(t){Object(o.e)(!jn,"__referenceConstructor has already been defined"),jn=t}(Oi);var fo={},po=!1;function go(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=di(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=di(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new V:new U(t.name,t.options,e);Dr("Invalid Firebase Database URL",s),gt(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var l=function(t,e,n){var r=fo[e.name];r||(fo[e.name]=r={});var i=r[t.toURLString()];return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Hr(t,po,n),r[t.toURLString()]=i,i}(a,t,c);return new mo(l,t)}var mo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=W(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new we(t.repoInfo_,function(e,n,r,i){Xr(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return Wr(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.H)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Tt(t.repoInfo_,e,function(e,n,r,i){Xr(t,e,n,r,i)},function(e){Wr(t,e)},function(e){!function(t,e){R(e,function(e,n){Kr(t,e,n)})}(t,e)},t.authTokenProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(r=function(){return new xe(t.stats_,t.server_)},i=t.repoInfo_.toString(),X[i]||(X[i]=r()),X[i]),t.infoData_=new Oe,t.infoSyncTree_=new Bn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Yn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),Kr(t,"connected",!1),t.serverSyncTree_=new Bn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Vr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Oi(this._repo,at())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=fo[e=this.app.name])&&n[t.key]===t||C("Database "+e+"("+t.repoInfo_+") has already been deleted."),ti(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&C("Cannot call "+t+" on a deleted database.")},t}();function yo(t){(t=Object(o.n)(t))._checkNotDeleted("goOffline"),ti(t._repo)}function vo(t){var e;(t=Object(o.n)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}function bo(t,e){b(t,e)}var _o={".sv":"timestamp"},wo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Oo(t,e,n){var r;if(t=Object(o.n)(t),Nr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.a,a=Li(t,function(){});return function(e,n,r,i,a,u){ei(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ci(r,new Oi(t._repo,t._path),Yt),s.resolve(new wo(n,i)))},status:null,order:p(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=ri(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{xr("transaction failed: Data returned ",h,c.path),c.status=0;var d=pr(e.transactionQueueTree_,n),f=gr(d)||[];f.push(c),mr(d,f);var g=void 0;"object"==typeof h&&null!==h&&Object(o.i)(h,".priority")?(g=Object(o.E)(h,".priority"),Object(o.e)(Tr(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(Kn(e.serverSyncTree_,n)||Qt.EMPTY_NODE).getPriority().val();var m=Yr(e),y=Zt(h,g),v=hr(y,l,m);c.currentOutputSnapshotRaw=y,c.currentOutputSnapshotResolved=v,c.currentWriteId=Gr(e);var b=Hn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Vr(e.eventQueue_,n,b),ii(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Co=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(o.I)("OnDisconnect.cancel",0,1,arguments.length),Object(o.J)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(o.I)("OnDisconnect.remove",0,1,arguments.length),Object(o.J)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(o.I)("OnDisconnect.set",1,2,arguments.length),Object(o.J)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(o.I)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o.J)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(o.I)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o.J)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),So=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.I)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Eo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(o.I)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(o.I)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(o.I)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(o.I)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(o.I)("DataSnapshot.child",0,1,arguments.length),e=String(e),Rr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(o.I)("DataSnapshot.hasChild",1,1,arguments.length),Rr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(o.I)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(o.I)("DataSnapshot.forEach",1,1,arguments.length),Object(o.J)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(o.I)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.I)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(o.I)("DataSnapshot.ref",0,0,arguments.length),new Io(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),To=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;Object(o.I)("Query.on",2,4,arguments.length),Object(o.J)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Eo(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Li(this._delegate,c,l),n;case"child_added":return Fi(this._delegate,c,l),n;case"child_removed":return Vi(this._delegate,c,l),n;case"child_changed":return Mi(this._delegate,c,l),n;case"child_moved":return Ui(this._delegate,c,l),n;default:throw new Error(Object(o.m)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(o.I)("Query.off",0,3,arguments.length),jr("Query.off",t,!0),Object(o.J)("Query.off","callback",e,!0),Object(o.K)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,qi(this._delegate,t,r)}else qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=mt(t,n);r=r||Ln(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Ln(i,at()):(i=new Pn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Le(r,!0,!1):null;return Be(Nn(i,e,nn(t.pendingWriteTree_,e._path),o?s.getNode():Qt.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=Zt(n),i=Yn(t.serverSyncTree_,e._path,r);return Ur(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ei(t,"get for query "+Object(o.H)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(o.n)(t))._repo,t).then(function(e){return new Ci(e,new Oi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Eo(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;Object(o.I)("Query.once",1,4,arguments.length),Object(o.J)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.on",r,i),u=new o.a,c=function(t,e){var r=new Eo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Li(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Fi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Vi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Mi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ui(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(o.m)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(o.I)("Query.limitToFirst",1,1,arguments.length),new t(this.database,ho(this._delegate,Ji(e)))},t.prototype.limitToLast=function(e){return Object(o.I)("Query.limitToLast",1,1,arguments.length),new t(this.database,ho(this._delegate,to(e)))},t.prototype.orderByChild=function(e){return Object(o.I)("Query.orderByChild",1,1,arguments.length),new t(this.database,ho(this._delegate,no(e)))},t.prototype.orderByKey=function(){return Object(o.I)("Query.orderByKey",0,0,arguments.length),new t(this.database,ho(this._delegate,io()))},t.prototype.orderByPriority=function(){return Object(o.I)("Query.orderByPriority",0,0,arguments.length),new t(this.database,ho(this._delegate,so()))},t.prototype.orderByValue=function(){return Object(o.I)("Query.orderByValue",0,0,arguments.length),new t(this.database,ho(this._delegate,uo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(o.I)("Query.startAt",0,2,arguments.length),new t(this.database,ho(this._delegate,Ki(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(o.I)("Query.startAfter",0,2,arguments.length),new t(this.database,ho(this._delegate,$i(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(o.I)("Query.endAt",0,2,arguments.length),new t(this.database,ho(this._delegate,zi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(o.I)("Query.endBefore",0,2,arguments.length),new t(this.database,ho(this._delegate,Xi(e,n)))},t.prototype.equalTo=function(e,n){return Object(o.I)("Query.equalTo",1,2,arguments.length),new t(this.database,ho(this._delegate,lo(e,n)))},t.prototype.toString=function(){return Object(o.I)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(o.I)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(o.I)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(o.J)(t,"cancel",r.cancel,!0),r.context=n,Object(o.K)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.m)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Io(this.database,new Oi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Io=function(t){function e(e,n){var r=t.call(this,e,new vi(n._repo,n._path,new ge,!1))||this;return r.database=e,r._delegate=n,r}return Object(s.c)(e,t),e.prototype.getKey=function(){return Object(o.I)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(o.I)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ti(this._delegate,t))},e.prototype.getParent=function(){Object(o.I)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(o.I)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(o.I)("Reference.set",1,2,arguments.length),Object(o.J)("Reference.set","onComplete",e,!0);var n=ki(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(o.I)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Nr("Reference.update",this._delegate._path),Object(o.J)("Reference.update","onComplete",e,!0);var i=Pi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){Object(o.I)("Reference.setWithPriority",2,3,arguments.length),Object(o.J)("Reference.setWithPriority","onComplete",n,!0);var r=ji(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(o.I)("Reference.remove",0,1,arguments.length),Object(o.J)("Reference.remove","onComplete",t,!0);var e=xi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(o.I)("Reference.transaction",1,3,arguments.length),Object(o.J)("Reference.transaction","transactionUpdate",t,!1),Object(o.J)("Reference.transaction","onComplete",e,!0),Lr("Reference.transaction","applyLocally",n,!0);var i=Oo(this._delegate,t,{applyLocally:n}).then(function(t){return new So(t.committed,new Eo(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){Object(o.I)("Reference.setPriority",1,2,arguments.length),Object(o.J)("Reference.setPriority","onComplete",e,!0);var n=Ai(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(o.I)("Reference.push",0,2,arguments.length),Object(o.J)("Reference.push","onComplete",n,!0);var i=Ii(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Nr("Reference.onDisconnect",this._delegate._path),new Co(new yi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(To),xo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e){!function(t,e,n){(t=Object(o.n)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized."),function(t,e,n){t.repoInfo_=new B(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new V)}(t._repo,e,n)}(this._delegate,t,e)},t.prototype.ref=function(t){if(Object(o.I)("database.ref",0,1,arguments.length),t instanceof Io){var e=Ei(this._delegate,t.toString());return new Io(this,e)}return e=Si(this._delegate,t),new Io(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(o.I)(e,1,1,arguments.length);var n=Ei(this._delegate,t);return new Io(this,n)},t.prototype.goOffline=function(){return Object(o.I)("database.goOffline",0,0,arguments.length),yo(this._delegate)},t.prototype.goOnline=function(){return Object(o.I)("database.goOnline",0,0,arguments.length),vo(this._delegate)},t.ServerValue={TIMESTAMP:_o,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),ko=Object.freeze({__proto__:null,forceLongPolling:function(){tt.forceDisallow(),G.forceAllow()},forceWebSockets:function(){G.forceDisallow()},isWebSocketsAvailable:function(){return tt.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ie(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);R(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;J(t.version);var u=new i.c("auth-internal",new i.b("database-standalone"));return u.setComponent(new i.a("auth-internal",function(){return r},"PRIVATE")),{instance:new xo(go(e,u,n,a),e),namespace:o}}}),Ao=Tt;Tt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Tt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var jo=Object.freeze({__proto__:null,DataConnection:Ao,RealTimeConnection:nt,hijackHash:function(t){var e=Tt.prototype.put;return Tt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Tt.prototype.put=e}},ConnectionTarget:B,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){po=t}(t)}}),Po=xo.ServerValue;!function(e){J(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new xo(go(r,i,n),r)},"PUBLIC").setServiceProps({Reference:Io,Query:To,Database:xo,DataSnapshot:Eo,enableLogging:bo,INTERNAL:ko,ServerValue:Po,TEST_ACCESS:jo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.10"),Object(o.x)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.4.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return On}),n.d(e,"b",function(){return xf}),n.d(e,"c",function(){return Cf}),n.d(e,"d",function(){return wf}),n.d(e,"e",function(){return Of}),n.d(e,"f",function(){return wp}),n.d(e,"g",function(){return hp}),n.d(e,"h",function(){return D}),n.d(e,"i",function(){return yh}),n.d(e,"j",function(){return Uf}),n.d(e,"k",function(){return df}),n.d(e,"l",function(){return ql}),n.d(e,"m",function(){return jf}),n.d(e,"n",function(){return hf}),n.d(e,"o",function(){return Yl}),n.d(e,"p",function(){return gi}),n.d(e,"q",function(){return yd}),n.d(e,"r",function(){return _s}),n.d(e,"s",function(){return Jn}),n.d(e,"t",function(){return A}),n.d(e,"u",function(){return wn}),n.d(e,"v",function(){return Ls}),n.d(e,"w",function(){return pf}),n.d(e,"x",function(){return lh}),n.d(e,"y",function(){return dh}),n.d(e,"z",function(){return Af}),n.d(e,"A",function(){return bf}),n.d(e,"B",function(){return xh}),n.d(e,"C",function(){return fp}),n.d(e,"D",function(){return Ih}),n.d(e,"E",function(){return sp}),n.d(e,"F",function(){return Bf}),n.d(e,"G",function(){return Zn}),n.d(e,"H",function(){return gf}),n.d(e,"I",function(){return If}),n.d(e,"J",function(){return Tf}),n.d(e,"K",function(){return ff}),n.d(e,"L",function(){return Kl}),n.d(e,"M",function(){return Wl}),n.d(e,"N",function(){return Si}),n.d(e,"O",function(){return $l}),n.d(e,"P",function(){return ni}),n.d(e,"Q",function(){return er}),n.d(e,"R",function(){return mp}),n.d(e,"S",function(){return Ch}),n.d(e,"T",function(){return Gf}),n.d(e,"U",function(){return En}),n.d(e,"V",function(){return Jl}),n.d(e,"W",function(){return Ql}),n.d(e,"X",function(){return Ah}),n.d(e,"Y",function(){return L}),n.d(e,"Z",function(){return ap}),n.d(e,"ab",function(){return ip}),n.d(e,"bb",function(){return f}),n.d(e,"cb",function(){return rp}),n.d(e,"db",function(){return bp}),n.d(e,"eb",function(){return Jf}),n.d(e,"fb",function(){return kf}),n.d(e,"gb",function(){return Os}),n.d(e,"hb",function(){return Tc}),n.d(e,"ib",function(){return ti}),n.d(e,"jb",function(){return Lr}),n.d(e,"kb",function(){return Sr}),n.d(e,"lb",function(){return Tr}),n.d(e,"mb",function(){return Ar}),n.d(e,"nb",function(){return xr}),n.d(e,"ob",function(){return Ir}),n.d(e,"pb",function(){return kr}),n.d(e,"qb",function(){return Oc}),n.d(e,"rb",function(){return vp}),n.d(e,"sb",function(){return Cc}),n.d(e,"tb",function(){return Sc}),n.d(e,"ub",function(){return Er}),n.d(e,"vb",function(){return q}),n.d(e,"wb",function(){return $s}),n.d(e,"xb",function(){return Ma}),n.d(e,"yb",function(){return La}),n.d(e,"zb",function(){return Fa}),n.d(e,"Ab",function(){return wc}),n.d(e,"Bb",function(){return Bh}),n.d(e,"Cb",function(){return It}),n.d(e,"Db",function(){return l}),n.d(e,"Eb",function(){return Cr}),n.d(e,"Fb",function(){return Us}),n.d(e,"Gb",function(){return wt}),n.d(e,"Hb",function(){return Ml}),n.d(e,"Ib",function(){return _o}),n.d(e,"Jb",function(){return ia}),n.d(e,"Kb",function(){return bu}),n.d(e,"Lb",function(){return mu}),n.d(e,"Mb",function(){return jd}),n.d(e,"Nb",function(){return Z}),n.d(e,"Ob",function(){return at}),n.d(e,"Pb",function(){return w}),n.d(e,"Qb",function(){return O}),n.d(e,"Rb",function(){return it}),n.d(e,"Sb",function(){return ut}),n.d(e,"Tb",function(){return Ea}),n.d(e,"Ub",function(){return ja}),n.d(e,"Vb",function(){return Ra}),n.d(e,"Wb",function(){return Pa}),n.d(e,"Xb",function(){return Aa}),n.d(e,"Yb",function(){return ka}),n.d(e,"Zb",function(){return Da}),n.d(e,"ac",function(){return ln}),n.d(e,"bc",function(){return mc}),n.d(e,"cc",function(){return Kn}),n.d(e,"dc",function(){return dn}),n.d(e,"ec",function(){return Fd}),n.d(e,"fc",function(){return Ua}),n.d(e,"gc",function(){return Pd}),n.d(e,"hc",function(){return za}),n.d(e,"ic",function(){return ud}),n.d(e,"jc",function(){return ld}),n.d(e,"kc",function(){return Ia}),n.d(e,"lc",function(){return Ka}),n.d(e,"mc",function(){return Ga}),n.d(e,"nc",function(){return Wh}),n.d(e,"oc",function(){return kd}),n.d(e,"pc",function(){return Sa}),n.d(e,"qc",function(){return Gt}),n.d(e,"rc",function(){return ri}),n.d(e,"sc",function(){return oi}),n.d(e,"tc",function(){return ot}),n.d(e,"uc",function(){return gu}),n.d(e,"vc",function(){return yc}),n.d(e,"wc",function(){return Ca}),n.d(e,"xc",function(){return Pu}),n.d(e,"yc",function(){return Ru}),n.d(e,"zc",function(){return Nu}),n.d(e,"Ac",function(){return Du});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function _(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function O(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return S(t,T)||S(t,x)}function S(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(k))?t[I]:null}const T=u({"\u0275prov":u}),I=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),k=u({ngInjectorDef:u});var A=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let j;function P(t){const e=j;return j=t,e}function R(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function N(t){return{toString:t}.toString()}var D=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,q=F||V||M||U,B={},H=[],z=[],Y=u({"\u0275cmp":u}),X=u({"\u0275dir":u}),W=u({"\u0275pipe":u}),K=u({"\u0275mod":u}),G=u({"\u0275loc":u}),$=u({"\u0275fac":u}),Q=u({__NG_ELEMENT_ID__:u});let J=0;function Z(t){return N(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function tt(t,e,n){const r=t.\u0275cmp;r.directiveDefs=()=>e.map(et),r.pipeDefs=()=>n.map(nt)}function et(t){return ct(t)||lt(t)}function nt(t){return ht(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&N(()=>{rt[t.id]=t.type}),e}function ot(t,e){return N(()=>{const n=dt(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function st(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=Z;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[Y]||null}function lt(t){return t[X]||null}function ht(t){return t[W]||null}function dt(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}function ft(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty($)?t[$]:null}class _t{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return Ot}function Ot(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),Ct}function Ct(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new _t(u&&u.currentValue,e,s===B),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}let Tt;function It(t){Tt=t}function xt(){return void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0}function kt(t){return!!t.listen}wt.ngInherit=!0;const At={createRenderer:(t,e)=>xt()};function jt(t){for(;Array.isArray(t);)t=t[0];return t}function Pt(t,e){return jt(e[t])}function Rt(t,e){return jt(e[t.index])}function Nt(t,e){return t.data[e]}function Dt(t,e){return t[e]}function Lt(t,e){const n=e[t];return ft(n)?n:n[0]}function Ft(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Mt(t){return 4==(4&t[2])}function Ut(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function qt(t){t[18]=0}function Bt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ht={lFrame:be(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function zt(){return Ht.bindingsEnabled}function Yt(){Ht.bindingsEnabled=!0}function Xt(){Ht.bindingsEnabled=!1}function Wt(){return Ht.lFrame.lView}function Kt(){return Ht.lFrame.tView}function Gt(t){Ht.lFrame.contextLView=t}function $t(){let t=Qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Qt(){return Ht.lFrame.currentTNode}function Jt(){const t=Ht.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Zt(t,e){const n=Ht.lFrame;n.currentTNode=t,n.isParent=e}function te(){return Ht.lFrame.isParent}function ee(){Ht.lFrame.isParent=!1}function ne(){return Ht.isInCheckNoChangesMode}function re(t){Ht.isInCheckNoChangesMode=t}function ie(){const t=Ht.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function oe(){return Ht.lFrame.bindingIndex}function se(t){return Ht.lFrame.bindingIndex=t}function ae(){return Ht.lFrame.bindingIndex++}function ue(t){const e=Ht.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ce(t){Ht.lFrame.inI18n=t}function le(t,e){const n=Ht.lFrame;n.bindingIndex=n.bindingRootIndex=t,he(e)}function he(t){Ht.lFrame.currentDirectiveIndex=t}function de(t){const e=Ht.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function fe(){return Ht.lFrame.currentQueryIndex}function pe(t){Ht.lFrame.currentQueryIndex=t}function ge(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function me(t,e,n){if(n&A.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&A.Host||(r=ge(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ht.lFrame=ve();return r.currentTNode=e,r.lView=t,!0}function ye(t){const e=ve(),n=t[1];Ht.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ve(){const t=Ht.lFrame,e=null===t?null:t.child;return null===e?be(t):e}function be(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function _e(){const t=Ht.lFrame;return Ht.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const we=_e;function Oe(){const t=_e();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ce(){return Ht.lFrame.selectedIndex}function Se(t){Ht.lFrame.selectedIndex=t}function Ee(){const t=Ht.lFrame;return Nt(t.tView,t.selectedIndex)}function Te(){Ht.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function Ie(){Ht.lFrame.currentNamespace="http://www.w3.org/1998/MathML/"}function xe(){Ht.lFrame.currentNamespace=null}function ke(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ae(t,e,n){Re(t,e,3,n)}function je(t,e,n,r){(3&t[2])===n&&Re(t,e,n,r)}function Pe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Re(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Ne(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Ne(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}class De{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Le(t,e,n){const r=kt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Me(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Fe(t){return 3===t||4===t||6===t}function Me(t){return 64===t.charCodeAt(0)}function Ue(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ve(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ve(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function qe(t){return-1!==t}function Be(t){return 32767&t}function He(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let ze=!0;function Ye(t){const e=ze;return ze=t,e}let Xe=0;function We(t,e){const n=Ge(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ke(r.data,t),Ke(e,null),Ke(r.blueprint,null));const i=$e(t,e),o=t.injectorIndex;if(qe(i)){const t=Be(i),n=He(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ke(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ge(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function $e(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=Xe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Je(t,e,n){if(n&A.Optional)return t;b(e,"NodeInjector")}function Ze(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],o=P(void 0);try{return i?i.get(e,r,n&A.Optional):R(e,r,n&A.Optional)}finally{P(o)}}return Je(r,e,n)}function tn(t,e,n,r=A.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Q)?t[Q]:void 0;return"number"==typeof e?e>=0?255&e:nn:e}(n);if("function"==typeof o){if(!me(e,t,r))return r&A.Host?Je(i,n,r):Ze(e,n,r,i);try{const t=o();if(null!=t||r&A.Optional)return t;b(n)}finally{we()}}else if("number"==typeof o){let i=null,s=Ge(t,e),a=-1,u=r&A.Host?e[16][6]:null;for((-1===s||r&A.SkipSelf)&&(a=-1===s?$e(t,e):e[s+8],-1!==a&&un(r,!1)?(i=e[1],s=Be(a),e=He(a,e)):s=-1);-1!==s;){const t=e[1];if(an(o,s,t.data)){const t=rn(s,e,n,i,r,u);if(t!==en)return t}a=e[s+8],-1!==a&&un(r,e[1].data[s+8]===u)&&an(o,s,e)?(i=t,s=Be(a),e=He(a,e)):s=-1}}}return Ze(e,n,r,i)}const en={};function nn(){return new cn($t(),Wt())}function rn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=on(a,s,n,null==r?mt(a)&&ze:r!=s&&0!=(3&a.type),i&A.Host&&o===a);return null!==u?sn(e,s,u,a):en}function on(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}function sn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof De){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Ye(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?P(s.injectImpl):null;me(t,r,A.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ot(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&P(u),Ye(a),s.resolving=!1,we()}}return i}function an(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function un(t,e){return!(t&A.Self||t&A.Host&&e)}class cn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return tn(this._tNode,this._lView,t,void 0,e)}}function ln(t){return N(()=>{const e=t.prototype.constructor,n=e[$]||hn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||hn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function hn(t){return g(t)?()=>{const e=hn(p(t));return e&&e()}:bt(t)}function dn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Fe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}($t(),t)}const fn="__annotations__",pn="__parameters__",gn="__prop__metadata__";function mn(t,e,n,r,i){return N(()=>{const o=yn(e);function s(...t){if(this instanceof s)return o.call(this,...t),this;const e=new s(...t);return function(n){return i&&i(n,...t),(n.hasOwnProperty(fn)?n[fn]:Object.defineProperty(n,fn,{value:[]})[fn]).push(e),r&&r(n),n}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}function yn(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}function vn(t,e,n){return N(()=>{const r=yn(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(pn)?t[pn]:Object.defineProperty(t,pn,{value:[]})[pn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function bn(t,e,n,r){return N(()=>{const i=yn(e);function o(...t){if(this instanceof o)return i.apply(this,t),this;const e=new o(...t);return function(n,i){const o=n.constructor,s=o.hasOwnProperty(gn)?o[gn]:Object.defineProperty(o,gn,{value:{}})[gn];s[i]=s.hasOwnProperty(i)&&s[i]||[],s[i].unshift(e),r&&r(n,i,...t)}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}const _n=function(){return vn("Attribute",t=>({attributeName:t,__NG_ELEMENT_ID__:()=>dn(t)}))}();class wn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const On=new wn("AnalyzeForEntryComponents");var Cn=function(t){return t[t.Token=0]="Token",t[t.Attribute=1]="Attribute",t[t.ChangeDetectorRef=2]="ChangeDetectorRef",t[t.Invalid=3]="Invalid",t}({});function Sn(){const t=q.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}const En=Function;function Tn(t){return"function"==typeof t}function In(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),In(r,e)):e!==t&&e.push(r)}return e}function xn(t,e){t.forEach(t=>Array.isArray(t)?xn(t,e):e(t))}function kn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function An(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function jn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function Pn(t,e,n){let r=Nn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Rn(t,e){const n=Nn(t,e);if(n>=0)return t[1|n]}function Nn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const Dn=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|[^()]+\(arguments\))\)/,Ln=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Fn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Mn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/;class Un{constructor(t){this._reflect=t||q.Reflect}isReflectionEnabled(){return!0}factory(t){return(...e)=>new t(...e)}_zipTypesAndAnnotations(t,e){let n;n=jn(void 0===t?e.length:t.length);for(let r=0;r<n.length;r++)n[r]=void 0===t?[]:t[r]&&t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n}_ownParameters(t,e){if(n=t.toString(),Dn.test(n)||Mn.test(n)||Ln.test(n)&&!Fn.test(n))return null;var n;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;const r=t.ctorParameters;if(r&&r!==e.ctorParameters){const t="function"==typeof r?r():r,e=t.map(t=>t&&t.type),n=t.map(t=>t&&Vn(t.decorators));return this._zipTypesAndAnnotations(e,n)}const i=t.hasOwnProperty(pn)&&t[pn],o=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return o||i?this._zipTypesAndAnnotations(o,i):jn(t.length)}parameters(t){if(!Tn(t))return[];const e=qn(t);let n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]}_ownAnnotations(t,e){if(t.annotations&&t.annotations!==e.annotations){let e=t.annotations;return"function"==typeof e&&e.annotations&&(e=e.annotations),e}return t.decorators&&t.decorators!==e.decorators?Vn(t.decorators):t.hasOwnProperty(fn)?t[fn]:null}annotations(t){if(!Tn(t))return[];const e=qn(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)}_ownPropMetadata(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){let e=t.propMetadata;return"function"==typeof e&&e.propMetadata&&(e=e.propMetadata),e}if(t.propDecorators&&t.propDecorators!==e.propDecorators){const e=t.propDecorators,n={};return Object.keys(e).forEach(t=>{n[t]=Vn(e[t])}),n}return t.hasOwnProperty(gn)?t[gn]:null}propMetadata(t){if(!Tn(t))return{};const e=qn(t),n={};if(e!==Object){const t=this.propMetadata(e);Object.keys(t).forEach(e=>{n[e]=t[e]})}const r=this._ownPropMetadata(t,e);return r&&Object.keys(r).forEach(t=>{const e=[];n.hasOwnProperty(t)&&e.push(...n[t]),e.push(...r[t]),n[t]=e}),n}ownPropMetadata(t){return Tn(t)&&this._ownPropMetadata(t,qn(t))||{}}hasLifecycleHook(t,e){return t instanceof En&&e in t.prototype}guards(t){return{}}getter(t){return new Function("o","return o."+t+";")}setter(t){return new Function("o","v","return o."+t+" = v;")}method(t){return new Function("o","args",`if (!o.${t}) throw new Error('"${t}" is undefined');\n        return o.${t}.apply(o, args);`)}importUri(t){return"object"==typeof t&&t.filePath?t.filePath:`./${l(t)}`}resourceUri(t){return`./${l(t)}`}resolveIdentifier(t,e,n,r){return r}resolveEnum(t,e){return t[e]}}function Vn(t){return t?t.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function qn(t){const e=t.prototype?Object.getPrototypeOf(t.prototype):null;return(e?e.constructor:null)||Object}const Bn={},Hn=/\n/gm,zn=u({provide:String,useValue:u});let Yn;function Xn(t){const e=Yn;return Yn=t,e}function Wn(t,e=A.Default){if(void 0===Yn)throw new Error("inject() must be called from an injection context");return null===Yn?R(t,void 0,e):Yn.get(t,e&A.Optional?null:void 0,e)}function Kn(t,e=A.Default){return(j||Wn)(p(t),e)}function Gn(t){throw new Error("invalid")}function $n(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=A.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Kn(t,n))}else e.push(Kn(r))}return e}function Qn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Jn=Qn(vn("Inject",t=>({token:t})),-1),Zn=Qn(vn("Optional"),8),tr=Qn(vn("Self"),2),er=Qn(vn("SkipSelf"),4),nr=Qn(vn("Host"),1);let rr=null;function ir(){return rr=rr||new Un}function or(t){return function(t){const e=Sn();return t.map(t=>function(t,e){const n={token:null,host:!1,optional:!1,resolved:t.R3ResolvedDependencyType.Token,self:!1,skipSelf:!1};function r(e){n.resolved=t.R3ResolvedDependencyType.Token,n.token=e}if(Array.isArray(e)&&e.length>0)for(let i=0;i<e.length;i++){const o=e[i];if(void 0===o)continue;const s=Object.getPrototypeOf(o);if(o instanceof Zn||"Optional"===s.ngMetadataName)n.optional=!0;else if(o instanceof er||"SkipSelf"===s.ngMetadataName)n.skipSelf=!0;else if(o instanceof tr||"Self"===s.ngMetadataName)n.self=!0;else if(o instanceof nr||"Host"===s.ngMetadataName)n.host=!0;else if(o instanceof Jn)n.token=o.token;else if(o instanceof _n){if(void 0===o.attributeName)throw new Error("Attribute name must be defined.");n.token=o.attributeName,n.resolved=t.R3ResolvedDependencyType.Attribute}else!0===o.__ChangeDetectorRef__?(n.token=o,n.resolved=t.R3ResolvedDependencyType.ChangeDetectorRef):r(o)}else void 0===e||Array.isArray(e)&&0===e.length?(n.token=void 0,n.resolved=Cn.Invalid):r(e);return n}(e,t))}(ir().parameters(t))}let sr=new Map;const ar=new Set;function ur(t){return!!(t.templateUrl&&!t.hasOwnProperty("template")||t.styleUrls&&t.styleUrls.length)}let cr,lr;function hr(){if(void 0===cr&&(cr=null,q.trustedTypes))try{cr=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return cr}function dr(t){var e;return(null===(e=hr())||void 0===e?void 0:e.createHTML(t))||t}function fr(){if(void 0===lr&&(lr=null,q.trustedTypes))try{lr=q.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return lr}function pr(t){var e;return(null===(e=fr())||void 0===e?void 0:e.createHTML(t))||t}function gr(t){var e;return(null===(e=fr())||void 0===e?void 0:e.createScript(t))||t}function mr(t){var e;return(null===(e=fr())||void 0===e?void 0:e.createScriptURL(t))||t}class yr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class vr extends yr{getTypeName(){return"HTML"}}class br extends yr{getTypeName(){return"Style"}}class _r extends yr{getTypeName(){return"Script"}}class wr extends yr{getTypeName(){return"URL"}}class Or extends yr{getTypeName(){return"ResourceURL"}}function Cr(t){return t instanceof yr?t.changingThisBreaksApplicationSecurity:t}function Sr(t,e){const n=Er(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Er(t){return t instanceof yr&&t.getTypeName()||null}function Tr(t){return new vr(t)}function Ir(t){return new br(t)}function xr(t){return new _r(t)}function kr(t){return new wr(t)}function Ar(t){return new Or(t)}function jr(t){const e=new Rr(t);return function(){try{return!!(new window.DOMParser).parseFromString(dr(""),"text/html")}catch(t){return!1}}()?new Pr(e):e}class Pr{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(dr(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Rr{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=dr(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=dr(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Nr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Dr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Lr(t){return(t=String(t)).match(Nr)||t.match(Dr)?t:"unsafe:"+t}function Fr(t){return(t=String(t)).split(",").map(t=>Lr(t.trim())).join(", ")}function Mr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Ur(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Vr=Mr("area,br,col,hr,img,wbr"),qr=Mr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Br=Mr("rp,rt"),Hr=Ur(Br,qr),zr=Ur(Vr,Ur(qr,Mr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ur(Br,Mr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hr),Yr=Mr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xr=Mr("srcset"),Wr=Ur(Yr,Xr,Mr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Mr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Kr=Mr("script,style,template");class Gr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!zr.hasOwnProperty(e))return this.sanitizedSomething=!0,!Kr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!Wr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;Yr[i]&&(o=Lr(o)),Xr[i]&&(o=Fr(o)),this.buf.push(" ",e,'="',Jr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();zr.hasOwnProperty(e)&&!Vr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Jr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const $r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qr=/([^\#-~ |!])/g;function Jr(t){return t.replace(/&/g,"&amp;").replace($r,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Qr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zr;function ti(t,e){let n=null;try{Zr=Zr||jr(t);let r=e?String(e):"";n=Zr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Zr.getInertBodyElement(r)}while(r!==o);return dr((new Gr).sanitizeChildren(ei(n)||n))}finally{if(n){const t=ei(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ei(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ni=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ri(t){const e=hi();return e?pr(e.sanitize(ni.HTML,t)||""):Sr(t,"HTML")?pr(Cr(t)):ti(xt(),y(t))}function ii(t){const e=hi();return e?e.sanitize(ni.STYLE,t)||"":Sr(t,"Style")?Cr(t):y(t)}function oi(t){const e=hi();return e?e.sanitize(ni.URL,t)||"":Sr(t,"URL")?Cr(t):Lr(y(t))}function si(t){const e=hi();if(e)return mr(e.sanitize(ni.RESOURCE_URL,t)||"");if(Sr(t,"ResourceURL"))return mr(Cr(t));throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)")}function ai(t){const e=hi();if(e)return gr(e.sanitize(ni.SCRIPT,t)||"");if(Sr(t,"Script"))return gr(Cr(t));throw new Error("unsafe value used in a script context")}function ui(t){return dr(t[0])}function ci(t){return function(t){var e;return(null===(e=hr())||void 0===e?void 0:e.createScriptURL(t))||t}(t[0])}function li(t,e,n){return function(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?si:oi}(e,n)(t)}function hi(){const t=Wt();return t&&t[12]}function di(t){return t.ngDebugContext}function fi(t){return t.ngOriginalError}function pi(t,...e){t.error(...e)}class gi{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||pi}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?di(t)?di(t):this._findContext(fi(t)):null}_findOriginalError(t){let e=fi(t);for(;e&&fi(e);)e=fi(e);return e}}const mi=/^>|^->|<!--|-->|--!>|<!-$/g,yi=/(<|>)/;function vi(t,e){t.__ngContext__=e}const bi=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function _i(t){return{name:"window",target:t.ownerDocument.defaultView}}function wi(t){return{name:"document",target:t.ownerDocument}}function Oi(t){return{name:"body",target:t.ownerDocument.body}}function Ci(t){return t instanceof Function?t():t}var Si=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Ei;function Ti(t,e){return Ei(t,e)}function Ii(t){const e=t[3];return pt(e)?e[3]:e}function xi(t){return Ai(t[13])}function ki(t){return Ai(t[4])}function Ai(t){for(;null!==t&&!pt(t);)t=t[4];return t}function ji(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:ft(r)&&(s=!0,r=r[0]);const a=jt(r);0===t&&null!==n?null==i?Hi(e,n,a):Bi(e,n,a,i||null,!0):1===t&&null!==n?Bi(e,n,a,i||null,!0):2===t?eo(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==jt(n)&&ji(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];ro(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Pi(t,e){return kt(t)?t.createText(e):t.createTextNode(e)}function Ri(t,e,n){kt(t)?t.setValue(e,n):e.textContent=n}function Ni(t,e){return t.createComment(function(t){return t.replace(mi,t=>t.replace(yi,"\u200b$1\u200b"))}(e))}function Di(t,e,n){return kt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Li(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Bt(i,-1)),n.splice(r,1)}function Fi(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Li(o,r),e>0&&(t[n-1][4]=r[4]);const s=An(t,10+e);ro(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Mi(t,e){if(!(256&e[2])){const n=e[11];kt(n)&&n.destroyNode&&ro(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ui(t[1],t);for(;e;){let n=null;if(ft(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ft(e)&&Ui(e[1],e),e=e[3];null===e&&(e=t),ft(e)&&Ui(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ui(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof De)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):jt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&kt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&Li(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Vi(t,e,n){return qi(t,e.parent,n)}function qi(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return Rt(r,n)}function Bi(t,e,n,r,i){kt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Hi(t,e,n){kt(t)?t.appendChild(e,n):e.appendChild(n)}function zi(t,e,n,r,i){null!==r?Bi(t,e,n,r,i):Hi(t,e,n)}function Yi(t,e){return kt(t)?t.parentNode(e):e.parentNode}function Xi(t,e,n){return Gi(t,e,n)}function Wi(t,e,n){return 40&t.type?Rt(t,n):null}let Ki,Gi=Wi;function $i(t,e){Gi=t,Ki=e}function Qi(t,e,n,r){const i=Vi(t,r,e),o=e[11],s=Xi(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)zi(o,i,n[a],s,!1);else zi(o,i,n,s,!1);void 0!==Ki&&Ki(o,r,e,n,i)}function Ji(t,e){if(null!==e){const n=e.type;if(3&n)return Rt(e,t);if(4&n)return to(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Ji(t,n);{const n=t[e.index];return pt(n)?to(-1,n):jt(n)}}if(32&n)return Ti(e,t)()||jt(t[e.index]);{const n=Zi(t,e);return null!==n?Array.isArray(n)?n[0]:Ji(Ii(t[16]),n):Ji(t,e.next)}}return null}function Zi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function to(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Ji(t,r)}return e[7]}function eo(t,e,n){const r=Yi(t,e);r&&function(t,e,n,r){kt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function no(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&vi(jt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)no(t,e,n.child,r,i,o,!1),ji(e,t,i,a,o);else if(32&u){const s=Ti(n,r);let u;for(;u=s();)ji(e,t,i,u,o);ji(e,t,i,a,o)}else 16&u?io(t,e,r,n,i,o):ji(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ro(t,e,n,r,i,o){no(n,r,t.firstChild,e,i,o,!1)}function io(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)ji(e,t,i,a[u],o);else no(t,e,a,s[3],i,o,!0)}function oo(t,e,n){kt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function so(t,e,n){kt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ao(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function uo(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ao(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function co(t){return 4===t.type&&"ng-template"!==t.value}function lo(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function ho(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Fe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!lo(t,u,n)||""===u&&1===e.length){if(fo(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!uo(t.attrs,c,n)){if(fo(r))return!1;s=!0}continue}const l=po(8&r?"class":u,i,co(t),n);if(-1===l){if(fo(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ao(e,c,0)||2&r&&c!==t){if(fo(r))return!1;s=!0}}}}else{if(!s&&!fo(r)&&!fo(u))return!1;if(s&&fo(u))continue;s=!1,r=u|1&r}}return fo(r)||s}function fo(t){return 0==(1&t)}function po(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function go(t,e,n=!1){for(let r=0;r<e.length;r++)if(ho(t,e[r],n))return!0;return!1}function mo(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function yo(t,e){return t?":not("+e.trim()+")":e}function vo(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||fo(s)||(e+=yo(o,i),i=""),r=s,o=o||!fo(r);n++}return""!==i&&(e+=yo(o,i)),e}const bo={};function _o(t){wo(Kt(),Wt(),Ce()+t,ne())}function wo(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ae(e,r,n)}else{const r=t.preOrderHooks;null!==r&&je(e,r,0,n)}Se(n)}function Oo(t,e){return t<<17|e<<2}function Co(t){return t>>17&32767}function So(t){return 2|t}function Eo(t){return(131068&t)>>2}function To(t,e){return-131069&t|e<<2}function Io(t){return 1|t}function xo(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];pe(i),n.contentQueries(2,e[o],o)}}}function ko(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,qt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ao(t,e,n,r,i){let o=t.data[e];if(null===o)o=jo(t,e,n,r,i),Ht.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=Jt();o.injectorIndex=null===t?-1:t.injectorIndex}return Zt(o,!0),o}function jo(t,e,n,r,i){const o=Qt(),s=te(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function Po(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ro(t,e,n){ye(e);try{const r=t.viewQuery;null!==r&&hs(1,r,n);const i=t.template;null!==i&&Lo(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&xo(t,e),t.staticViewQueries&&hs(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)ss(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Oe()}}function No(t,e,n,r){const i=e[2];if(256==(256&i))return;ye(e);const o=ne();try{qt(e),se(t.bindingStartIndex),null!==n&&Lo(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ae(e,n,null)}else{const n=t.preOrderHooks;null!==n&&je(e,n,0,null),Pe(e,0)}if(function(t){for(let e=xi(t);null!==e;e=ki(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Bt(r,1),n[2]|=1024}}}(e),function(t){for(let e=xi(t);null!==e;e=ki(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Ut(n)&&No(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&xo(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ae(e,n)}else{const n=t.contentHooks;null!==n&&je(e,n,1),Pe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)Se(~r);else{const i=r,o=n[++t],s=n[++t];le(o,i),s(2,e[i])}}}finally{Se(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)is(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&hs(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ae(e,n)}else{const n=t.viewHooks;null!==n&&je(e,n,2),Pe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Bt(e[3],-1))}finally{Oe()}}function Do(t,e,n,r){const i=e[10],o=!ne(),s=Mt(e);try{o&&!s&&i.begin&&i.begin(),s&&Ro(t,e,r),No(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Lo(t,e,n,r,i){const o=Ce(),s=2&r;try{Se(-1),s&&e.length>20&&wo(t,e,20,ne()),n(r,i)}finally{Se(o)}}function Fo(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Mo(t,e,n){zt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||We(n,e),vi(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Jo(e,n,r);const u=sn(e,t,a,n);vi(u,e),null!==s&&es(0,a-i,u,r,0,s),o&&(Lt(n.index,e)[8]=u)}}(t,e,n,Rt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ht.lFrame.currentDirectiveIndex;try{Se(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];he(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Wo(r,i)}}finally{Se(-1),he(s)}}(t,e,n))}function Uo(t,e,n=Rt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Vo(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=qo(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function qo(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:bo);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Bo(t,e,n,r){const i=fs(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&ps(t).push(r,i.length-1))}function Ho(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function zo(t,e,n,r,i,o,s,a){const u=Rt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(ys(t,n,c,r,i),mt(e)&&function(t,e){const n=Lt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,kt(o)?o.setProperty(u,r,i):Me(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Yo(t,e,n,r){let i=!1;if(zt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];go(n,s.selectors,!1)&&(i||(i=[]),Qe(We(n,e),t,s.type),vt(s)?(Ko(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,$o(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Po(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ue(n.mergedAttrs,c.hostAttrs),Qo(t,n,e,u,c),Go(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||co(e)?null:ns(n,i);o.push(c),s=Ho(n,u,s),a=Ho(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ue(n.mergedAttrs,n.attrs),i}function Xo(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Wo(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ko(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Go(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function $o(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Qo(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new De(o,vt(i),null);t.blueprint[r]=s,n[r]=s,Xo(t,e,0,r,Po(t,n,i.hostVars,bo),i)}function Jo(t,e,n){const r=Rt(e,t),i=Vo(n),o=t[10],s=as(t,ko(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Zo(t,e,n,r,i,o){const s=Rt(t,e);ts(e[11],s,o,t.value,n,r,i)}function ts(t,e,n,r,i,o,s){if(null==o)kt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);kt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function es(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ns(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function rs(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function is(t,e){const n=Lt(e,t);if(Ut(n)){const t=n[1];80&n[2]?No(t,n,t.template,n[8]):n[5]>0&&os(n)}}function os(t){for(let n=xi(t);null!==n;n=ki(n))for(let t=10;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];No(t,e,t.template,e[8])}else e[5]>0&&os(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Lt(e[n],t);Ut(r)&&r[5]>0&&os(r)}}function ss(t,e){const n=Lt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ro(r,n,n[8])}function as(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function us(t){for(;t;){t[2]|=64;const e=Ii(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function cs(t,e,n){const r=e[10];r.begin&&r.begin();try{No(t,e,t.template,n)}catch(i){throw ms(e,i),i}finally{r.end&&r.end()}}function ls(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ft(n),i=r[1];Do(i,r,i.template,n)}}(t[8])}function hs(t,e,n){pe(0),e(t,n)}const ds=(()=>Promise.resolve(null))();function fs(t){return t[7]||(t[7]=[])}function ps(t){return t.cleanup||(t.cleanup=[])}function gs(t,e,n){return(null===t||vt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function ms(t,e){const n=t[9],r=n?n.get(gi,null):null;r&&r.handleError(e)}function ys(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function vs(t,e,n){const r=Pt(e,t);Ri(t[11],r,n)}function bs(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const _s=new wn("INJECTOR",-1);class ws{get(t,e=Bn){if(e===Bn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Os=new wn("Set Injector scope."),Cs={},Ss={},Es=[];let Ts;function Is(){return void 0===Ts&&(Ts=new ws),Ts}function xs(t,e=null,n=null,r){return new ks(t,n,e||Is(),r)}class ks{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&xn(e,n=>this.processProvider(n,t,e)),xn([t],t=>this.processInjectorType(t,[],i)),this.records.set(_s,Ps(void 0,this));const o=this.records.get(Os);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Bn,n=A.Default){this.assertNotDestroyed();const r=Xn(this);try{if(!(n&A.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof wn)&&C(t);e=n&&this.injectableDefInScope(n)?Ps(As(t),Cs):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&A.Self?Is():this.parent).get(t,e=n&A.Optional&&e===Bn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Hn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Xn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{xn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];xn(r,t=>this.processProvider(t,n,r||Es))}}this.injectorDefTypes.add(o);const a=bt(o)||(()=>new o);this.records.set(o,Ps(a,Cs));const u=r.providers;if(null!=u&&!s){const e=t;xn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Ns(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Rs(t)?Ps(void 0,t.useValue):Ps(js(t),Cs)}(t);if(Ns(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Ps(void 0,Cs,!0),e.factory=()=>$n(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Cs&&(e.value=Ss,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function As(t){const e=C(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;if(t instanceof wn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=jn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[T]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function js(t,e,n){let r;if(Ns(t)){const e=p(t);return bt(e)||As(e)}if(Rs(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...$n(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Kn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||As(e);r=()=>new e(...$n(t.deps))}var i;return r}function Ps(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Rs(t){return null!==t&&"object"==typeof t&&zn in t}function Ns(t){return"function"==typeof t}const Ds=function(t,e,n){return function(t,e=null,n=null,r){const i=xs(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Ls=(()=>{class t{static create(t,e){return Array.isArray(t)?Ds(t,e,""):Ds(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Bn,t.NULL=new ws,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>Kn(_s)}),t.__NG_ELEMENT_ID__=-1,t})();function Fs(t,e){ke(Ft(t)[1],$t())}function Ms(t){return Object.getPrototypeOf(t.prototype).constructor}function Us(t){let e=Ms(t.type),n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Vs(t.inputs),e.declaredInputs=Vs(t.declaredInputs),e.outputs=Vs(t.outputs);const n=i.hostBindings;n&&Hs(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&qs(t,o),s&&Bs(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Us&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ue(i.hostAttrs,n=Ue(n,i.hostAttrs))}}(r)}function Vs(t){return t===B?{}:t===z?[]:t}function qs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Bs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Hs(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}const zs=["providersResolver"],Ys=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function Xs(t){let e,n=Ms(t.type);e=vt(t)?n.\u0275cmp:n.\u0275dir;const r=t;for(const i of zs)r[i]=e[i];if(vt(e))for(const i of Ys)r[i]=e[i]}let Ws=null;function Ks(){if(!Ws){const t=q.Symbol;if(t&&t.iterator)Ws=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ws=n)}}}return Ws}class Gs{constructor(t){this.wrapped=t}static wrap(t){return new Gs(t)}static unwrap(t){return Gs.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Gs}}function $s(t){return!!Qs(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ks()in t)}function Qs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Js(t,e,n){return t[e]=n}function Zs(t,e){return t[e]}function ta(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ea(t,e,n,r){const i=ta(t,e,n);return ta(t,e+1,r)||i}function na(t,e,n,r,i){const o=ea(t,e,n,r);return ta(t,e+2,i)||o}function ra(t,e,n,r,i,o){const s=ea(t,e,n,r);return ea(t,e+2,i,o)||s}function ia(t,e,n,r){const i=Wt();return ta(i,ae(),e)&&(Kt(),Zo(Ee(),i,t,e,n,r)),ia}function oa(t,e){let n=!1,r=oe();for(let o=1;o<e.length;o+=2)n=ta(t,r++,e[o])||n;if(se(r),!n)return bo;let i=e[0];for(let o=1;o<e.length;o+=2)i+=y(e[o])+e[o+1];return i}function sa(t,e,n,r){return ta(t,ae(),n)?e+y(n)+r:bo}function aa(t,e,n,r,i,o){const s=ea(t,oe(),n,i);return ue(2),s?e+y(n)+r+y(i)+o:bo}function ua(t,e,n,r,i,o,s,a){const u=na(t,oe(),n,i,s);return ue(3),u?e+y(n)+r+y(i)+o+y(s)+a:bo}function ca(t,e,n,r,i,o,s,a,u,c){const l=ra(t,oe(),n,i,s,u);return ue(4),l?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c:bo}function la(t,e,n,r,i,o,s,a,u,c,l,h){const d=oe();let f=ra(t,d,n,i,s,u);return f=ta(t,d+4,l)||f,ue(5),f?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c+y(l)+h:bo}function ha(t,e,n,r,i,o,s,a,u,c,l,h,d,f){const p=oe();let g=ra(t,p,n,i,s,u);return g=ea(t,p+4,l,d)||g,ue(6),g?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c+y(l)+h+y(d)+f:bo}function da(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g){const m=oe();let v=ra(t,m,n,i,s,u);return v=na(t,m+4,l,d,p)||v,ue(7),v?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c+y(l)+h+y(d)+f+y(p)+g:bo}function fa(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,v){const b=oe();let _=ra(t,b,n,i,s,u);return _=ra(t,b+4,l,d,p,m)||_,ue(8),_?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c+y(l)+h+y(d)+f+y(p)+g+y(m)+v:bo}function pa(t,e,n,r,i,o){const s=Wt(),a=sa(s,e,n,r);return a!==bo&&Zo(Ee(),s,t,a,i,o),pa}function ga(t,e,n,r,i,o,s,a){const u=Wt(),c=aa(u,e,n,r,i,o);return c!==bo&&Zo(Ee(),u,t,c,s,a),ga}function ma(t,e,n,r,i,o,s,a,u,c){const l=Wt(),h=ua(l,e,n,r,i,o,s,a);return h!==bo&&Zo(Ee(),l,t,h,u,c),ma}function ya(t,e,n,r,i,o,s,a,u,c,l,h){const d=Wt(),f=ca(d,e,n,r,i,o,s,a,u,c);return f!==bo&&Zo(Ee(),d,t,f,l,h),ya}function va(t,e,n,r,i,o,s,a,u,c,l,h,d,f){const p=Wt(),g=la(p,e,n,r,i,o,s,a,u,c,l,h);return g!==bo&&Zo(Ee(),p,t,g,d,f),va}function ba(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g){const m=Wt(),y=ha(m,e,n,r,i,o,s,a,u,c,l,h,d,f);return y!==bo&&Zo(Ee(),m,t,y,p,g),ba}function _a(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y){const v=Wt(),b=da(v,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g);return b!==bo&&Zo(Ee(),v,t,b,m,y),_a}function wa(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y,v,b){const _=Wt(),w=fa(_,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y);return w!==bo&&Zo(Ee(),_,t,w,v,b),wa}function Oa(t,e,n,r){const i=Wt(),o=oa(i,e);return o!==bo&&Zo(Ee(),i,t,o,n,r),Oa}function Ca(t,e,n,r,i,o,s,a){const u=Wt(),c=Kt(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Ao(e,t,4,s||null,Vt(c,a));Yo(e,n,l,Vt(c,u)),ke(e,l);const h=l.tViews=qo(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Zt(h,!1);const d=u[11].createComment("");Qi(c,u,d,h),vi(d,u),as(u,u[l]=rs(d,u,d,h)),yt(h)&&Mo(c,u,h),null!=s&&Uo(u,h,a)}function Sa(t){return Dt(Ht.lFrame.contextLView,20+t)}function Ea(t,e=A.Default){const n=Wt();return null===n?Kn(t,e):tn($t(),n,p(t),e)}function Ta(){throw new Error("invalid")}function Ia(t,e,n){const r=Wt();return ta(r,ae(),e)&&zo(Kt(),Ee(),r,t,e,r[11],n,!1),Ia}function xa(t,e,n,r,i){const o=i?"class":"style";ys(t,n,e.inputs[o],o,r)}function ka(t,e,n,r){const i=Wt(),o=Kt(),s=20+t,a=i[11],u=i[s]=Di(a,e,Ht.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Ao(e,t,2,i,Vt(a,o));return Yo(e,n,u,Vt(a,s)),null!==u.attrs&&bs(u,u.attrs,!1),null!==u.mergedAttrs&&bs(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Zt(c,!0);const l=c.mergedAttrs;null!==l&&Le(a,u,l);const h=c.classes;null!==h&&so(a,u,h);const d=c.styles;null!==d&&oo(a,u,d),64!=(64&c.flags)&&Qi(o,i,u,c),0===Ht.lFrame.elementDepthCount&&vi(u,i),Ht.lFrame.elementDepthCount++,yt(c)&&(Mo(o,i,c),Fo(o,c,i)),null!==r&&Uo(i,c)}function Aa(){let t=$t();te()?ee():(t=t.parent,Zt(t,!1));const e=t;Ht.lFrame.elementDepthCount--;const n=Kt();n.firstCreatePass&&(ke(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&xa(n,e,Wt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&xa(n,e,Wt(),e.stylesWithoutHost,!1)}function ja(t,e,n,r){ka(t,e,n,r),Aa()}function Pa(t,e,n){const r=Wt(),i=Kt(),o=t+20,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Vt(o,r),a=Ao(e,t,8,"ng-container",s);return null!==s&&bs(a,s,!0),Yo(e,n,a,Vt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Zt(s,!0);const a=r[o]=r[11].createComment("");Qi(i,r,a,s),vi(a,r),yt(s)&&(Mo(i,r,s),Fo(i,s,r)),null!=n&&Uo(r,s)}function Ra(){let t=$t();const e=Kt();te()?ee():(t=t.parent,Zt(t,!1)),e.firstCreatePass&&(ke(e,t),gt(t)&&e.queries.elementEnd(t))}function Na(t,e,n){Pa(t,e,n),Ra()}function Da(){return Wt()}function La(t){return!!t&&"function"==typeof t.then}function Fa(t){return!!t&&"function"==typeof t.subscribe}const Ma=Fa;function Ua(t,e,n=!1,r){const i=Wt(),o=Kt(),s=$t();return qa(o,i,i[11],s,t,e,n,r),Ua}function Va(t,e,n=!1,r){const i=$t(),o=Wt(),s=Kt();return qa(s,o,gs(de(s.data),i,o),i,t,e,n,r),Va}function qa(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&ps(t),l=fs(e);let h=!0;if(3&r.type){const d=Rt(r,e),f=a?a(d):B,p=f.target||d,g=l.length,m=a?t=>a(jt(t[r.index])).target:r.index;if(kt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Ha(r,e,0,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Ha(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=Ha(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}function Ba(t,e,n,r){try{return!1!==n(r)}catch(i){return ms(t,i),!1}}function Ha(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Lt(t.index,e):e;0==(32&e[2])&&us(s);let a=Ba(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Ba(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function za(t=1){return function(t){return(Ht.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ht.lFrame.contextLView))[8]}(t)}function Ya(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?go(t,o,!0):mo(r,o))return i}else n=i}return n}function Xa(t){const e=Wt()[16][6];if(!e.projection){const n=e.projection=jn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Ya(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Wa(t,e=0,n){const r=Wt(),i=Kt(),o=Ao(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),ee(),64!=(64&o.flags)&&function(t,e,n){io(e[11],0,e,n,Vi(t,n,e),Xi(n.parent||e[6],n,e))}(i,r,o)}function Ka(t,e,n){return Ga(t,"",e,"",n),Ka}function Ga(t,e,n,r,i){const o=Wt(),s=sa(o,e,n,r);return s!==bo&&zo(Kt(),Ee(),o,t,s,o[11],i,!1),Ga}function $a(t,e,n,r,i,o,s){const a=Wt(),u=aa(a,e,n,r,i,o);return u!==bo&&zo(Kt(),Ee(),a,t,u,a[11],s,!1),$a}function Qa(t,e,n,r,i,o,s,a,u){const c=Wt(),l=ua(c,e,n,r,i,o,s,a);return l!==bo&&zo(Kt(),Ee(),c,t,l,c[11],u,!1),Qa}function Ja(t,e,n,r,i,o,s,a,u,c,l){const h=Wt(),d=ca(h,e,n,r,i,o,s,a,u,c);return d!==bo&&zo(Kt(),Ee(),h,t,d,h[11],l,!1),Ja}function Za(t,e,n,r,i,o,s,a,u,c,l,h,d){const f=Wt(),p=la(f,e,n,r,i,o,s,a,u,c,l,h);return p!==bo&&zo(Kt(),Ee(),f,t,p,f[11],d,!1),Za}function tu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){const g=Wt(),m=ha(g,e,n,r,i,o,s,a,u,c,l,h,d,f);return m!==bo&&zo(Kt(),Ee(),g,t,m,g[11],p,!1),tu}function eu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){const y=Wt(),v=da(y,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g);return v!==bo&&zo(Kt(),Ee(),y,t,v,y[11],m,!1),eu}function nu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y,v){const b=Wt(),_=fa(b,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y);return _!==bo&&zo(Kt(),Ee(),b,t,_,b[11],v,!1),nu}function ru(t,e,n){const r=Wt(),i=oa(r,e);return i!==bo&&zo(Kt(),Ee(),r,t,i,r[11],n,!1),ru}function iu(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Co(o):Eo(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];ou(t[a],e)&&(u=!0,t[a+1]=r?Io(n):So(n)),a=r?Co(n):Eo(n)}u&&(t[n+1]=r?So(o):Io(o))}function ou(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Nn(t,e)>=0}const su={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function au(t){return t.substring(su.key,su.keyEnd)}function uu(t){return t.substring(su.value,su.valueEnd)}function cu(t,e){const n=su.textEnd;return n===e?-1:(e=su.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,su.key=e,n),du(t,e,n))}function lu(t,e){const n=su.textEnd;let r=su.key=du(t,e,n);return n===r?-1:(r=su.keyEnd=function(t,e,n){let r;for(;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=fu(t,r,n),r=su.value=du(t,r,n),r=su.valueEnd=function(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){const u=t.charCodeAt(s++);if(59===u)return a;34===u||39===u?a=s=pu(t,u,s,n):e===s-4&&85===o&&82===i&&76===r&&40===u?a=s=pu(t,41,s,n):u>32&&(a=s),o=i,i=r,r=-33&u}return a}(t,r,n),fu(t,r,n))}function hu(t){su.key=0,su.keyEnd=0,su.value=0,su.valueEnd=0,su.textEnd=t.length}function du(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function fu(t,e,n,r){return(e=du(t,e,n))<n&&e++,e}function pu(t,e,n,r){let i=-1,o=n;for(;o<r;){const n=t.charCodeAt(o++);if(n==e&&92!==i)return o;i=92==n&&92===i?0:n}throw new Error}function gu(t,e,n){return wu(t,e,n,!1),gu}function mu(t,e){return wu(t,e,null,!0),mu}function yu(t){Ou(Iu,vu,t,!1)}function vu(t,e){for(let n=function(t){return hu(t),lu(t,du(t,0,su.textEnd))}(e);n>=0;n=lu(e,n))Iu(t,au(e),uu(e))}function bu(t){Ou(Pn,_u,t,!0)}function _u(t,e){for(let n=function(t){return hu(t),cu(t,du(t,0,su.textEnd))}(e);n>=0;n=cu(e,n))Pn(t,au(e),!0)}function wu(t,e,n,r){const i=Wt(),o=Kt(),s=ue(2);o.firstUpdatePass&&Su(o,t,s,r),e!==bo&&ta(i,s,e)&&xu(o,o.data[Ce()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Cr(t)))),t}(e,n),r,s)}function Ou(t,e,n,r){const i=Kt(),o=ue(2);i.firstUpdatePass&&Su(i,null,o,r);const s=Wt();if(n!==bo&&ta(s,o,n)){const a=i.data[Ce()];if(ju(a,r)&&!Cu(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),xa(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===bo&&(i=H);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&xu(t,e,n,r,g,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return H;const r=[],i=Cr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Cu(t,e){return e>=t.expandoStartIndex}function Su(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Ce()],s=Cu(t,n);ju(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=de(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Tu(n=Eu(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Eu(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Eo(r))return t[Co(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Eu(null,t,e,n[1],r),n=Tu(n,e.attrs,r),function(t,e,n,r){t[Co(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Tu(r,t[o].hostAttrs,n);return Tu(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Co(s),u=Eo(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||Nn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Co(t[a+1]);t[r+1]=Oo(e,a),0!==e&&(t[e+1]=To(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Oo(a,0),0!==a&&(t[a+1]=To(t[a+1],r)),a=r;else t[r+1]=Oo(u,0),0===a?a=r:t[u+1]=To(t[u+1],r),u=r;l&&(t[r+1]=So(t[r+1])),iu(t,c,r,!0),iu(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Nn(o,e)>=0&&(n[r+1]=Io(n[r+1]))}(e,c,t,r,o),s=Oo(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Eu(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Tu(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Tu(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Pn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Iu(t,e,n){Pn(t,e,Cr(n))}function xu(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Au(1==(1&c)?ku(u,e,n,i,Eo(c),s):void 0)||(Au(o)||2==(2&c)&&(o=ku(u,null,n,i,a,s)),function(t,e,n,r,i){const o=kt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Si.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Si.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Pt(Ce(),n),i,o))}function ku(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===bo&&(l=c?H:void 0);let h=c?Rn(l,r):u===r?l:void 0;if(o&&!Au(h)&&(h=Rn(e,r)),Au(h)&&(a=h,s))return a;const d=t[i+1];i=s?Co(d):Eo(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=Rn(t,r))}return a}function Au(t){return void 0!==t}function ju(t,e){return 0!=(t.flags&(e?16:32))}function Pu(t,e=""){const n=Wt(),r=Kt(),i=t+20,o=r.firstCreatePass?Ao(r,i,1,e,null):r.data[i],s=n[i]=Pi(n[11],e);Qi(r,n,s,o),Zt(o,!1)}function Ru(t){return Nu("",t,""),Ru}function Nu(t,e,n){const r=Wt(),i=sa(r,t,e,n);return i!==bo&&vs(r,Ce(),i),Nu}function Du(t,e,n,r,i){const o=Wt(),s=aa(o,t,e,n,r,i);return s!==bo&&vs(o,Ce(),s),Du}function Lu(t,e,n,r,i,o,s){const a=Wt(),u=ua(a,t,e,n,r,i,o,s);return u!==bo&&vs(a,Ce(),u),Lu}function Fu(t,e,n,r,i,o,s,a,u){const c=Wt(),l=ca(c,t,e,n,r,i,o,s,a,u);return l!==bo&&vs(c,Ce(),l),Fu}function Mu(t,e,n,r,i,o,s,a,u,c,l){const h=Wt(),d=la(h,t,e,n,r,i,o,s,a,u,c,l);return d!==bo&&vs(h,Ce(),d),Mu}function Uu(t,e,n,r,i,o,s,a,u,c,l,h,d){const f=Wt(),p=ha(f,t,e,n,r,i,o,s,a,u,c,l,h,d);return p!==bo&&vs(f,Ce(),p),Uu}function Vu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){const g=Wt(),m=da(g,t,e,n,r,i,o,s,a,u,c,l,h,d,f,p);return m!==bo&&vs(g,Ce(),m),Vu}function qu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){const y=Wt(),v=fa(y,t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m);return v!==bo&&vs(y,Ce(),v),qu}function Bu(t){const e=Wt(),n=oa(e,t);return n!==bo&&vs(e,Ce(),n),Bu}function Hu(t,e,n){Ou(Pn,_u,sa(Wt(),t,e,n),!0)}function zu(t,e,n,r,i){Ou(Pn,_u,aa(Wt(),t,e,n,r,i),!0)}function Yu(t,e,n,r,i,o,s){Ou(Pn,_u,ua(Wt(),t,e,n,r,i,o,s),!0)}function Xu(t,e,n,r,i,o,s,a,u){Ou(Pn,_u,ca(Wt(),t,e,n,r,i,o,s,a,u),!0)}function Wu(t,e,n,r,i,o,s,a,u,c,l){Ou(Pn,_u,la(Wt(),t,e,n,r,i,o,s,a,u,c,l),!0)}function Ku(t,e,n,r,i,o,s,a,u,c,l,h,d){Ou(Pn,_u,ha(Wt(),t,e,n,r,i,o,s,a,u,c,l,h,d),!0)}function Gu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){Ou(Pn,_u,da(Wt(),t,e,n,r,i,o,s,a,u,c,l,h,d,f,p),!0)}function $u(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){Ou(Pn,_u,fa(Wt(),t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m),!0)}function Qu(t){Ou(Pn,_u,oa(Wt(),t),!0)}function Ju(t,e,n){yu(sa(Wt(),t,e,n))}function Zu(t,e,n,r,i){yu(aa(Wt(),t,e,n,r,i))}function tc(t,e,n,r,i,o,s){yu(ua(Wt(),t,e,n,r,i,o,s))}function ec(t,e,n,r,i,o,s,a,u){yu(ca(Wt(),t,e,n,r,i,o,s,a,u))}function nc(t,e,n,r,i,o,s,a,u,c,l){yu(la(Wt(),t,e,n,r,i,o,s,a,u,c,l))}function rc(t,e,n,r,i,o,s,a,u,c,l,h,d){yu(ha(Wt(),t,e,n,r,i,o,s,a,u,c,l,h,d))}function ic(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){yu(da(Wt(),t,e,n,r,i,o,s,a,u,c,l,h,d,f,p))}function oc(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){yu(fa(Wt(),t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m))}function sc(t){yu(oa(Wt(),t))}function ac(t,e,n,r,i){return wu(t,sa(Wt(),e,n,r),i,!1),ac}function uc(t,e,n,r,i,o,s){return wu(t,aa(Wt(),e,n,r,i,o),s,!1),uc}function cc(t,e,n,r,i,o,s,a,u){return wu(t,ua(Wt(),e,n,r,i,o,s,a),u,!1),cc}function lc(t,e,n,r,i,o,s,a,u,c,l){return wu(t,ca(Wt(),e,n,r,i,o,s,a,u,c),l,!1),lc}function hc(t,e,n,r,i,o,s,a,u,c,l,h,d){return wu(t,la(Wt(),e,n,r,i,o,s,a,u,c,l,h),d,!1),hc}function dc(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){return wu(t,ha(Wt(),e,n,r,i,o,s,a,u,c,l,h,d,f),p,!1),dc}function fc(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){return wu(t,da(Wt(),e,n,r,i,o,s,a,u,c,l,h,d,f,p,g),m,!1),fc}function pc(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y,v){return wu(t,fa(Wt(),e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y),v,!1),pc}function gc(t,e,n){return wu(t,oa(Wt(),e),n,!1),gc}function mc(t,e,n){const r=Wt();return ta(r,ae(),e)&&zo(Kt(),Ee(),r,t,e,r[11],n,!0),mc}function yc(t,e,n){const r=Wt();if(ta(r,ae(),e)){const i=Kt(),o=Ee();zo(i,o,r,t,e,gs(de(i.data),o,r),n,!0)}return yc}const vc=void 0;var bc=["en",[["a","p"],["AM","PM"],vc],[["AM","PM"],vc,vc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vc,"{1} 'at' {0}",vc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let _c={};function wc(t,e,n){"string"!=typeof e&&(n=e,e=t[Tc.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),_c[e]=t,n&&(_c[e][Tc.ExtraData]=n)}function Oc(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ec(e);if(n)return n;const r=e.split("-")[0];if(n=Ec(r),n)return n;if("en"===r)return bc;throw new Error(`Missing locale data for the locale "${t}".`)}function Cc(t){return Oc(t)[Tc.CurrencyCode]||null}function Sc(t){return Oc(t)[Tc.PluralCase]}function Ec(t){return t in _c||(_c[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),_c[t]}var Tc=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Ic=["zero","one","two","few","many"],xc={marker:"element"},kc={marker:"ICU"};var Ac=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let jc="en-US";function Pc(t){var e;null==(e=t)&&_("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(jc=t.toLowerCase().replace(/_/g,"-"))}function Rc(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Wi(t,0,n):jt(n[i])}function Nc(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)Bi(t,s,n[o[e]],a,!1)}}function Dc(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];Lc(r)||Fc(r,e)&&null===Mc(r)&&Uc(r,e.index)}}function Lc(t){return!(64&t.type)}function Fc(t,e){return Lc(e)||t.index>e.index}function Mc(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function Uc(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:($i(Rc,Nc),t.insertBeforeIndex=e)}function Vc(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function qc(t,e,n){const r=jo(t,n,64,null,null);return Dc(e,r),r}function Bc(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Hc=0,zc=0;function Yc(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Pi(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===s&&(s=c,o=Yi(i,r)),c===s?(l=r,h=o):(l=null,h=jt(n[c])),null!==h){const e=(131070&u)>>>1;Bi(i,h,n[e],l,!1);const r=Vc(t,e);if(null!==r&&"object"==typeof r){const e=Bc(r,n);null!==e&&Yc(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const d=e[++a],f=e[++a];ts(i,Pt(u>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case kc:const t=e[++a],r=e[++a];null===n[r]&&vi(n[r]=Ni(i,t),n);break;case xc:const o=e[++a],s=e[++a];null===n[s]&&vi(n[s]=Di(i,o,null),n)}}}function Xc(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=y(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],u=n[++s],c=t.data[a];"string"==typeof c?ts(e[11],e[a],null,c,o,i,u):zo(t,c,e,o,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Ri(e[11],l,i);break;case 2:Kc(t,Vc(t,a),e,i);break;case 3:Wc(t,Vc(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=Vc(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Wc(t,n,r,e)}}o+=a}}function Wc(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=Hc;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),Xc(t,r,e.update[i],n,o)}}function Kc(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=Sc(e)(parseInt(t,10)),r=Ic[n];return void 0!==r?r:"other"}(e,jc);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(Bc(e,n)!==i&&(Gc(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Yc(t,e.create[i],n,r)}}function Gc(t,e,n){let r=Bc(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=Pt(r,n);null!==t&&eo(n[11],t)}else Gc(t,Vc(t,~r),n)}}}const $c=/\ufffd(\d+):?\d*\ufffd/gi,Qc=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,Jc=/\ufffd(\d+)\ufffd/,Zc=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,tl=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,el=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,nl=/\uE500/g;function rl(t,e,n,r,i,o,s){const a=Po(t,r,1,null);let u=a<<Ac.SHIFT,c=Jt();e===c&&(c=null),null===c&&(u|=Ac.APPEND_EAGERLY),s&&(u|=Ac.COMMENT,void 0===Ei&&(Ei=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=Bc(t,e);n=null!==i?t.remove[i]:z}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(u,null===o?"":o);const l=jo(t,a,s?32:1,null===o?"":o,null);Dc(n,l);const h=l.index;return Zt(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?($i(Rc,Nc),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&_("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function il(t,e,n,r,i,o,s){const a=s.match($c),u=rl(t,e,n,o,r,a?null:s,!1);a&&ol(i,s,u.index)}function ol(t,e,n,r,i=null){const o=t.length,s=o+1;t.push(null,null);const a=o+2,u=e.split($c);let c=0;for(let l=0;l<u.length;l++){const e=u[l];if(1&l){const n=parseInt(e,10);t.push(-1-n),c|=sl(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,i),t[o]=c,t[s]=t.length-a,c}function sl(t){return 1<<Math.min(t,31)}function al(t){let e,n,r="",i=0,o=!1;for(;null!==(e=tl.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function ul(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:Po(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(sl(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const u=i.values;for(let c=0;c<u.length;c++){const o=u[c],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=hl(t,a,e,n,r,i.cases[c],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function cl(t){const e=[],n=[];let r=1,i=0;const o=ll(t=t.replace(Zc,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=ll(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function ll(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);Zc.test(n)?r.push(cl(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function hl(t,e,n,r,i,o,s,a){const u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);const h=jr(xt()).getInertBodyElement(s),d=ei(h)||h;return d?dl(t,e,n,r,u,c,l,d,i,a,0):0}function dl(t,e,n,r,i,o,s,a,u,c,l){let h=0,d=a.firstChild;for(;d;){const a=Po(t,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(zr.hasOwnProperty(p)){gl(i,xc,p,u,a),t.data[a]=p;const g=f.attributes;for(let t=0;t<g.length;t++){const e=g.item(t),n=e.name.toLowerCase();e.value.match($c)?Wr.hasOwnProperty(n)&&(Yr[n]?ol(s,e.value,a,e.name,Lr):Xr[n]?ol(s,e.value,a,e.name,Fr):ol(s,e.value,a,e.name)):ml(i,a,e)}h=dl(t,e,n,r,i,o,s,d,a,c,l+1)|h,fl(o,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",m=g.match($c);gl(i,null,m?"":g,u,a),fl(o,a,l),m&&(h=ol(s,g,a)|h);break;case Node.COMMENT_NODE:const y=Jc.exec(d.textContent||"");if(y){const e=c[parseInt(y[1],10)];gl(i,kc,"",u,a),ul(t,n,r,u,e,a),pl(o,a,l)}}d=d.nextSibling}return h}function fl(t,e,n){0===n&&t.push(e)}function pl(t,e,n){0===n&&(t.push(~e),t.push(e))}function gl(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function ml(t,e,n){t.push(e<<1|1,n.name,n.value)}const yl=/\[(\ufffd.+?\ufffd?)\]/,vl=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,bl=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,_l=/{([A-Z0-9_]+)}/g,wl=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,Ol=/\/\*/,Cl=/\d+\:(\d+)/;function Sl(t,e,n=-1){const r=Kt(),i=Wt(),o=20+t,s=Vt(r.consts,e),a=Jt();r.firstCreatePass&&function(t,e,n,r,i,o){const s=Jt(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return al(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return al(t.substring(n,r))}}(i,o),h.replace(nl," ")).split(el);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const o=ll(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&il(t,s,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);ul(t,n,u,e,r,rl(t,s,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),20+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),Zt(Jt(),!1);else{const e=qc(t,c[0],n);c.unshift([]),Zt(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,o,s,n);const u=r.data[o],c=qi(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],u=(s&Ac.COMMENT)===Ac.COMMENT,c=(s&Ac.APPEND_EAGERLY)===Ac.APPEND_EAGERLY,l=s>>>Ac.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Pi(i,a)),c&&null!==n&&Bi(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),ce(!0)}function El(){ce(!1)}function Tl(t,e,n){Sl(t,e,n),El()}function Il(t,e){const n=Kt();!function(t,e,n){const r=$t().index,i=[];if(t.firstCreatePass&&null===t.data[e]){for(let t=0;t<n.length;t+=2){const e=n[t],o=n[t+1];if(""!==o){if(Qc.test(o))throw new Error(`ICU expressions are not supported in attributes. Message: "${o}".`);ol(i,o,r,e)}}t.data[e]=i}}(n,t+20,Vt(n.consts,e))}function xl(t){return ta(Wt(),ae(),t)&&(Hc|=1<<Math.min(zc,31)),zc++,xl}function kl(t){!function(t,e,n){if(zc>0){const r=t.data[n];Xc(t,e,Array.isArray(r)?r:r.update,oe()-zc-1,Hc)}Hc=0,zc=0}(Kt(),Wt(),t+20)}function Al(t,e={}){return function(t,e={}){let n=t;if(yl.test(t)){const t={},e=[0];n=n.replace(vl,(n,r,i)=>{const o=r||i,s=t[o]||[];if(s.length||(o.split("|").forEach(t=>{const e=t.match(Cl),n=e?parseInt(e[1],10):0,r=Ol.test(t);s.push([n,r,t])}),t[o]=s),!s.length)throw new Error(`i18n postprocess: unmatched placeholder - ${o}`);const a=e[e.length-1];let u=0;for(let t=0;t<s.length;t++)if(s[t][0]===a){u=t;break}const[c,l,h]=s[u];return l?e.pop():a!==c&&e.push(c),s.splice(u,1),h})}return Object.keys(e).length?(n=n.replace(bl,(t,n,r,i,o,s)=>e.hasOwnProperty(r)?`${n}${e[r]}${s}`:t),n=n.replace(_l,(t,n)=>e.hasOwnProperty(n)?e[n]:t),n=n.replace(wl,(t,n)=>{if(e.hasOwnProperty(n)){const r=e[n];if(!r.length)throw new Error(`i18n postprocess: unmatched ICU - ${t} with key: ${n}`);return r.shift()}return t}),n):n}(t,e)}function jl(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)jl(t[o],e,n,r,i);else{const o=Kt(),s=Wt();let a=Ns(t)?t:p(t.provide),u=js(t);const c=$t(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Ns(t)||!t.multi){const r=new De(u,i,Ea),f=Nl(a,e,i?l:l+d,h);-1===f?(Qe(We(c,s),o,a),Pl(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Nl(a,e,l+d,h),p=Nl(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Qe(We(c,s),o,a);const l=function(t,e,n,r,i){const o=new De(t,n,Ea);return o.multi=[],o.index=e,o.componentProviders=0,Rl(o,i,r&&!n),o}(i?Ll:Dl,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Pl(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Pl(o,t,f>-1?f:p,Rl(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Pl(t,e,n,r){const i=Ns(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Rl(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Nl(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Dl(t,e,n,r){return Fl(this.multi,[])}function Ll(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=sn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Fl(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Fl(i,o);return o}function Fl(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ml(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Kt();if(r.firstCreatePass){const i=vt(t);jl(n,r.data,r.blueprint,i,!0),jl(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Ul{}class Vl{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ql=(()=>{class t{}return t.NULL=new Vl,t})();function Bl(...t){}function Hl(t,e){return new Yl(Rt(t,e))}const zl=function(){return Hl($t(),Wt())};let Yl=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=zl,t})();function Xl(t){return t instanceof Yl?t.nativeElement:t}class Wl{}let Kl=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Gl(),t})();const Gl=function(){const t=Wt(),e=Lt($t().index,t);return function(t){return t[11]}(ft(e)?e:t)};let $l=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class Ql{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Jl=new Ql("11.2.10");class Zl{constructor(){}supports(t){return $s(t)}create(t){return new eh(t)}}const th=(t,e)=>e;class eh{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||th}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<oh(n,r,i)?e:n,s=oh(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!$s(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ks()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new nh(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ih),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ih),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class nh{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rh{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ih{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new rh,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oh(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class sh{constructor(){}supports(t){return t instanceof Map||Qs(t)}create(){return new ah}}class ah{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Qs(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new uh(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class uh{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ch(){return new lh([new Zl])}let lh=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ch()),deps:[[t,new er,new Zn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:ch}),t})();function hh(){return new dh([new sh])}let dh=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||hh()),deps:[[t,new er,new Zn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:hh}),t})();function fh(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(jt(o)),pt(o))for(let t=10;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&fh(e[1],e,n,r)}const s=n.type;if(8&s)fh(t,e,n.child,r);else if(32&s){const t=Ti(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Zi(e,n);if(Array.isArray(t))r.push(...t);else{const n=Ii(e[16]);fh(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ph{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return fh(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Fi(t,n),An(e,n))}this._attachedToViewContainer=!1}Mi(this._lView[1],this._lView)}onDestroy(t){Bo(this._lView[1],this._lView,null,t)}markForCheck(){us(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cs(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){re(!0);try{cs(t,e,n)}finally{re(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ro(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class gh extends ph{constructor(t){super(t),this._view=t}detectChanges(){ls(this._view)}checkNoChanges(){!function(t){re(!0);try{ls(t)}finally{re(!1)}}(this._view)}get context(){return null}}const mh=vh;let yh=(()=>{class t{}return t.__NG_ELEMENT_ID__=mh,t.__ChangeDetectorRef__=!0,t})();function vh(t=!1){return function(t,e,n){if(!n&&mt(t)){const n=Lt(t.index,e);return new ph(n,n)}return 47&t.type?new ph(e[16],e):null}($t(),Wt(),t)}const bh=[new sh],_h=new lh([new Zl]),wh=new dh(bh),Oh=function(){return Th($t(),Wt())};let Ch=(()=>{class t{}return t.__NG_ELEMENT_ID__=Oh,t})();const Sh=Ch,Eh=class extends Sh{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ko(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ro(e,n,t),new ph(n)}};function Th(t,e){return 4&t.type?new Eh(e,t,Hl(t,e)):null}class Ih{}class xh{}const kh=function(){return Dh($t(),Wt())};let Ah=(()=>{class t{}return t.__NG_ELEMENT_ID__=kh,t})();const jh=Ah,Ph=class extends jh{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Hl(this._hostTNode,this._hostLView)}get injector(){return new cn(this._hostTNode,this._hostLView)}get parentInjector(){const t=$e(this._hostTNode,this._hostLView);if(qe(t)){const e=He(t,this._hostLView),n=Be(t);return new cn(e[1].data[n+8],e)}return new cn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Rh(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ih,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ph(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],kn(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=to(i,o),a=n[11],u=Yi(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,ro(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),kn(Nh(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Rh(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Fi(this._lContainer,e);n&&(An(Nh(this._lContainer),e),Mi(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Fi(this._lContainer,e);return n&&null!=An(Nh(this._lContainer),e)?new ph(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Rh(t){return t[8]}function Nh(t){return t[8]||(t[8]=[])}function Dh(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=jt(r);else{const n=e[11];i=n.createComment("");const r=Rt(t,e);Bi(n,Yi(n,r),i,function(t,e){return kt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=rs(r,e,i,t),as(e,n)}return new Ph(n,t,e)}const Lh={};class Fh extends ql{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new Vh(e,this.ngModule)}}function Mh(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Uh=new wn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>bi});class Vh extends Ul{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(vo).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Mh(this.componentDef.inputs)}get outputs(){return Mh(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Lh,i);return o!==Lh||r===Lh?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Wl,At),s=i.get($l,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(kt(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Di(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:bi,clean:ds,playerHandler:null,flags:0},d=qo(0,null,null,1,0,null,null,null,null,null),f=ko(null,d,h,l,null,null,o,a,s,i);let p,g;ye(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ao(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(bs(a,u,!0),null!==t&&(Le(i,t,u),null!==a.classes&&so(i,t,a.classes),null!==a.styles&&oo(i,t,a.styles)));const c=r.createRenderer(t,e),l=ko(n,Vo(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Qe(We(a,n),s,e.type),Ko(s,a),$o(a,n.length,1)),as(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Le(a,c,["ng-version",Jl.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!fo(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Le(a,c,t),e&&e.length>0&&so(a,c,e.join(" "))}if(g=Nt(d,20),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=$t();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Qo(t,r,e,Po(t,e,1,null),n));const i=sn(e,t,r.directiveStart,r);vi(i,e);const o=Rt(r,e);return o&&vi(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=$t();e.contentQueries(1,s,t.directiveStart)}const a=$t();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Se(a.index),Xo(n[1],a,0,a.directiveStart,a.directiveEnd,e),Wo(e,s)),s}(t,this.componentDef,f,h,[Fs]),Ro(d,f,null)}finally{Oe()}return new qh(this.componentType,p,Hl(g,f),f,g)}}class qh extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new gh(r),this.componentType=t}get injector(){return new cn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Bh(t,e,n,r){return N(()=>{const i=t;null!==e&&(i.hasOwnProperty("decorators")&&void 0!==i.decorators?i.decorators.push(...e):i.decorators=e),null!==n&&(i.ctorParameters=n),null!==r&&(i.propDecorators=i.hasOwnProperty("propDecorators")&&void 0!==i.propDecorators?Object.assign(Object.assign({},i.propDecorators),r):r)})}const Hh=new Map;class zh extends Ih{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Fh(this);const n=dt(t),r=t[G]||null;r&&Pc(r),this._bootstrapComponents=Ci(n.bootstrap),this._r3Injector=xs(t,e,[{provide:Ih,useValue:this},{provide:ql,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ls.THROW_IF_NOT_FOUND,n=A.Default){return t===Ls||t===Ih||t===_s?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Yh extends xh{constructor(t){super(),this.moduleType=t,null!==dt(t)&&function(t){const e=new Set;!function t(n){const r=dt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Hh.get(i),n),Hh.set(i,n));const o=Ci(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new zh(this.moduleType,t)}}function Xh(t,e,n){const r=ie()+t,i=Wt();return i[r]===bo?Js(i,r,n?e.call(n):e()):Zs(i,r)}function Wh(t,e,n,r){return rd(Wt(),ie(),t,e,n,r)}function Kh(t,e,n,r,i){return id(Wt(),ie(),t,e,n,r,i)}function Gh(t,e,n,r,i,o){return od(Wt(),ie(),t,e,n,r,i,o)}function $h(t,e,n,r,i,o,s){return sd(Wt(),ie(),t,e,n,r,i,o,s)}function Qh(t,e,n,r,i,o,s,a){const u=ie()+t,c=Wt(),l=ra(c,u,n,r,i,o);return ta(c,u+4,s)||l?Js(c,u+5,a?e.call(a,n,r,i,o,s):e(n,r,i,o,s)):Zs(c,u+5)}function Jh(t,e,n,r,i,o,s,a,u){const c=ie()+t,l=Wt(),h=ra(l,c,n,r,i,o);return ea(l,c+4,s,a)||h?Js(l,c+6,u?e.call(u,n,r,i,o,s,a):e(n,r,i,o,s,a)):Zs(l,c+6)}function Zh(t,e,n,r,i,o,s,a,u,c){const l=ie()+t,h=Wt();let d=ra(h,l,n,r,i,o);return na(h,l+4,s,a,u)||d?Js(h,l+7,c?e.call(c,n,r,i,o,s,a,u):e(n,r,i,o,s,a,u)):Zs(h,l+7)}function td(t,e,n,r,i,o,s,a,u,c,l){const h=ie()+t,d=Wt(),f=ra(d,h,n,r,i,o);return ra(d,h+4,s,a,u,c)||f?Js(d,h+8,l?e.call(l,n,r,i,o,s,a,u,c):e(n,r,i,o,s,a,u,c)):Zs(d,h+8)}function ed(t,e,n,r){return ad(Wt(),ie(),t,e,n,r)}function nd(t,e){const n=t[e];return n===bo?void 0:n}function rd(t,e,n,r,i,o){const s=e+n;return ta(t,s,i)?Js(t,s+1,o?r.call(o,i):r(i)):nd(t,s+1)}function id(t,e,n,r,i,o,s){const a=e+n;return ea(t,a,i,o)?Js(t,a+2,s?r.call(s,i,o):r(i,o)):nd(t,a+2)}function od(t,e,n,r,i,o,s,a){const u=e+n;return na(t,u,i,o,s)?Js(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):nd(t,u+3)}function sd(t,e,n,r,i,o,s,a,u){const c=e+n;return ra(t,c,i,o,s,a)?Js(t,c+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):nd(t,c+4)}function ad(t,e,n,r,i,o){let s=e+n,a=!1;for(let u=0;u<i.length;u++)ta(t,s++,i[u])&&(a=!0);return a?Js(t,s,r.apply(o,i)):nd(t,s)}function ud(t,e){const n=Kt();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=bt(r.type)),s=P(Ea);try{const t=Ye(!1),e=o();return Ye(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Wt(),i,e),e}finally{P(s)}}function cd(t,e,n){const r=t+20,i=Wt(),o=Dt(i,r);return gd(i,pd(i,r)?rd(i,ie(),e,o.transform,n,o):o.transform(n))}function ld(t,e,n,r){const i=t+20,o=Wt(),s=Dt(o,i);return gd(o,pd(o,i)?id(o,ie(),e,s.transform,n,r,s):s.transform(n,r))}function hd(t,e,n,r,i){const o=t+20,s=Wt(),a=Dt(s,o);return gd(s,pd(s,o)?od(s,ie(),e,a.transform,n,r,i,a):a.transform(n,r,i))}function dd(t,e,n,r,i,o){const s=t+20,a=Wt(),u=Dt(a,s);return gd(a,pd(a,s)?sd(a,ie(),e,u.transform,n,r,i,o,u):u.transform(n,r,i,o))}function fd(t,e,n){const r=t+20,i=Wt(),o=Dt(i,r);return gd(i,pd(i,r)?ad(i,ie(),e,o.transform,n,o):o.transform.apply(o,n))}function pd(t,e){return t[1].data[e].pure}function gd(t,e){return Gs.isWrapped(e)&&(e=Gs.unwrap(e),t[oe()]=bo),e}function md(t){return e=>{setTimeout(t,void 0,e)}}const yd=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=md(u),a&&(a=md(a)),c&&(c=md(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function vd(){return this._results[Ks()]()}class bd{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ks(),n=bd.prototype;n[e]||(n[e]=vd)}get changes(){return this._changes||(this._changes=new yd)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const n=In(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class _d{constructor(t){this.queryList=t,this.matches=null}clone(){return new _d(this.queryList)}setDirty(){this.queryList.setDirty()}}class wd{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new wd(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Dd(t,e).matches&&this.queries[e].setDirty()}}class Od{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Cd{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Cd(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Sd{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Sd(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ed(e,i)),this.matchTNodeWithReadOption(t,e,on(e,t,i,!1,!1))}else n===Ch?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,on(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Yl||r===Ah||r===Ch&&4&e.type)this.addMatch(e.index,-2);else{const n=on(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ed(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Td(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Hl(t,e):4&t.type?Th(t,e):null}(e,t):-2===n?function(t,e,n){return n===Yl?Hl(e,t):n===Ch?Th(e,t):n===Ah?Dh(e,t):void 0}(t,e,r):sn(t,t[1],n,e)}function Id(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Td(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function xd(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Id(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=10;t<s.length;t++){const e=s[t];e[17]===e[3]&&xd(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];xd(n[1],n,i,r)}}}}}return r}function kd(t){const e=Wt(),n=Kt(),r=fe();pe(r+1);const i=Dd(n,r);if(t.dirty&&Mt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?xd(n,e,r,[]):Id(n,e,i,r);t.reset(o,Xl),t.notifyOnChanges()}return!0}return!1}function Ad(t,e,n){const r=Kt();r.firstCreatePass&&(Nd(r,new Od(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Rd(r,Wt(),e)}function jd(t,e,n,r){const i=Kt();if(i.firstCreatePass){const o=$t();Nd(i,new Od(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Rd(i,Wt(),n)}function Pd(){return t=Wt(),e=fe(),t[19].queries[e].queryList;var t,e}function Rd(t,e,n){const r=new bd(4==(4&n));Bo(t,e,r,r.destroy),null===e[19]&&(e[19]=new wd),e[19].queries.push(new _d(r))}function Nd(t,e,n){null===t.queries&&(t.queries=new Cd),t.queries.track(new Sd(e,n))}function Dd(t,e){return t.queries.getByIndex(e)}function Ld(t,e){return Th(t,e)}function Fd(t=A.Default){const e=vh(!0);if(null!=e||t&A.Optional)return e;b("ChangeDetectorRef")}const Md=(()=>({"\u0275\u0275attribute":ia,"\u0275\u0275attributeInterpolate1":pa,"\u0275\u0275attributeInterpolate2":ga,"\u0275\u0275attributeInterpolate3":ma,"\u0275\u0275attributeInterpolate4":ya,"\u0275\u0275attributeInterpolate5":va,"\u0275\u0275attributeInterpolate6":ba,"\u0275\u0275attributeInterpolate7":_a,"\u0275\u0275attributeInterpolate8":wa,"\u0275\u0275attributeInterpolateV":Oa,"\u0275\u0275defineComponent":Z,"\u0275\u0275defineDirective":at,"\u0275\u0275defineInjectable":w,"\u0275\u0275defineInjector":O,"\u0275\u0275defineNgModule":it,"\u0275\u0275definePipe":ut,"\u0275\u0275directiveInject":Ea,"\u0275\u0275getInheritedFactory":ln,"\u0275\u0275inject":Kn,"\u0275\u0275injectAttribute":dn,"\u0275\u0275invalidFactory":Ta,"\u0275\u0275invalidFactoryDep":Gn,"\u0275\u0275injectPipeChangeDetectorRef":Fd,"\u0275\u0275templateRefExtractor":Ld,"\u0275\u0275NgOnChangesFeature":wt,"\u0275\u0275ProvidersFeature":Ml,"\u0275\u0275CopyDefinitionFeature":Xs,"\u0275\u0275InheritDefinitionFeature":Us,"\u0275\u0275nextContext":za,"\u0275\u0275namespaceHTML":xe,"\u0275\u0275namespaceMathML":Ie,"\u0275\u0275namespaceSVG":Te,"\u0275\u0275enableBindings":Yt,"\u0275\u0275disableBindings":Xt,"\u0275\u0275elementStart":ka,"\u0275\u0275elementEnd":Aa,"\u0275\u0275element":ja,"\u0275\u0275elementContainerStart":Pa,"\u0275\u0275elementContainerEnd":Ra,"\u0275\u0275elementContainer":Na,"\u0275\u0275pureFunction0":Xh,"\u0275\u0275pureFunction1":Wh,"\u0275\u0275pureFunction2":Kh,"\u0275\u0275pureFunction3":Gh,"\u0275\u0275pureFunction4":$h,"\u0275\u0275pureFunction5":Qh,"\u0275\u0275pureFunction6":Jh,"\u0275\u0275pureFunction7":Zh,"\u0275\u0275pureFunction8":td,"\u0275\u0275pureFunctionV":ed,"\u0275\u0275getCurrentView":Da,"\u0275\u0275restoreView":Gt,"\u0275\u0275listener":Ua,"\u0275\u0275projection":Wa,"\u0275\u0275syntheticHostProperty":yc,"\u0275\u0275syntheticHostListener":Va,"\u0275\u0275pipeBind1":cd,"\u0275\u0275pipeBind2":ld,"\u0275\u0275pipeBind3":hd,"\u0275\u0275pipeBind4":dd,"\u0275\u0275pipeBindV":fd,"\u0275\u0275projectionDef":Xa,"\u0275\u0275hostProperty":mc,"\u0275\u0275property":Ia,"\u0275\u0275propertyInterpolate":Ka,"\u0275\u0275propertyInterpolate1":Ga,"\u0275\u0275propertyInterpolate2":$a,"\u0275\u0275propertyInterpolate3":Qa,"\u0275\u0275propertyInterpolate4":Ja,"\u0275\u0275propertyInterpolate5":Za,"\u0275\u0275propertyInterpolate6":tu,"\u0275\u0275propertyInterpolate7":eu,"\u0275\u0275propertyInterpolate8":nu,"\u0275\u0275propertyInterpolateV":ru,"\u0275\u0275pipe":ud,"\u0275\u0275queryRefresh":kd,"\u0275\u0275viewQuery":Ad,"\u0275\u0275loadQuery":Pd,"\u0275\u0275contentQuery":jd,"\u0275\u0275reference":Sa,"\u0275\u0275classMap":bu,"\u0275\u0275classMapInterpolate1":Hu,"\u0275\u0275classMapInterpolate2":zu,"\u0275\u0275classMapInterpolate3":Yu,"\u0275\u0275classMapInterpolate4":Xu,"\u0275\u0275classMapInterpolate5":Wu,"\u0275\u0275classMapInterpolate6":Ku,"\u0275\u0275classMapInterpolate7":Gu,"\u0275\u0275classMapInterpolate8":$u,"\u0275\u0275classMapInterpolateV":Qu,"\u0275\u0275styleMap":yu,"\u0275\u0275styleMapInterpolate1":Ju,"\u0275\u0275styleMapInterpolate2":Zu,"\u0275\u0275styleMapInterpolate3":tc,"\u0275\u0275styleMapInterpolate4":ec,"\u0275\u0275styleMapInterpolate5":nc,"\u0275\u0275styleMapInterpolate6":rc,"\u0275\u0275styleMapInterpolate7":ic,"\u0275\u0275styleMapInterpolate8":oc,"\u0275\u0275styleMapInterpolateV":sc,"\u0275\u0275styleProp":gu,"\u0275\u0275stylePropInterpolate1":ac,"\u0275\u0275stylePropInterpolate2":uc,"\u0275\u0275stylePropInterpolate3":cc,"\u0275\u0275stylePropInterpolate4":lc,"\u0275\u0275stylePropInterpolate5":hc,"\u0275\u0275stylePropInterpolate6":dc,"\u0275\u0275stylePropInterpolate7":fc,"\u0275\u0275stylePropInterpolate8":pc,"\u0275\u0275stylePropInterpolateV":gc,"\u0275\u0275classProp":mu,"\u0275\u0275advance":_o,"\u0275\u0275template":Ca,"\u0275\u0275text":Pu,"\u0275\u0275textInterpolate":Ru,"\u0275\u0275textInterpolate1":Nu,"\u0275\u0275textInterpolate2":Du,"\u0275\u0275textInterpolate3":Lu,"\u0275\u0275textInterpolate4":Fu,"\u0275\u0275textInterpolate5":Mu,"\u0275\u0275textInterpolate6":Uu,"\u0275\u0275textInterpolate7":Vu,"\u0275\u0275textInterpolate8":qu,"\u0275\u0275textInterpolateV":Bu,"\u0275\u0275i18n":Tl,"\u0275\u0275i18nAttributes":Il,"\u0275\u0275i18nExp":xl,"\u0275\u0275i18nStart":Sl,"\u0275\u0275i18nEnd":El,"\u0275\u0275i18nApply":kl,"\u0275\u0275i18nPostprocess":Al,"\u0275\u0275resolveWindow":_i,"\u0275\u0275resolveDocument":wi,"\u0275\u0275resolveBody":Oi,"\u0275\u0275setComponentScope":tt,"\u0275\u0275setNgModuleScope":ot,"\u0275\u0275sanitizeHtml":ri,"\u0275\u0275sanitizeStyle":ii,"\u0275\u0275sanitizeResourceUrl":si,"\u0275\u0275sanitizeScript":ai,"\u0275\u0275sanitizeUrl":oi,"\u0275\u0275sanitizeUrlOrResourceUrl":li,"\u0275\u0275trustConstantHtml":ui,"\u0275\u0275trustConstantResourceUrl":ci,forwardRef:f,resolveForwardRef:p}))();const Ud=[],Vd=[];let qd=!1;function Bd(t){return Array.isArray(t)?t.every(Bd):!!p(t)}function Hd(t,e){const n=In(e.declarations||Ud),r=Yd(t);n.forEach(e=>{e.hasOwnProperty(Y)?zd(ct(e),r):e.hasOwnProperty(X)||e.hasOwnProperty(W)||(e.ngSelectorScope=t)})}function zd(t,e){t.directiveDefs=()=>Array.from(e.compilation.directives).map(t=>t.hasOwnProperty(Y)?ct(t):lt(t)).filter(t=>!!t),t.pipeDefs=()=>Array.from(e.compilation.pipes).map(t=>ht(t)),t.schemas=e.schemas,t.tView=null}function Yd(t){if(!Wd(t))throw new Error(`${t.name} does not have a module def (\u0275mod property)`);const e=dt(t);if(null!==e.transitiveCompileScopes)return e.transitiveCompileScopes;const n={schemas:e.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return Ci(e.imports).forEach(t=>{const e=t;if(!Wd(e))throw new Error(`Importing ${e.name} which does not have a \u0275mod property`);const r=Yd(e);r.exported.directives.forEach(t=>n.compilation.directives.add(t)),r.exported.pipes.forEach(t=>n.compilation.pipes.add(t))}),Ci(e.declarations).forEach(t=>{ht(t)?n.compilation.pipes.add(t):n.compilation.directives.add(t)}),Ci(e.exports).forEach(t=>{const e=t;if(Wd(e)){const t=Yd(e);t.exported.directives.forEach(t=>{n.compilation.directives.add(t),n.exported.directives.add(t)}),t.exported.pipes.forEach(t=>{n.compilation.pipes.add(t),n.exported.pipes.add(t)})}else ht(e)?n.exported.pipes.add(e):n.exported.directives.add(e)}),e.transitiveCompileScopes=n,n}function Xd(t){return function(t){return void 0!==t.ngModule}(t)?t.ngModule:t}function Wd(t){return!!dt(t)}let Kd=0;function Gd(t,e){let n=null;Qd(t,e||{}),Object.defineProperty(t,X,{get:()=>{if(null===n){const r=$d(t,e||{});n=Sn().compileDirective(Md,r.sourceMapUrl,r.metadata)}return n},configurable:!1})}function $d(t,e){const n=t&&t.name,r=`ng:///${n}/\u0275dir.js`,i=Sn(),o=Zd(t,e);return o.typeSourceSpan=i.createParseSourceSpan("Directive",n,r),o.usesInheritance&&tf(t),{metadata:o,sourceMapUrl:r}}function Qd(t,e){let n=null;Object.defineProperty(t,$,{get:()=>{if(null===n){const r=$d(t,e),i=Sn();n=i.compileFactory(Md,`ng:///${t.name}/\u0275fac.js`,Object.assign(Object.assign({},r.metadata),{injectFn:"directiveInject",target:i.R3FactoryTarget.Directive}))}return n},configurable:!1})}function Jd(t){return Object.getPrototypeOf(t.prototype)===Object.prototype}function Zd(t,e){const n=ir(),r=n.ownPropMetadata(t);return{name:t.name,type:t,typeArgumentCount:0,selector:void 0!==e.selector?e.selector:null,deps:or(t),host:e.host||B,propMetadata:r,inputs:e.inputs||z,outputs:e.outputs||z,queries:nf(t,r,rf),lifecycle:{usesOnChanges:n.hasLifecycleHook(t,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!Jd(t),exportAs:(i=e.exportAs,void 0===i?null:af(i)),providers:e.providers||null,viewQueries:nf(t,r,of)};var i}function tf(t){const e=Object.prototype;let n=Object.getPrototypeOf(t.prototype).constructor;for(;n&&n!==e;)lt(n)||ct(n)||!cf(n)||Gd(n,null),n=Object.getPrototypeOf(n)}function ef(t,e){return{propertyName:t,predicate:(n=e.selector,"string"==typeof n?af(n):p(n)),descendants:e.descendants,first:e.first,read:e.read?e.read:null,static:!!e.static,emitDistinctChangesOnly:!!e.emitDistinctChangesOnly};var n}function nf(t,e,n){const r=[];for(const i in e)if(e.hasOwnProperty(i)){const o=e[i];o.forEach(e=>{if(n(e)){if(!e.selector)throw new Error(`Can't construct a query for the property "${i}" of "${v(t)}" since the query selector wasn't defined.`);if(o.some(sf))throw new Error("Cannot combine @Input decorators with query decorators");r.push(ef(i,e))}})}return r}function rf(t){const e=t.ngMetadataName;return"ContentChild"===e||"ContentChildren"===e}function of(t){const e=t.ngMetadataName;return"ViewChild"===e||"ViewChildren"===e}function sf(t){return"Input"===t.ngMetadataName}function af(t){return t.split(",").map(t=>t.trim())}const uf=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function cf(t){const e=ir();if(uf.some(n=>e.hasLifecycleHook(t,n)))return!0;const n=e.propMetadata(t);for(const r in n){const t=n[r];for(let e=0;e<t.length;e++){const n=t[e],r=n.ngMetadataName;if(sf(n)||rf(n)||of(n)||"Output"===r||"HostBinding"===r||"HostListener"===r)return!0}}return!1}function lf(t,e){return{type:t,typeArgumentCount:0,name:t.name,deps:or(t),pipeName:e.name,pure:void 0===e.pure||e.pure}}const hf=mn("Directive",(t={})=>t,void 0,void 0,(t,e)=>yf(t,e)),df=mn("Component",(t={})=>Object.assign({changeDetection:D.Default},t),hf,void 0,(t,e)=>mf(t,e)),ff=mn("Pipe",t=>Object.assign({pure:!0},t),void 0,void 0,(t,e)=>vf(t,e)),pf=bn("Input",t=>({bindingPropertyName:t})),gf=bn("Output",t=>({bindingPropertyName:t})),mf=function(t,e){let n=null;!function(t,e){ur(e)&&(sr.set(t,e),ar.add(t))}(t,e),Qd(t,e),Object.defineProperty(t,Y,{get:()=>{if(null===n){const r=Sn();if(ur(e)){const n=[`Component '${t.name}' is not resolved:`];throw e.templateUrl&&n.push(` - templateUrl: ${e.templateUrl}`),e.styleUrls&&e.styleUrls.length&&n.push(` - styleUrls: ${JSON.stringify(e.styleUrls)}`),n.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(n.join("\n"))}const i=null;let o=e.preserveWhitespaces;void 0===o&&(o=null!==i&&void 0!==i.preserveWhitespaces&&i.preserveWhitespaces);let s=e.encapsulation;void 0===s&&(s=null!==i&&void 0!==i.defaultEncapsulation?i.defaultEncapsulation:L.Emulated);const a=e.templateUrl||`ng:///${t.name}/template.html`,u=Object.assign(Object.assign({},Zd(t,e)),{typeSourceSpan:r.createParseSourceSpan("Component",t.name,a),template:e.template||"",preserveWhitespaces:o,styles:e.styles||z,animations:e.animations,directives:[],changeDetection:e.changeDetection,pipes:new Map,encapsulation:s,interpolation:e.interpolation,viewProviders:e.viewProviders||null});Kd++;try{u.usesInheritance&&tf(t),n=r.compileComponent(Md,a,u)}finally{Kd--}if(0===Kd&&function(){if(!qd){qd=!0;try{for(let t=Vd.length-1;t>=0;t--){const{moduleType:e,ngModule:n}=Vd[t];n.declarations&&n.declarations.every(Bd)&&(Vd.splice(t,1),Hd(e,n))}}finally{qd=!1}}}(),void 0!==t.ngSelectorScope){const e=Yd(t.ngSelectorScope);zd(n,e)}}return n},configurable:!1})},yf=Gd,vf=function(t,e){let n=null,r=null;Object.defineProperty(t,$,{get:()=>{if(null===r){const n=lf(t,e),i=Sn();r=i.compileFactory(Md,`ng:///${n.name}/\u0275fac.js`,Object.assign(Object.assign({},n),{injectFn:"directiveInject",target:i.R3FactoryTarget.Pipe}))}return r},configurable:!1}),Object.defineProperty(t,W,{get:()=>{if(null===n){const r=lf(t,e);n=Sn().compilePipe(Md,`ng:///${r.name}/\u0275pipe.js`,r)}return n},configurable:!1})},bf=mn("NgModule",t=>t,void 0,void 0,(t,e)=>_f(t,e)),_f=function(t,e={}){!function(t,e,n=!1){const r=In(e.declarations||Ud);let i=null;Object.defineProperty(t,K,{configurable:!0,get:()=>(null===i&&(i=Sn().compileNgModule(Md,`ng:///${t.name}/\u0275mod.js`,{type:t,bootstrap:In(e.bootstrap||Ud).map(p),declarations:r.map(p),imports:In(e.imports||Ud).map(p).map(Xd),exports:In(e.exports||Ud).map(p).map(Xd),schemas:e.schemas?In(e.schemas):null,id:e.id||null}),i.schemas||(i.schemas=[])),i)});let o=null;Object.defineProperty(t,$,{get:()=>{if(null===o){const e=Sn();o=e.compileFactory(Md,`ng:///${t.name}/\u0275fac.js`,{name:t.name,type:t,deps:or(t),injectFn:"inject",target:e.R3FactoryTarget.NgModule,typeArgumentCount:0})}return o},configurable:!1});let s=null;Object.defineProperty(t,I,{get:()=>{if(null===s){const n={name:t.name,type:t,providers:e.providers||Ud,imports:[(e.imports||Ud).map(p),(e.exports||Ud).map(p)]};s=Sn().compileInjector(Md,`ng:///${t.name}/\u0275inj.js`,n)}return s},configurable:!1})}(t,e),function(t,e){Vd.push({moduleType:t,ngModule:e})}(t,e)},wf=new wn("Application Initializer");let Of=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Bl,this.reject=Bl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();La(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Kn(wf,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Cf=new wn("AppId"),Sf={provide:Cf,useFactory:function(){return`${Ef()}${Ef()}${Ef()}`},deps:[]};function Ef(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tf=new wn("Platform Initializer"),If=new wn("Platform ID"),xf=new wn("appBootstrapListener");let kf=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Af=new wn("LocaleId"),jf=new wn("DefaultCurrencyCode");class Pf{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Rf=function(t){return new Yh(t)},Nf=Rf,Df=function(t){return Promise.resolve(Rf(t))},Lf=function(t){const e=Rf(t),n=Ci(dt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new Vh(n)),t},[]);return new Pf(e,n)},Ff=Lf,Mf=function(t){return Promise.resolve(Lf(t))};let Uf=(()=>{class t{constructor(){this.compileModuleSync=Nf,this.compileModuleAsync=Df,this.compileModuleAndAllComponentsSync=Ff,this.compileModuleAndAllComponentsAsync=Mf}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Vf=(()=>Promise.resolve(0))();function qf(t){"undefined"==typeof Zone?Vf.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Bf{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yd(!1),this.onMicrotaskEmpty=new yd(!1),this.onStable=new yd(!1),this.onError=new yd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&e,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Yf(t),zf(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Yf(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Xf(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Wf(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Xf(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Wf(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Yf(t),zf(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bf.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Bf.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Hf,Bl,Bl);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Hf={};function zf(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Yf(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Xf(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Wf(t){t._nesting--,zf(t)}class Kf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yd,this.onMicrotaskEmpty=new yd,this.onStable=new yd,this.onError=new yd}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Gf=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bf.assertNotInAngularZone(),qf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qf(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Kn(Bf))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),$f=(()=>{class t{constructor(){this._applications=new Map,tp.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return tp.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class Qf{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Jf(t){tp=t}let Zf,tp=new Qf,ep=!0,np=!1;function rp(){return np=!0,ep}function ip(){if(np)throw new Error("Cannot enable prod mode after platform setup.");ep=!1}const op=new wn("AllowMultipleToken");class sp{constructor(t,e){this.name=t,this.token=e}}function ap(t,e,n=[]){const r=`Platform: ${e}`,i=new wn(r);return(e=[])=>{let o=up();if(!o||o.injector.get(op,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Os,useValue:"platform"});!function(t){if(Zf&&!Zf.destroyed&&!Zf.injector.get(op,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Zf=t.get(cp);const e=t.get(Tf,null);e&&e.forEach(t=>t())}(Ls.create({providers:t,name:r}))}return function(t){const e=up();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function up(){return Zf&&!Zf.destroyed?Zf:null}let cp=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Kf:("zone.js"===t?void 0:t)||new Bf({enableLongStackTrace:rp(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Bf,useValue:n}];return n.run(()=>{const e=Ls.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(gi,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{dp(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return La(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Of);return t.runInitializers(),t.donePromise.then(()=>(Pc(i.injector.get(Af,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=lp({},e);return function(t,e,n){const r=new Yh(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(hp);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Kn(Ls))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function lp(t,e){return Array.isArray(e)?e.reduce(lp,t):Object.assign(Object.assign({},t),e)}let hp=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Bf.assertNotInAngularZone(),qf(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Bf.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ul?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ih),i=n.create(Ls.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Gf,null),a=s&&i.injector.get($f);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),dp(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;dp(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(xf,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Kn(Bf),Kn(Ls),Kn(gi),Kn(ql),Kn(Of))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function dp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class fp{}class pp{}const gp={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let mp=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||gp}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>yp(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>yp(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Kn(Uf),Kn(pp,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function yp(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const vp=function(t){return null},bp=ap(null,"core",[{provide:If,useValue:"unknown"},{provide:cp,deps:[Ls]},{provide:$f,deps:[]},{provide:kf,deps:[]}]),_p=[{provide:hp,useClass:hp,deps:[Bf,Ls,gi,ql,Of]},{provide:Uh,deps:[Bf],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Of,useClass:Of,deps:[[new Zn,wf]]},{provide:Uf,useClass:Uf,deps:[]},Sf,{provide:lh,useFactory:function(){return _h},deps:[]},{provide:dh,useFactory:function(){return wh},deps:[]},{provide:Af,useFactory:function(t){return Pc(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new Jn(Af),new Zn,new er]]},{provide:jf,useValue:"USD"}];let wp=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Kn(hp))},t.\u0275mod=it({type:t}),t.\u0275inj=O({providers:_p}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return S}),n.d(e,"c",function(){return C}),n.d(e,"d",function(){return F}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return P}),n.d(e,"j",function(){return M}),n.d(e,"k",function(){return l}),n.d(e,"l",function(){return h}),n.d(e,"m",function(){return B}),n.d(e,"n",function(){return W}),n.d(e,"o",function(){return f}),n.d(e,"p",function(){return j}),n.d(e,"q",function(){return m}),n.d(e,"r",function(){return y}),n.d(e,"s",function(){return b}),n.d(e,"t",function(){return N}),n.d(e,"u",function(){return _}),n.d(e,"v",function(){return p}),n.d(e,"w",function(){return g}),n.d(e,"x",function(){return O}),n.d(e,"y",function(){return v}),n.d(e,"z",function(){return w}),n.d(e,"A",function(){return A}),n.d(e,"B",function(){return I}),n.d(e,"C",function(){return D}),n.d(e,"D",function(){return L}),n.d(e,"E",function(){return R}),n.d(e,"F",function(){return X}),n.d(e,"G",function(){return Y}),n.d(e,"H",function(){return x}),n.d(e,"I",function(){return q}),n.d(e,"J",function(){return H}),n.d(e,"K",function(){return z});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function m(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function O(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?E(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function E(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var k=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=k(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=k(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function M(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e){return t+" failed: "+e+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e)+"must be a valid context object.")}var Y=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},X=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function W(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.u("angularfire2.app.options"),b=new u.u("angularfire2.app.nameOrConfig"),_=new u.W("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.cb)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[v,u.F,[new u.G,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.V.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.cc(u.I))},t.\u0275mod=u.Rb({type:t}),t.\u0275inj=u.Qb({providers:[E]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return f.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.l)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.q)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.w)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var b=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.20",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.u("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Pb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.cc)(l)}const c=new r.u("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.cc(s))},t.\u0275prov=Object(r.Pb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.cc)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Pb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.cc)(s).location;return new b(Object(r.cc)(a),e&&e.origin||"")}const v=new r.u("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.cc(a),r.cc(v,8))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.cc(a),r.cc(v,8))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.q,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.cc(m),r.cc(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Pb)({factory:O,token:t,providedIn:"root"}),t})();function O(){return new w(Object(r.cc)(m),Object(r.cc)(a))}function C(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),T=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function I(t,e){const n=Object(r.qb)(t),i=n[r.hb.NumberSymbols][e];if(void 0===i){if(e===T.CurrencyDecimal)return n[r.hb.NumberSymbols][T.Decimal];if(e===T.CurrencyGroup)return n[r.hb.NumberSymbols][T.Group]}return i}const x=r.tb,k=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function A(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class j{}let P=(()=>{class t extends j{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(x(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.cc(r.z))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();function R(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class N{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let D=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new N(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new L(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new L(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.X),r.Tb(r.S),r.Tb(r.x))},t.\u0275dir=r.Ob({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class L{constructor(t,e){this.record=t,this.view=e}}let F=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new M,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){U("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){U("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.X),r.Tb(r.S))},t.\u0275dir=r.Ob({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class M{constructor(){this.$implicit=null,this.ngIf=null}}function U(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.Db)(e)}'.`)}let V=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.o),r.Tb(r.y),r.Tb(r.L))},t.\u0275dir=r.Ob({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),q=(()=>{class t{constructor(t){this._locale=t}transform(e,n,i){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;i=i||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,o,s=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf("."))>-1&&(s=s.replace(".","")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;"0"===s.charAt(r);r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;"0"===s.charAt(o);)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(k);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(l=A(e)),null!=n&&(h=A(n)),null!=r?d=A(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const c=e+t.integerLen,l=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0},0);l&&(r.unshift(l),t.integerLen++)}(c,h,d);let f=c.digits,p=c.integerLen;const g=c.exponent;let m=[];for(u=f.every(t=>!t);p<l;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(I(n,r)),m.length&&(a+=I(n,i)+m.join("")),g&&(a+=I(n,T.Exponential)+"+"+g)}else a=I(n,T.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=s[0],u=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);"0"===t?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return Object(r.qb)(t)[r.hb.NumberFormats][e]}(e,S.Decimal),I(e,T.MinusSign)),e,T.Group,T.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),i,n)}catch(o){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.Db)(t)}'`)}(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.z))},t.\u0275pipe=r.Sb({name:"number",type:t,pure:!0}),t})(),B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:[{provide:j,useClass:P}]}),t})();function H(t){return"server"===t}let z=(()=>{class t{}return t.\u0275prov=Object(r.Pb)({token:t,providedIn:"root",factory:()=>new Y(Object(r.cc)(s),window)}),t})();class Y{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=X(this.window.history)||X(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function X(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class W extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new W,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=G||(G=document.querySelector("base"),G)?G.getAttribute("href"):null;return null==e?null:(n=e,K||(K=document.createElement("a")),K.setAttribute("href",n),"/"===K.pathname.charAt(0)?K.pathname:"/"+K.pathname);var n}resetBaseElement(){G=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return R(document.cookie,t)}}let K,G=null;const $=new r.u("TRANSITION_ID"),Q=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[$,s,r.v],multi:!0}];class J{static init(){Object(r.eb)(new J)}addToWindow(t){r.vb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.vb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.vb.getAllAngularRootElements=()=>t.getAllRootElements(),r.vb.frameworkStabilizers||(r.vb.frameworkStabilizers=[]),r.vb.frameworkStabilizers.push(t=>{const e=r.vb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Z=new r.u("EventManagerPlugins");let tt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.cc(Z),r.cc(r.F))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();class et{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let nt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),rt=(()=>{class t extends nt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.cc(s))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ot=/%COMP%/g;function st(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?st(t,i,n):(i=i.replace(ot,t),n.push(i))}return n}function at(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ut=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ct(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Y.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new lt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.Y.ShadowDom:return new ht(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=st(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.cc(tt),r.cc(rt),r.cc(r.c))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();class ct{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(it[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=it[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=it[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.N.DashCase|r.N.Important)?t.style.setProperty(e,n,i&r.N.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.N.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,at(n)):this.eventManager.addEventListener(t,e,at(n))}}class lt extends ct{constructor(t,e,n,r){super(t),this.component=n;const i=st(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ot,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ot,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ht extends ct{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=st(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let dt=(()=>{class t extends et{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.cc(s))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();const ft=["alt","control","meta","shift"],pt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let yt=(()=>{class t extends et{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ft.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&gt.hasOwnProperty(e)&&(e=gt[e]))}return pt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ft.forEach(r=>{r!=n&&(0,mt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.cc(s))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),vt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Pb)({factory:function(){return Object(r.cc)(bt)},token:t,providedIn:"root"}),t})(),bt=(()=>{class t extends vt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.P.NONE:return e;case r.P.HTML:return Object(r.kb)(e,"HTML")?Object(r.Eb)(e):Object(r.ib)(this._doc,String(e)).toString();case r.P.STYLE:return Object(r.kb)(e,"Style")?Object(r.Eb)(e):e;case r.P.SCRIPT:if(Object(r.kb)(e,"Script"))return Object(r.Eb)(e);throw new Error("unsafe value used in a script context");case r.P.URL:return Object(r.ub)(e),Object(r.kb)(e,"URL")?Object(r.Eb)(e):Object(r.jb)(String(e));case r.P.RESOURCE_URL:if(Object(r.kb)(e,"ResourceURL"))return Object(r.Eb)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(r.lb)(t)}bypassSecurityTrustStyle(t){return Object(r.ob)(t)}bypassSecurityTrustScript(t){return Object(r.nb)(t)}bypassSecurityTrustUrl(t){return Object(r.pb)(t)}bypassSecurityTrustResourceUrl(t){return Object(r.mb)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.cc(s))},t.\u0275prov=Object(r.Pb)({factory:function(){return t=Object(r.cc)(r.r),new bt(t.get(s));var t},token:t,providedIn:"root"}),t})();const _t=[{provide:r.I,useValue:"browser"},{provide:r.J,useValue:function(){W.makeCurrent(),J.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.Cb)(document),document},deps:[]}],wt=Object(r.Z)(r.db,"browser",_t),Ot=[[],{provide:r.gb,useValue:"root"},{provide:r.p,useFactory:function(){return new r.p},deps:[]},{provide:Z,useClass:dt,multi:!0,deps:[s,r.F,r.I]},{provide:Z,useClass:yt,multi:!0,deps:[s]},[],{provide:ut,useClass:ut,deps:[tt,rt,r.c]},{provide:r.M,useExisting:ut},{provide:nt,useExisting:rt},{provide:rt,useClass:rt,deps:[s]},{provide:r.T,useClass:r.T,deps:[r.F]},{provide:tt,useClass:tt,deps:[Z,r.F]},[]];let Ct=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:$,useExisting:r.c},Q]}}}return t.\u0275fac=function(e){return new(e||t)(r.cc(t,12))},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:Ot,imports:[B,r.f]}),t})();"undefined"!=typeof window&&window;var St=n("Jgta"),Et=n("XNiG"),Tt=n("LRne"),It=n("HDdC"),xt=n("Cfvw"),kt=n("VRyK"),At=n("pxpQ"),jt=n("lJxs"),Pt=n("zx2A");function Rt(t,e){return"function"==typeof e?n=>n.pipe(Rt((n,r)=>Object(xt.a)(t(n,r)).pipe(Object(jt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Nt(t))}class Nt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Dt(t,this.project))}}class Dt extends Pt.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Pt.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Pt.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Lt=n("qgXg"),Ft=n("quSY"),Mt=n("9ppp"),Ut=n("Ylt2");class Vt extends Et.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new qt(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Mt.a;if(this.isStopped||this.hasError?o=Ft.a.EMPTY:(this.observers.push(t),o=new Ut.a(this,t)),r&&t.add(t=new At.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Lt.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class qt{constructor(t,e){this.time=t,this.value=e}}function Bt(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Vt(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Ht=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var zt=n("7o/Q");function Yt(t,e){return function(n){return n.lift(new Xt(t,e))}}class Xt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Wt(t,this.predicate,this.thisArg))}}class Wt extends zt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Kt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Gt=n("EY2u");function $t(t){return e=>0===t?Object(Gt.b)():e.lift(new Qt(t))}class Qt{constructor(t){if(this.total=t,this.total<0)throw new Kt}call(t,e){return e.subscribe(new Jt(t,this.total))}}class Jt extends zt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Zt(t=null){return e=>e.lift(new te(t))}class te{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ee(t,this.defaultValue))}}class ee extends zt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function ne(t=oe){return e=>e.lift(new re(t))}class re{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ie(t,this.errorFactory))}}class ie extends zt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Ab){t=Ab}this.destination.error(t)}}}function oe(){return new Ht}var se=n("SpAZ");function ae(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Yt((e,n)=>t(e,n,r)):se.a,$t(1),n?Zt(e):ne(()=>new Ht))}function ue(t,e){return e?Rt(()=>t,e):Rt(()=>t)}var ce=n("tf+s"),le=n("spgP");const he=new r.u("angularfire2.auth.use-emulator"),de=new r.u("angularfire2.auth.settings"),fe=new r.u("angularfire2.auth.tenant-id"),pe=new r.u("angularfire2.auth.langugage-code"),ge=new r.u("angularfire2.auth.use-device-language"),me=new r.u("angularfire.auth.persistence");let ye=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new le.d(i),d=Object(le.h)(h),f=new Et.a,p=Object(Tt.a)(void 0).pipe(Object(At.b)(h.outsideAngular),Rt(()=>i.runOutsideAngular(()=>n.e(5).then(n.bind(null,"6nsN")))),Object(jt.a)(()=>Object(le.g)(t,i,e)),Object(jt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(le.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Bt({bufferSize:1,refCount:!1}));if(H(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Tt.a)(null);else{p.pipe(ae()).subscribe();const t=p.pipe(Rt(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Bt({bufferSize:1,refCount:!1})),e=t=>new It.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Rt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Rt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(ue(n),Object(ce.a)(h.outsideAngular),Object(At.b)(h.insideAngular)),this.user=t.pipe(ue(r),Object(ce.a)(h.outsideAngular),Object(At.b)(h.insideAngular)),this.idToken=this.user.pipe(Rt(t=>t?Object(xt.a)(t.getIdToken()):Object(Tt.a)(null))),this.idTokenResult=this.user.pipe(Rt(t=>t?Object(xt.a)(t.getIdTokenResult()):Object(Tt.a)(null))),this.credential=Object(kt.a)(t,f,this.authState.pipe(Yt(t=>!t))).pipe(Object(jt.a)(t=>(null==t?void 0:t.user)?t:null),Object(ce.a)(h.outsideAngular),Object(At.b)(h.insideAngular))}return Object(le.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.cc(le.c),r.cc(le.b,8),r.cc(r.I),r.cc(r.F),r.cc(he,8),r.cc(de,8),r.cc(fe,8),r.cc(pe,8),r.cc(ge,8),r.cc(me,8))},t.\u0275prov=Object(r.Pb)({factory:function(){return new t(Object(r.cc)(le.c),Object(r.cc)(le.b,8),Object(r.cc)(r.I),Object(r.cc)(r.F),Object(r.cc)(he,8),Object(r.cc)(de,8),Object(r.cc)(fe,8),Object(r.cc)(pe,8),Object(r.cc)(ge,8),Object(r.cc)(me,8))},token:t,providedIn:"any"}),t})();Object(le.e)(ye,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let ve=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:[ye]}),t})();class be extends Et.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Mt.a;return this._value}next(t){super.next(this._value=t)}}var _e=n("z+Ro"),we=n("DH7j");class Oe extends zt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Ce extends zt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Se=n("SeVD");function Ee(t,e,n,r,i=new Ce(t,n,r)){if(!i.closed)return e instanceof It.a?e.subscribe(i):Object(Se.a)(e)(i)}var Te=n("yCtX");const Ie={};class xe{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ke(t,this.resultSelector))}}class ke extends Oe{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ie),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Ee(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Ie?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var Ae=n("bHdf");function je(...t){return Object(Ae.a)(1)(Object(Tt.a)(...t))}function Pe(t){return new It.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(xt.a)(n):Object(Gt.b)()).subscribe(e)})}var Re=n("EQ5u");function Ne(...t){const e=t[t.length-1];return Object(_e.a)(e)?(t.pop(),n=>je(t,n,e)):e=>je(t,e)}function De(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Le(t,e,n))}}class Le{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Fe(t,this.accumulator,this.seed,this.hasSeed))}}class Fe extends zt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Me(t){return function(e){const n=new Ue(t),r=e.lift(n);return n.caught=r}}class Ue{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ve(t,this.selector,this.caught))}}class Ve extends Pt.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Pt.a(this);this.add(r);const i=Object(Pt.c)(n,r);i!==r&&this.add(i)}}}var qe=n("5+tZ");function Be(t,e){return Object(qe.a)(t,e,1)}function He(t){return function(e){return 0===t?Object(Gt.b)():e.lift(new ze(t))}}class ze{constructor(t){if(this.total=t,this.total<0)throw new Kt}call(t,e){return e.subscribe(new Ye(t,this.total))}}class Ye extends zt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var Xe=n("vkgz"),We=n("x+ZX");function Ke(t){return e=>e.lift(new Ge(t))}class Ge{constructor(t){this.callback=t}call(t,e){return e.subscribe(new $e(t,this.callback))}}class $e extends zt.a{constructor(t,e){super(t),this.add(new Ft.a(e))}}class Qe{constructor(t,e){this.id=t,this.url=e}}class Je extends Qe{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ze extends Qe{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tn extends Qe{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class en extends Qe{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nn extends Qe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rn extends Qe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class on extends Qe{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sn extends Qe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class an extends Qe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class un{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ln{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fn{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function mn(t){return new gn(t)}function yn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function vn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function bn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!_n(t[i],e[i]))return!1;return!0}function _n(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function wn(t){return Array.prototype.concat.apply([],t)}function On(t){return t.length>0?t[t.length-1]:null}function Cn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Sn(t){return Object(r.xb)(t)?t:Object(r.yb)(t)?Object(xt.a)(Promise.resolve(t)):Object(Tt.a)(t)}function En(t,e,n){return n?function(t,e){return bn(t,e)}(t.queryParams,e.queryParams)&&Tn(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>_n(t[n],e[n]))}(t.queryParams,e.queryParams)&&In(t.root,e.root)}function Tn(t,e){if(!Pn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Tn(t.children[n],e.children[n]))return!1}return!0}function In(t,e){return xn(t,e,e.segments)}function xn(t,e,n){if(t.segments.length>n.length)return!!Pn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Pn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!In(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Pn(t.segments,r)&&!!t.children.primary&&xn(t.children.primary,e,i)}}class kn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mn(this.queryParams)),this._queryParamMap}toString(){return Dn.serialize(this)}}class An{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Cn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ln(this)}}class jn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=mn(this.parameters)),this._parameterMap}toString(){return Hn(this)}}function Pn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Rn{}class Nn{parse(t){const e=new Kn(t);return new kn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Fn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Un(e)}=${Un(t)}`).join("&"):`${Un(e)}=${Un(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Dn=new Nn;function Ln(t){return t.segments.map(t=>Hn(t)).join("/")}function Fn(t,e){if(!t.hasChildren())return Ln(t);if(e){const e=t.children.primary?Fn(t.children.primary,!1):"",n=[];return Cn(t.children,(t,e)=>{"primary"!==e&&n.push(`${e}:${Fn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Cn(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),Cn(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>"primary"===n?[Fn(t.children.primary,!1)]:[`${n}:${Fn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Ln(t)}/${e[0]}`:`${Ln(t)}/(${e.join("//")})`}}function Mn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Un(t){return Mn(t).replace(/%3B/gi,";")}function Vn(t){return Mn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qn(t){return decodeURIComponent(t)}function Bn(t){return qn(t.replace(/\+/g,"%20"))}function Hn(t){return`${Vn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Vn(t)}=${Vn(e[t])}`).join("")}`;var e}const zn=/^[^\/()?;=#]+/;function Yn(t){const e=t.match(zn);return e?e[0]:""}const Xn=/^[^=?&#]+/,Wn=/^[^?&#]+/;class Kn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new An([],{}):new An([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new An(t,e)),n}parseSegment(){const t=Yn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new jn(qn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Yn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Yn(this.remaining);t&&(n=t,this.capture(n))}t[qn(e)]=qn(n)}parseQueryParam(t){const e=function(t){const e=t.match(Xn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Wn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Bn(e),i=Bn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Yn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new An([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Gn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=$n(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=$n(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Qn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Qn(t,this._root).map(t=>t.value)}}function $n(t,e){if(t===e.value)return e;for(const n of e.children){const e=$n(t,n);if(e)return e}return null}function Qn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Qn(t,n);if(r.length)return r.unshift(e),r}return[]}class Jn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Zn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class tr extends Gn{constructor(t,e){super(t),this.snapshot=e,sr(this,t)}toString(){return this.snapshot.toString()}}function er(t,e){const n=function(t,e){const n=new ir([],{},{},"",{},"primary",e,null,t.root,-1,{});return new or("",new Jn(n,[]))}(t,e),r=new be([new jn("",{})]),i=new be({}),o=new be({}),s=new be({}),a=new be(""),u=new nr(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new tr(new Jn(u,[]),n)}class nr{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(jt.a)(t=>mn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(jt.a)(t=>mn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ir{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class or extends Gn{constructor(t,e){super(e),this.url=t,sr(this,e)}toString(){return ar(this._root)}}function sr(t,e){e.value._routerState=t,e.children.forEach(e=>sr(t,e))}function ar(t){const e=t.children.length>0?` { ${t.children.map(ar).join(", ")} } `:"";return`${t.value}${e}`}function ur(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,bn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),bn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!bn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),bn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function cr(t,e){return bn(t.params,e.params)&&function(t,e){return Pn(t,e)&&t.every((t,n)=>bn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||cr(t.parent,e.parent))}function lr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return lr(t,e,r);return lr(t,e)})}(t,e,n);return new Jn(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return hr(e,t),t}{const n=new nr(new be((r=e.value).url),new be(r.params),new be(r.queryParams),new be(r.fragment),new be(r.data),r.outlet,r.component,r),i=e.children.map(e=>lr(t,e));return new Jn(n,i)}}var r}function hr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)hr(t.children[n],e.children[n])}function dr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function fr(t){return"object"==typeof t&&null!=t&&t.outlets}function pr(t,e,n,r,i){let o={};return r&&Cn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new kn(n.root===t?e:gr(n.root,t,e),o,i)}function gr(t,e,n){const r={};return Cn(t.children,(t,i)=>{r[i]=t===e?n:gr(t,e,n)}),new An(t.segments,r)}class mr{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&dr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(fr);if(r&&r!==On(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function vr(t,e,n){if(t||(t=new An([],{})),0===t.segments.length&&t.hasChildren())return br(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(fr(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Cr(a,u,e))return o;r+=2}else{if(!Cr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new An(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new An(t.segments.slice(r.pathIndex),t.children),br(e,0,i)}return r.match&&0===i.length?new An(t.segments,{}):r.match&&!t.hasChildren()?_r(t,e,n):r.match?br(t,0,i):_r(t,e,n)}function br(t,e,n){if(0===n.length)return new An(t.segments,{});{const r=function(t){return fr(t[0])?t[0].outlets:{primary:t}}(n),i={};return Cn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=vr(t.children[r],e,n))}),Cn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new An(t.segments,i)}}function _r(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(fr(o)){const t=wr(o.outlets);return new An(r,t)}if(0===i&&dr(n[0])){r.push(new jn(t.segments[e].path,Or(n[0]))),i++;continue}const s=fr(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&dr(a)?(r.push(new jn(s,Or(a))),i+=2):(r.push(new jn(s,{})),i++)}return new An(r,{})}function wr(t){const e={};return Cn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=_r(new An([],{}),0,t))}),e}function Or(t){const e={};return Cn(t,(t,n)=>e[n]=`${t}`),e}function Cr(t,e,n){return t==n.path&&bn(e,n.parameters)}class Sr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ur(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Zn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Cn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Zn(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Zn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new fn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new hn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(ur(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Er(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Er(t){ur(t.value),t.children.forEach(Er)}class Tr{constructor(t,e){this.routes=t,this.module=e}}function Ir(t){return"function"==typeof t}function xr(t){return t instanceof kn}const kr=Symbol("INITIAL_VALUE");function Ar(){return Rt(t=>function(...t){let e,n;return Object(_e.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(we.a)(t[0])&&(t=t[0]),Object(Te.a)(t,n).lift(new xe(e))}(t.map(t=>t.pipe($t(1),Ne(kr)))).pipe(De((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==kr)return t;if(r===kr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||xr(r))return r}return t},t)},kr),Yt(t=>t!==kr),Object(jt.a)(t=>xr(t)?t:!0===t),$t(1)))}let jr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Nb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Ub(0,"router-outlet")},directives:function(){return[Ti]},encapsulation:2}),t})();function Pr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Rr(r,Nr(e,r))}}function Rr(t,e){t.children&&Pr(t.children,e)}function Nr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Dr(t){const e=t.children&&t.children.map(Dr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=jr),n}function Lr(t){return t.outlet||"primary"}function Fr(t,e){const n=t.filter(t=>Lr(t)===e);return n.push(...t.filter(t=>Lr(t)!==e)),n}const Mr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ur(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Mr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||vn)(n,t,e);if(!i)return Object.assign({},Mr);const o={};Cn(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Vr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>qr(t,e,n)&&"primary"!==Lr(n))}(t,n,r)){const i=new An(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==Lr(o)){const n=new An([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Lr(o)]=n}return i}(t,e,r,new An(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>qr(t,e,n))}(t,n,r)){const o=new An(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(qr(t,n,a)&&!i[Lr(a)]){const n=new An([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Lr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new An(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function qr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Br(t,e,n,r){return!!(Lr(t)===r||"primary"!==r&&qr(e,n,t))&&("**"===t.path||Ur(e,t,n).matched)}function Hr(t,e,n){return 0===e.length&&!t.children[n]}class zr{constructor(t){this.segmentGroup=t||null}}class Yr{constructor(t){this.urlTree=t}}function Xr(t){return new It.a(e=>e.error(new zr(t)))}function Wr(t){return new It.a(e=>e.error(new Yr(t)))}function Kr(t){return new It.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Gr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.D)}apply(){const t=Vr(this.urlTree.root,[],[],this.config).segmentGroup,e=new An(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,"primary").pipe(Object(jt.a)(t=>this.createUrlTree($r(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Me(t=>{if(t instanceof Yr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof zr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(jt.a)(e=>this.createUrlTree($r(e),t.queryParams,t.fragment))).pipe(Me(t=>{if(t instanceof zr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new An([],{primary:t}):t;return new kn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(jt.a)(t=>new An([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(xt.a)(r).pipe(Be(r=>{const i=n.children[r],o=Fr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(jt.a)(t=>({segment:t,outlet:r})))}),De((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Yt((e,n)=>t(e,n,r)):se.a,He(1),n?Zt(e):ne(()=>new Ht))}())}expandSegment(t,e,n,r,i,o){return Object(xt.a)(n).pipe(Be(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Me(t=>{if(t instanceof zr)return Object(Tt.a)(null);throw t}))),ae(t=>!!t),Me((t,n)=>{if(t instanceof Ht||"EmptyError"===t.name){if(Hr(e,r,i))return Object(Tt.a)(new An([],{}));throw new zr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Br(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Xr(e):Xr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Wr(i):this.lineralizeSegments(n,i).pipe(Object(qe.a)(n=>{const i=new An(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Ur(e,r,i);if(!s)return Xr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Wr(l):this.lineralizeSegments(r,l).pipe(Object(qe.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(Tt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(jt.a)(t=>(n._loadedConfig=t,new An(r,{})))):Object(Tt.a)(new An(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Ur(e,n,r);if(!o)return Xr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(qe.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Vr(e,s,u,o),l=new An(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(jt.a)(t=>new An(s,t)));if(0===o.length&&0===c.length)return Object(Tt.a)(new An(s,{}));const h=Lr(n)===i;return this.expandSegment(r,l,o,c,h?"primary":i,!0).pipe(Object(jt.a)(t=>new An(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Tt.a)(new Tr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Tt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(qe.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(jt.a)(t=>(e._loadedConfig=t,t))):function(t){return new It.a(e=>e.error(yn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Tt.a)(new Tr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Tt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Ir(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Ir(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Sn(o)});return Object(Tt.a)(i).pipe(Ar(),Object(Xe.a)(t=>{if(!xr(t))return;const e=yn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(jt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Tt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Kr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new kn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Cn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Cn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new An(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function $r(t){const e={};for(const n of Object.keys(t.children)){const r=$r(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new An(t.segments.concat(e.segments),e.children)}return t}(new An(t.segments,e))}class Qr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Jr{constructor(t,e){this.component=t,this.route=e}}function Zr(t,e,n){const r=t._root;return ei(r,e?e._root:null,n,[r.value])}function ti(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function ei(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Zn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Pn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Pn(t.url,e.url)||!bn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cr(t,e)||!bn(t.queryParams,e.queryParams);case"paramsChange":default:return!cr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Qr(r)):(o.data=s.data,o._resolvedData=s._resolvedData),ei(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Jr(a.outlet.component,s))}else s&&ni(e,a,i),i.canActivateChecks.push(new Qr(r)),ei(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Cn(o,(t,e)=>ni(t,n.getContext(e),i)),i}function ni(t,e,n){const r=Zn(t),i=t.value;Cn(r,(t,r)=>{ni(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Jr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ri{}function ii(t){return new It.a(e=>e.error(t))}class oi{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Vr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;const n=new ir([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Jn(n,e),i=new or(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=rr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Fr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!si(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Hr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Br(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?On(n).parameters:{};i=new ir(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ci(t),Lr(t),t.component,t,ai(e),ui(e)+n.length,li(t))}else{const r=Ur(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new ir(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ci(t),Lr(t),t.component,t,ai(e),ui(e)+o.length,li(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Vr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Jn(i,t)]}if(0===a.length&&0===c.length)return[new Jn(i,[])];const l=Lr(t)===r,h=this.processSegment(a,u,c,l?"primary":r);return null===h?null:[new Jn(i,h)]}}function si(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ai(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ui(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ci(t){return t.data||{}}function li(t){return t.resolve||{}}function hi(t){return Rt(e=>{const n=t(e);return n?Object(xt.a)(n).pipe(Object(jt.a)(()=>e)):Object(Tt.a)(e)})}class di extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const fi=new r.u("ROUTES");class pi{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(jt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Tr(wn(i.injector.get(fi,void 0,r.t.Self|r.t.Optional)).map(Dr),i)}),Me(t=>{throw e._loader$=void 0,t}));return e._loader$=new Re.a(n,()=>new Et.a).pipe(Object(We.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(xt.a)(this.loader.load(t)):Sn(t()).pipe(Object(qe.a)(t=>t instanceof r.B?Object(Tt.a)(t):Object(xt.a)(this.compiler.compileModuleAsync(t))))}}class gi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new mi,this.attachRef=null}}class mi{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new gi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class yi{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function vi(t){throw t}function bi(t,e,n){return e.parse("/")}function _i(t,e){return Object(Tt.a)(null)}let wi=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Et.a,this.errorHandler=vi,this.malformedUriErrorHandler=bi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_i,afterPreactivation:_i},this.urlHandlingStrategy=new yi,this.routeReuseStrategy=new di,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.D),this.console=o.get(r.fb);const c=o.get(r.F);this.isNgZoneEnabled=c instanceof r.F&&r.F.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new kn(new An([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pi(s,a,t=>this.triggerEvent(new un(t)),t=>this.triggerEvent(new cn(t))),this.routerState=er(this.currentUrlTree,this.rootComponentType),this.transitions=new be({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Yt(t=>0!==t.id),Object(jt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Rt(t=>{let n=!1,r=!1;return Object(Tt.a)(t).pipe(Object(Xe.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Tt.a)(t).pipe(Rt(t=>{const n=this.transitions.getValue();return e.next(new Je(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Gt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Rt(t=>function(t,e,n,r,i){return new Gr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(jt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Xe.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(qe.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new oi(t,e,n,r,i,o).recognize();return null===s?ii(new ri):Object(Tt.a)(s)}catch(Ab){return ii(Ab)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(jt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Xe.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new nn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Je(n,this.serializeUrl(r),i,o);e.next(a);const u=er(r,this.rootComponentType).snapshot;return Object(Tt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Gt.a}),hi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Xe.a)(t=>{const e=new rn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(jt.a)(t=>Object.assign(Object.assign({},t),{guards:Zr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(qe.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Tt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(xt.a)(t).pipe(Object(qe.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Tt.a)(!0);const s=o.map(o=>{const s=ti(o,e,i);let a;if(function(t){return t&&Ir(t.canDeactivate)}(s))a=Sn(s.canDeactivate(t,e,n,r));else{if(!Ir(s))throw new Error("Invalid CanDeactivate guard");a=Sn(s(t,e,n,r))}return a.pipe(ae())});return Object(Tt.a)(s).pipe(Ar())}(t.component,t.route,n,e,r)),ae(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(qe.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(xt.a)(e).pipe(Be(e=>je(function(t,e){return null!==t&&e&&e(new ln(t)),Object(Tt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new dn(t)),Object(Tt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Pe(()=>{const i=e.guards.map(i=>{const o=ti(i,e.node,n);let s;if(function(t){return t&&Ir(t.canActivateChild)}(o))s=Sn(o.canActivateChild(r,t));else{if(!Ir(o))throw new Error("Invalid CanActivateChild guard");s=Sn(o(r,t))}return s.pipe(ae())});return Object(Tt.a)(i).pipe(Ar())}));return Object(Tt.a)(i).pipe(Ar())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Tt.a)(!0);const i=r.map(r=>Pe(()=>{const i=ti(r,e,n);let o;if(function(t){return t&&Ir(t.canActivate)}(i))o=Sn(i.canActivate(e,t));else{if(!Ir(i))throw new Error("Invalid CanActivate guard");o=Sn(i(e,t))}return o.pipe(ae())}));return Object(Tt.a)(i).pipe(Ar())}(t,e.route,n))),ae(t=>!0!==t,!0))}(r,o,t,e):Object(Tt.a)(n)),Object(jt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Xe.a)(t=>{if(xr(t.guardsResult)){const e=yn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new on(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Yt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new tn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),hi(t=>{if(t.guards.canActivateChecks.length)return Object(Tt.a)(t).pipe(Object(Xe.a)(t=>{const e=new sn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Rt(t=>{let n=!1;return Object(Tt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(qe.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Tt.a)(t);let o=0;return Object(xt.a)(n).pipe(Be(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Tt.a)({});const o={};return Object(xt.a)(i).pipe(Object(qe.a)(i=>function(t,e,n,r){const i=ti(t,e,r);return Sn(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Xe.a)(t=>{o[i]=t}))),He(1),Object(qe.a)(()=>Object.keys(o).length===i.length?Object(Tt.a)(o):Gt.a))}(t._resolve,t,e,r).pipe(Object(jt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),rr(t,n).resolve),null)))}(t.route,e,r,i)),Object(Xe.a)(()=>o++),He(1),Object(qe.a)(e=>o===n.length?Object(Tt.a)(t):Gt.a))})),Object(Xe.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new tn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Xe.a)(t=>{const e=new an(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),hi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(jt.a)(t=>{const e=function(t,e,n){const r=lr(t,e._root,n?n._root:void 0);return new tr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Xe.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),Object(jt.a)(t=>(new Sr(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Object(Xe.a)({next(){n=!0},complete(){n=!0}}),Ke(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new tn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Me(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=xr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new tn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new en(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(ih){t.reject(ih)}}var i;return Gt.a}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Pr(t),this.config=t.map(Dr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return pr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new mr(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Cn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new mr(n,e,r)}(n);if(o.toRoot())return pr(e.root,new An([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new yr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new yr(t,t===e.root,0)}const r=dr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new yr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?br(s.segmentGroup,s.index,o.commands):vr(s.segmentGroup,s.index,o.commands);return pr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=xr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Ab){e=this.malformedUriErrorHandler(Ab,this.urlSerializer,t)}return e}isActive(t,e){if(xr(t))return En(this.currentUrlTree,t,e);const n=this.parseUrl(t);return En(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ze(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.cc(r.U),r.cc(Rn),r.cc(mi),r.cc(w),r.cc(r.v),r.cc(r.C),r.cc(r.j),r.cc(void 0))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),Oi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Et.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Si(this.skipLocationChange),replaceUrl:Si(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Si(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(wi),r.Tb(nr),r.dc("tabindex"),r.Tb(r.L),r.Tb(r.o))},t.\u0275dir=r.Ob({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.fc("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.Gb]}),t})(),Ci=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new Et.a,this.subscription=t.events.subscribe(t=>{t instanceof Ze&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Si(this.skipLocationChange),replaceUrl:Si(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Si(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(wi),r.Tb(nr),r.Tb(m))},t.\u0275dir=r.Ob({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.fc("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.bc("href",e.href,r.sc),r.Jb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.Gb]}),t})();function Si(t){return""===t||!!t}let Ei=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof Ze&&this.update()})}ngAfterContentInit(){Object(Tt.a)(this.links.changes,this.linksWithHrefs.changes,Object(Tt.a)(null)).pipe(Object(Ae.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(xt.a)(e).pipe(Object(Ae.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(wi),r.Tb(r.o),r.Tb(r.L),r.Tb(r.i),r.Tb(Oi,8),r.Tb(Ci,8))},t.\u0275dir=r.Ob({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Mb(n,Oi,1),r.Mb(n,Ci,1)),2&t){let t;r.oc(t=r.gc())&&(e.links=t),r.oc(t=r.gc())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.Gb]}),t})(),Ti=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.q,this.deactivateEvents=new r.q,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Ii(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(mi),r.Tb(r.X),r.Tb(r.l),r.dc("name"),r.Tb(r.i))},t.\u0275dir=r.Ob({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Ii{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===nr?this.route:t===mi?this.childContexts:this.parent.get(t,e)}}class xi{}class ki{preload(t,e){return Object(Tt.a)(null)}}let Ai=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new pi(e,n,e=>t.triggerEvent(new un(e)),e=>t.triggerEvent(new cn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Yt(t=>t instanceof Ze),Be(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.D);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(xt.a)(n).pipe(Object(Ae.a)(),Object(jt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(Tt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(qe.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.cc(wi),r.cc(r.C),r.cc(r.j),r.cc(r.v),r.cc(xi))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),ji=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Je?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ze&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new pn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.cc(wi),r.cc(z),r.cc(void 0))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();const Pi=new r.u("ROUTER_CONFIGURATION"),Ri=new r.u("ROUTER_FORROOT_GUARD"),Ni=[w,{provide:Rn,useClass:Nn},{provide:wi,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new wi(null,t,e,n,r,i,s,wn(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Rn,mi,w,r.v,r.C,r.j,fi,Pi,[class{},new r.G],[class{},new r.G]]},mi,{provide:nr,useFactory:function(t){return t.routerState.root},deps:[wi]},{provide:r.C,useClass:r.R},Ai,ki,class{preload(t,e){return e().pipe(Me(()=>Object(Tt.a)(null)))}},{provide:Pi,useValue:{enableTracing:!1}}];function Di(){return new r.E("Router",wi)}let Li=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Ni,Vi(e),{provide:Ri,useFactory:Ui,deps:[[wi,new r.G,new r.Q]]},{provide:Pi,useValue:n||{}},{provide:m,useFactory:Mi,deps:[a,[new r.s(v),new r.G],Pi]},{provide:ji,useFactory:Fi,deps:[wi,z,Pi]},{provide:xi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ki},{provide:r.E,multi:!0,useFactory:Di},[qi,{provide:r.d,multi:!0,useFactory:Bi,deps:[qi]},{provide:zi,useFactory:Hi,deps:[qi]},{provide:r.b,multi:!0,useExisting:zi}]]}}static forChild(e){return{ngModule:t,providers:[Vi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.cc(Ri,8),r.cc(wi,8))},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({}),t})();function Fi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ji(t,e,n)}function Mi(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function Ui(t){return"guarded"}function Vi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:fi,multi:!0,useValue:t}]}let qi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Et.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(wi),r=this.injector.get(Pi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Tt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Pi),n=this.injector.get(Ai),i=this.injector.get(ji),o=this.injector.get(wi),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.cc(r.v))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();function Bi(t){return t.appInitializer.bind(t)}function Hi(t){return t.bootstrapListener.bind(t)}const zi=new r.u("Router Initializer");var Yi=n("D0XW"),Xi=n("w1tV");function Wi(t,e){return n=>n.lift(new Ki(t,e))}class Ki{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Gi(t,this.compare,this.keySelector))}}class Gi extends zt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class $i{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Qi(t,this.observables,this.project))}}class Qi extends Oe{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Ee(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Ji{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Zi(t,this.predicate))}}class Zi extends zt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function to(t){return null==t}function eo(t){return"function"==typeof t.set}function no(t,e){return eo(e)?e:t.ref(e)}function ro(t,e){if("string"==typeof t)return e.stringCase();if(eo(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function io(t,e,n="on",r=Yi.b){return new It.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(jt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Xi.a)())}function oo(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function so(t,e){const{payload:n,prevKey:r,key:i}=e,o=oo(t,i),s=function(t,e){if(to(e))return 0;{const n=oo(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function ao(t){return(to(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function uo(t,e,n){return function(t,e,n){return io(t,"value","once",n).pipe(Rt(r=>{const i=[Object(Tt.a)(r)];return e.forEach(e=>i.push(io(t,e,"on",n))),Object(kt.a)(...i).pipe(De(so,[]))}),Wi())}(t,e=ao(e),n)}function co(t,e,n){const r=(e=ao(e)).map(e=>io(t,e,"on",n));return Object(kt.a)(...r)}function lo(t,e){return function(n,r){return ro(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function ho(t,e){return function(){return io(t,"value","on",e)}}n("6Uf2");const fo=new r.u("angularfire2.realtimeDatabaseURL"),po=new r.u("angularfire2.database.use-emulator");let go=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new le.d(i),this.keepUnstableUntilFirst=Object(le.h)(this.schedulers);const a=o,u=Object(le.g)(t,i,e);!St.a.auth&&s&&Object(le.j)(),this.database=Object(le.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>no(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:lo(r,"update"),set:lo(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?ro(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>uo(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>co(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return io(t,"value","on",e).pipe(Object(jt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new $i(t,n))}}(e),Object(jt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Ji(r))),Object(jt.a)(t=>t.actions));var r}(t,co(t,e).pipe(De((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>uo(t,r,n).pipe(Object(jt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>no(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>ho(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ho(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(jt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.cc(le.c),r.cc(le.b,8),r.cc(fo,8),r.cc(r.I),r.cc(r.F),r.cc(po,8),r.cc(he,8))},t.\u0275prov=Object(r.Pb)({factory:function(){return new t(Object(r.cc)(le.c),Object(r.cc)(le.b,8),Object(r.cc)(fo,8),Object(r.cc)(r.I),Object(r.cc)(r.F),Object(r.cc)(po,8),Object(r.cc)(he,8))},token:t,providedIn:"any"}),t})(),mo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:[go]}),t})();function yo(){return t=>t.lift(new vo)}class vo{call(t,e){return e.subscribe(new bo(t))}}class bo extends zt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var _o=n("zIRd"),wo=n("qOnz"),Oo=n("q/0M"),Co=function(t,e){return(Co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function So(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Eo,To="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Io=Io||{},xo=To||self;function ko(){}function Ao(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function jo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Po="closure_uid_"+(1e9*Math.random()>>>0),Ro=0;function No(t,e,n){return t.call.apply(t.bind,arguments)}function Do(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Lo(t,e,n){return(Lo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?No:Do).apply(null,arguments)}function Fo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Mo(){return Date.now()}function Uo(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Vo(){this.j=this.j,this.i=this.i}Vo.prototype.j=!1,Vo.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Po)&&t[Po]||(t[Po]=++Ro)}(this)},Vo.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var qo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Bo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ho(t){return Array.prototype.concat.apply([],arguments)}function zo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Yo(t){return/^[\s\xa0]*$/.test(t)}var Xo,Wo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ko(t,e){return-1!=t.indexOf(e)}function Go(t,e){return t<e?-1:t>e?1:0}t:{var $o=xo.navigator;if($o){var Qo=$o.userAgent;if(Qo){Xo=Qo;break t}}Xo=""}function Jo(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Zo(t){var e={};for(var n in t)e[n]=t[n];return e}var ts="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function es(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ts.length;o++)n=ts[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ns(t){return ns[" "](t),t}ns[" "]=ko;var rs,is,os=Ko(Xo,"Opera"),ss=Ko(Xo,"Trident")||Ko(Xo,"MSIE"),as=Ko(Xo,"Edge"),us=as||ss,cs=Ko(Xo,"Gecko")&&!(Ko(Xo.toLowerCase(),"webkit")&&!Ko(Xo,"Edge"))&&!(Ko(Xo,"Trident")||Ko(Xo,"MSIE"))&&!Ko(Xo,"Edge"),ls=Ko(Xo.toLowerCase(),"webkit")&&!Ko(Xo,"Edge");function hs(){var t=xo.document;return t?t.documentMode:void 0}t:{var ds="",fs=(is=Xo,cs?/rv:([^\);]+)(\)|;)/.exec(is):as?/Edge\/([\d\.]+)/.exec(is):ss?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(is):ls?/WebKit\/(\S+)/.exec(is):os?/(?:Version)[ \/]?(\S+)/.exec(is):void 0);if(fs&&(ds=fs?fs[1]:""),ss){var ps=hs();if(null!=ps&&ps>parseFloat(ds)){rs=String(ps);break t}}rs=ds}var gs={};function ms(t){return function(t,e){var n=gs;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Wo(String(rs)).split("."),r=Wo(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Go(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Go(0==s[2].length,0==a[2].length)||Go(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var ys=xo.document&&ss&&(hs()||parseInt(rs,10))||void 0,vs=!ss||9<=Number(ys),bs=ss&&!ms("9"),_s=function(){if(!xo.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{xo.addEventListener("test",ko,e),xo.removeEventListener("test",ko,e)}catch(n){}return t}();function ws(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Os(t,e){if(ws.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(cs){t:{try{ns(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Cs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ws.prototype.b=function(){this.defaultPrevented=!0},Uo(Os,ws);var Cs={2:"touch",3:"pen",4:"mouse"};Os.prototype.b=function(){Os.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,bs)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ss="closure_listenable_"+(1e6*Math.random()|0),Es=0;function Ts(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Es,this.Y=this.Z=!1}function Is(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function xs(t){this.src=t,this.a={},this.b=0}function ks(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=qo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Is(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function As(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}xs.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=As(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ts(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var js="closure_lm_"+(1e6*Math.random()|0),Ps={};function Rs(t,e,n,r,i){if(r&&r.once)return Ds(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Rs(t,e[o],n,r,i);return null}return n=Hs(n),t&&t[Ss]?t.va(e,n,jo(r)?!!r.capture:!!r,i):Ns(t,e,n,!1,r,i)}function Ns(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=jo(i)?!!i.capture:!!i;if(s&&!vs)return null;var a=qs(t);if(a||(t[js]=a=new xs(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Vs,e=vs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_s||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ms(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ds(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ds(t,e[o],n,r,i);return null}return n=Hs(n),t&&t[Ss]?t.wa(e,n,jo(r)?!!r.capture:!!r,i):Ns(t,e,n,!0,r,i)}function Ls(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ls(t,e[o],n,r,i);else r=jo(r)?!!r.capture:!!r,n=Hs(n),t&&t[Ss]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=As(o=t.a[e],n,r,i))&&(Is(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=qs(t))&&(e=t.a[e.toString()],t=-1,e&&(t=As(e,n,r,i)),(n=-1<t?e[t]:null)&&Fs(n))}function Fs(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ss])ks(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ms(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=qs(e))?(ks(n,t),0==n.b&&(n.src=null,e[js]=null)):Is(t)}}}function Ms(t){return t in Ps?Ps[t]:Ps[t]="on"+t}function Us(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Fs(t),n.call(r,e)}function Vs(t,e){if(t.Y)return!0;if(!vs){if(!e)t:{e=["window","event"];for(var n=xo,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Us(t,e=new Os(e,this))}return Us(t,new Os(e,this))}function qs(t){return(t=t[js])instanceof xs?t:null}var Bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hs(t){return"function"==typeof t?t:(t[Bs]||(t[Bs]=function(e){return t.handleEvent(e)}),t[Bs])}function zs(){Vo.call(this),this.c=new xs(this),this.J=this,this.C=null}function Ys(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ws(e,t);else if(e instanceof ws)e.target=e.target||t;else{var i=e;es(e=new ws(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Xs(s,r,!0,e)&&i}if(i=Xs(s=e.a=t,r,!0,e)&&i,i=Xs(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Xs(s=e.a=n[o],r,!1,e)&&i}function Xs(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ks(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Uo(zs,Vo),zs.prototype[Ss]=!0,(Eo=zs.prototype).addEventListener=function(t,e,n,r){Rs(this,t,e,n,r)},Eo.removeEventListener=function(t,e,n,r){Ls(this,t,e,n,r)},Eo.G=function(){if(zs.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Is(n[r]);delete e.a[t],e.b--}}this.C=null},Eo.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Eo.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ws=xo.JSON.stringify;function Ks(){this.b=this.a=null}var Gs,$s=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Js},function(t){t.reset()});function Qs(){var t=na,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Js(){this.next=this.b=this.a=null}function Zs(t){xo.setTimeout(function(){throw t},0)}function ta(t,e){Gs||function(){var t=xo.Promise.resolve(void 0);Gs=function(){t.then(ra)}}(),ea||(Gs(),ea=!0),na.add(t,e)}Ks.prototype.add=function(t,e){var n=$s.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Js.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Js.prototype.reset=function(){this.next=this.b=this.a=null};var ea=!1,na=new Ks;function ra(){for(var t;t=Qs();){try{t.a.call(t.b)}catch(n){Zs(n)}var e=$s;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ea=!1}function ia(t,e){zs.call(this),this.b=t||1,this.a=e||xo,this.f=Lo(this.Za,this),this.g=Mo()}function oa(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function sa(t,e,n){if("function"==typeof t)n&&(t=Lo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Lo(t.handleEvent,t)}return 2147483647<Number(e)?-1:xo.setTimeout(t,e||0)}function aa(t){t.a=sa(function(){t.a=null,t.c&&(t.c=!1,aa(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Uo(ia,zs),(Eo=ia.prototype).aa=!1,Eo.M=null,Eo.Za=function(){if(this.aa){var t=Mo()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ys(this,"tick"),this.aa&&(oa(this),this.start()))}},Eo.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Mo())},Eo.G=function(){ia.X.G.call(this),oa(this),delete this.a};var ua=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Co(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:aa(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(xo.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Vo);function ca(t){Vo.call(this),this.b=t,this.a={}}Uo(ca,Vo);var la=[];function ha(t,e,n,r){Array.isArray(n)||(n&&(la[0]=n.toString()),n=la);for(var i=0;i<n.length;i++){var o=Rs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function da(t){Jo(t.a,function(t,e){this.a.hasOwnProperty(e)&&Fs(t)},t),t.a={}}function fa(){this.a=!0}function pa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ws(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}ca.prototype.G=function(){ca.X.G.call(this),da(this)},ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fa.prototype.info=function(){};var ga={},ma=null;function ya(){return ma=ma||new zs}function va(t){ws.call(this,ga.Fa,t)}function ba(t){var e=ya();Ys(e,new va(e,t))}function _a(t,e){ws.call(this,ga.STAT_EVENT,t),this.stat=e}function wa(t){var e=ya();Ys(e,new _a(e,t))}function Oa(t){ws.call(this,ga.Ga,t)}function Ca(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return xo.setTimeout(function(){t()},e)}ga.Fa="serverreachability",Uo(va,ws),ga.STAT_EVENT="statevent",Uo(_a,ws),ga.Ga="timingevent",Uo(Oa,ws);var Sa={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ea={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ta(){}function Ia(){}Ta.prototype.a=null;var xa,ka={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Aa(){ws.call(this,"d")}function ja(){ws.call(this,"c")}function Pa(){}function Ra(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ca(this),this.P=Na,this.R=new ia(t=us?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Uo(Aa,ws),Uo(ja,ws),Uo(Pa,Ta),xa=new Pa;var Na=45e3,Da={},La={};function Fa(t,e,n){t.H=1,t.i=ou(Za(e)),t.j=n,t.I=!0,Ma(t,null)}function Ma(t,e){t.u=Mo(),qa(t),t.l=Za(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),vu(n.b,"t",r),t.D=0,t.a=dc(t.g,t.g.C?e:null),0<t.O&&(t.F=new ua(Lo(t.Ca,t,t.a),t.O)),ha(t.J,t.a,"readystatechange",t.Xa),e=t.B?Zo(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ba(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ua(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Va(t,n);if(i==La){4==e&&(t.h=4,wa(14),r=!1),pa(t.c,t.f,null,"[Incomplete Response]");break}if(i==Da){t.h=4,wa(15),pa(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}pa(t.c,t.f,i,null),Xa(t,i)}4==e&&0==n.length&&(t.h=1,wa(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ic(e),e.F=!0,wa(11))):(pa(t.c,t.f,n,"[Invalid Chunked Response]"),Ya(t),za(t))}function Va(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?La:(n=Number(e.substring(n,r)),isNaN(n)?Da:(r+=1)+n>e.length?La:(e=e.substr(r,n),t.D=r+n,e))}function qa(t){t.T=Mo()+t.P,Ba(t,t.P)}function Ba(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ca(Lo(t.Va,t),e)}function Ha(t){t.o&&(xo.clearTimeout(t.o),t.o=null)}function za(t){0==t.g.v||t.A||ac(t.g,t)}function Ya(t){Ha(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,oa(t.R),da(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Xa(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Eu(n.b,t)))if(n.I=t.N,!t.C&&Eu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Gv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;sc(n),Gu(n)}rc(n),wa(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ca(Lo(n.Sa,n),6e3));if(1>=Su(n.b)&&n.ea){try{n.ea()}catch(Gv){}n.ea=void 0}}else cc(n,11)}else if((t.C||n.a==t)&&sc(n),!Yo(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Ko(l,"spdy")||Ko(l,"quic")||Ko(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Tu(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,iu(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Mo()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=hc(u,u.C?u.ga:null,u.fa),f.C){Iu(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(Ha(p),qa(p)),u.a=f}else nc(u);0<n.g.length&&Ju(n)}else"stop"!=i[0]&&"close"!=i[0]||cc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?cc(n,7):Ku(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ba(4)}catch(Gv){}}function Wa(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ao(t)||"string"==typeof t)Bo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ao(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ao(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ka(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ka)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ga(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];$a(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)$a(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function $a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Eo=Ra.prototype).setTimeout=function(t){this.P=t},Eo.Xa=function(t){t=t.target;var e=this.F;e&&3==zu(t)?e.f():this.Ca(t)},Eo.Ca=function(t){try{if(t==this.a)t:{var e=zu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!us&&!this.a.$())){this.A||4!=e||7==n||ba(8==n||0>=r?3:2),Ha(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yo(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,wa(12),Ya(this),za(this);break t}pa(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Xa(this,u)}this.I?(Ua(this,e,o),us&&this.b&&3==e&&(ha(this.J,this.R,"tick",this.Wa),this.R.start())):(pa(this.c,this.f,o,null),Xa(this,o)),4==e&&Ya(this),this.b&&!this.A&&(4==e?ac(this.g,this):(this.b=!1,qa(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,wa(12)):(this.h=0,wa(13)),Ya(this),za(this)}}}catch(c){}},Eo.Wa=function(){if(this.a){var t=zu(this.a),e=this.a.$();this.D<e.length&&(Ha(this),Ua(this,t,e),this.b&&4!=t&&qa(this))}},Eo.cancel=function(){this.A=!0,Ya(this)},Eo.Va=function(){this.o=null;var t=Mo();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(ba(3),wa(17)),Ya(this),this.h=2,za(this)):Ba(this,this.T-t)},(Eo=Ka.prototype).K=function(){Ga(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Eo.L=function(){return Ga(this),this.a.concat()},Eo.get=function(t,e){return $a(this.b,t)?this.b[t]:e},Eo.set=function(t,e){$a(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Eo.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Qa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ja(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ja){this.a=void 0!==e?e:t.a,tu(this,t.f),this.j=t.j,eu(this,t.c),nu(this,t.h),this.g=t.g,e=t.b;var n=new pu;n.c=e.c,e.a&&(n.a=new Ka(e.a),n.b=e.b),ru(this,n),this.i=t.i}else t&&(n=String(t).match(Qa))?(this.a=!!e,tu(this,n[1]||"",!0),this.j=su(n[2]||""),eu(this,n[3]||"",!0),nu(this,n[4]),this.g=su(n[5]||"",!0),ru(this,n[6]||"",!0),this.i=su(n[7]||"")):(this.a=!!e,this.b=new pu(null,this.a))}function Za(t){return new Ja(t)}function tu(t,e,n){t.f=n?su(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function eu(t,e,n){t.c=n?su(e,!0):e}function nu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ru(t,e,n){e instanceof pu?(t.b=e,function(t,e){e&&!t.f&&(gu(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(mu(this,e),vu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=au(e,du)),t.b=new pu(e,t.a))}function iu(t,e,n){t.b.set(e,n)}function ou(t){return iu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Mo()).toString(36)),t}function su(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function au(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,uu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function uu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ja.prototype.toString=function(){var t=[],e=this.f;e&&t.push(au(e,cu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(au(e,cu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(au(n,"/"==n.charAt(0)?hu:lu,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",au(n,fu)),t.join("")};var cu=/[#\/\?@]/g,lu=/[#\?:]/g,hu=/[#\?]/g,du=/[#\?@]/g,fu=/#/g;function pu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function gu(t){t.a||(t.a=new Ka,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function mu(t,e){gu(t),e=bu(t,e),$a(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,$a((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ga(t)))}function yu(t,e){return gu(t),e=bu(t,e),$a(t.a.b,e)}function vu(t,e,n){mu(t,e),0<n.length&&(t.c=null,t.a.set(bu(t,e),zo(n)),t.b+=n.length)}function bu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Eo=pu.prototype).add=function(t,e){gu(this),this.c=null,t=bu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Eo.forEach=function(t,e){gu(this),this.a.forEach(function(n,r){Bo(n,function(n){t.call(e,n,r,this)},this)},this)},Eo.L=function(){gu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Eo.K=function(t){gu(this);var e=[];if("string"==typeof t)yu(this,t)&&(e=Ho(e,this.a.get(bu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ho(e,t[n])}return e},Eo.set=function(t,e){return gu(this),this.c=null,yu(this,t=bu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Eo.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Eo.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var _u=function(){return function(t,e){this.b=t,this.a=e}}();function wu(t){this.g=t||Ou,t=xo.PerformanceNavigationTiming?0<(t=xo.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(xo.ia&&xo.ia.ya&&xo.ia.ya()&&xo.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ou=10;function Cu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Su(t){return t.b?1:t.a?t.a.size:0}function Eu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Tu(t,e){t.a?t.a.add(e):t.b=e}function Iu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function xu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=So(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return zo(t.c)}function ku(){}function Au(){this.a=new ku}function ju(t,e,n){var r=n||"";try{Wa(t,function(t,n){var i=t;jo(t)&&(i=Ws(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Ab){throw e.push(r+"type="+encodeURIComponent("_badmap")),Ab}}function Pu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}wu.prototype.cancel=function(){var t,e;if(this.c=xu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=So(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ku.prototype.stringify=function(t){return xo.JSON.stringify(t,void 0)},ku.prototype.parse=function(t){return xo.JSON.parse(t,void 0)};var Ru=xo.JSON.parse;function Nu(t){zs.call(this),this.headers=new Ka,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Du,this.D=this.F=!1}Uo(Nu,zs);var Du="",Lu=/^https?$/i,Fu=["POST","PUT"];function Mu(t){return"content-type"==t.toLowerCase()}function Uu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Vu(t),Bu(t)}function Vu(t){t.u||(t.u=!0,Ys(t,"complete"),Ys(t,"error"))}function qu(t){if(t.b&&void 0!==Io&&(!t.s[1]||4!=zu(t)||2!=t.W()))if(t.l&&4==zu(t))sa(t.za,0,t);else if(Ys(t,"readystatechange"),4==zu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Qa)[1]||null;if(!o&&xo.self&&xo.self.location){var s=xo.self.location.protocol;o=s.substr(0,s.length-1)}i=!Lu.test(o?o.toLowerCase():"")}e=i}if(e)Ys(t,"complete"),Ys(t,"success");else{t.h=6;try{var a=2<zu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Vu(t)}}finally{Bu(t)}}}function Bu(t,e){if(t.a){Hu(t);var n=t.a,r=t.s[0]?ko:null;t.a=null,t.s=null,e||Ys(t,"ready");try{n.onreadystatechange=r}catch(Ab){}}}function Hu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(xo.clearTimeout(t.m),t.m=null)}function zu(t){return t.a?t.a.readyState:0}function Yu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Jo(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):iu(t,e,n))}function Xu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wu(t){this.pa=0,this.g=[],this.c=new fa,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Xu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Xu("baseRetryDelayMs",5e3,t),this.Ra=Xu("retryDelaySeedMs",1e4,t),this.Ma=Xu("forwardChannelMaxRetries",2,t),this.ma=Xu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new wu(t&&t.concurrentRequestLimit),this.ka=new Au,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ku(t){if($u(t),3==t.v){var e=t.R++,n=Za(t.B);iu(n,"SID",t.J),iu(n,"RID",e),iu(n,"TYPE","terminate"),tc(t,n),(e=new Ra(t,t.c,e,void 0)).H=2,e.i=ou(Za(n)),n=!1,xo.navigator&&xo.navigator.sendBeacon&&(n=xo.navigator.sendBeacon(e.i.toString(),"")),!n&&xo.Image&&((new Image).src=e.i,n=!0),n||(e.a=dc(e.g,null),e.a.ba(e.i)),e.u=Mo(),qa(e)}lc(t)}function Gu(t){t.a&&(ic(t),t.a.cancel(),t.a=null)}function $u(t){Gu(t),t.j&&(xo.clearTimeout(t.j),t.j=null),sc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&xo.clearTimeout(t.h),t.h=null)}function Qu(t,e){t.g.push(new _u(t.Oa++,e)),3==t.v&&Ju(t)}function Ju(t){Cu(t.b)||t.h||(t.h=!0,ta(t.Ba,t),t.u=0)}function Zu(t,e){var n;n=e?e.f:t.R++;var r=Za(t.B);iu(r,"SID",t.J),iu(r,"RID",n),iu(r,"AID",t.P),tc(t,r),t.i&&t.l&&Yu(r,t.i,t.l),n=new Ra(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ec(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Tu(t.b,n),Fa(n,r,e)}function tc(t,e){t.f&&Wa({},function(t,n){iu(e,n,t)})}function ec(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Lo(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{ju(l,s,"req"+c+"_")}catch(zc){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function nc(t){t.a||t.j||(t.T=1,ta(t.Aa,t),t.o=0)}function rc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ca(Lo(t.Aa,t),uc(t,t.o)),t.o++,0))}function ic(t){null!=t.s&&(xo.clearTimeout(t.s),t.s=null)}function oc(t){t.a=new Ra(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Za(t.la);iu(e,"RID","rpc"),iu(e,"SID",t.J),iu(e,"CI",t.H?"0":"1"),iu(e,"AID",t.P),tc(t,e),iu(e,"TYPE","xmlhttp"),t.i&&t.l&&Yu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ou(Za(e)),n.j=null,n.I=!0,Ma(n,t)}function sc(t){null!=t.m&&(xo.clearTimeout(t.m),t.m=null)}function ac(t,e){var n=null;if(t.a==e){sc(t),ic(t),t.a=null;var r=2}else{if(!Eu(t.b,e))return;n=e.s,Iu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Mo()-e.u;var i=t.u;Ys(r=ya(),new Oa(r,n,e,i)),Ju(t)}else nc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Su(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ca(Lo(t.Ba,t,e),uc(t,t.u)),t.u++,0)))}(t,e)||2==r&&rc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:cc(t,5);break;case 4:cc(t,10);break;case 3:cc(t,6);break;default:cc(t,2)}}function uc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function cc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Lo(t.Ya,t);n||(n=new Ja("//www.google.com/images/cleardot.gif"),xo.location&&"http"==xo.location.protocol||tu(n,"https"),ou(n)),function(t,e){var n=new fa;if(xo.Image){var r=new Image;r.onload=Fo(Pu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fo(Pu,n,r,"TestLoadImage: error",!1,e),r.onabort=Fo(Pu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fo(Pu,n,r,"TestLoadImage: timeout",!1,e),xo.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else wa(2);t.v=0,t.f&&t.f.ra(e),lc(t),$u(t)}function lc(t){t.v=0,t.I=-1,t.f&&(0==xu(t.b).length&&0==t.g.length||(t.b.c.length=0,zo(t.g),t.g.length=0),t.f.qa())}function hc(t,e,n){var r=function(t){return t instanceof Ja?Za(t):new Ja(t,void 0)}(n);if(""!=r.c)e&&eu(r,e+"."+r.c),nu(r,r.h);else{var i=xo.location;r=function(t,e,n,r){var i=new Ja(null,void 0);return t&&tu(i,t),e&&eu(i,e),n&&nu(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Jo(t.V,function(t,e){iu(r,e,t)}),n=t.na,(e=t.A)&&n&&iu(r,e,n),iu(r,"VER",t.ha),tc(t,r),r}function dc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nu(t.Na)).F=t.C,e}function fc(){}function pc(){if(ss&&!(10<=Number(ys)))throw Error("Environmental error: no available transport.")}function gc(t,e){zs.call(this),this.a=new Wu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Yo(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new vc(this)}function mc(t){Aa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function yc(){ja.call(this),this.status=1}function vc(t){this.a=t}(Eo=Nu.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:xa),this.a.onreadystatechange=Lo(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Uu(this,o)}t=n||"";var i=new Ka(this.headers);r&&Wa(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Mu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=xo.FormData&&t instanceof xo.FormData,!(0<=qo(Fu,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Hu(this),0<this.o&&((this.D=function(t){return ss&&ms(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Lo(this.xa,this)):this.m=sa(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Uu(this,o)}},Eo.xa=function(){void 0!==Io&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ys(this,"timeout"),this.abort(8))},Eo.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ys(this,"complete"),Ys(this,"abort"),Bu(this))},Eo.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Bu(this,!0)),Nu.X.G.call(this)},Eo.za=function(){this.j||(this.A||this.l||this.g?qu(this):this.Ua())},Eo.Ua=function(){qu(this)},Eo.W=function(){try{return 2<zu(this)?this.a.status:-1}catch(is){return-1}},Eo.$=function(){try{return this.a?this.a.responseText:""}catch(is){return""}},Eo.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ru(e)}},Eo.ua=function(){return this.h},Eo.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Eo=Wu.prototype).ha=8,Eo.v=1,Eo.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ra(this,this.c,t,void 0),r=this.l;if(this.O&&(r?es(r=Zo(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ec(this,n,e),iu(i=Za(this.B),"RID",t),iu(i,"CVER",22),this.A&&iu(i,"X-HTTP-Session-Id",this.A),tc(this,i),this.i&&r&&Yu(i,this.i,r),Tu(this.b,n),this.Ia&&iu(i,"TYPE","init"),this.da?(iu(i,"$req",e),iu(i,"SID","null"),n.U=!0,Fa(n,i,null)):Fa(n,i,e),this.v=2}}else 3==this.v&&(t?Zu(this,t):0==this.g.length||Cu(this.b)||Zu(this))},Eo.Aa=function(){if(this.j=null,oc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ca(Lo(this.Ta,this),t)}},Eo.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,wa(10),Gu(this),oc(this))},Eo.Sa=function(){null!=this.m&&(this.m=null,Gu(this),rc(this),wa(19))},Eo.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),wa(2)):(this.c.info("Failed to ping google.com"),wa(1))},(Eo=fc.prototype).ta=function(){},Eo.sa=function(){},Eo.ra=function(){},Eo.qa=function(){},Eo.Ja=function(){},pc.prototype.a=function(t,e){return new gc(t,e)},Uo(gc,zs),gc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;wa(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=hc(t,null,t.fa),Ju(t)},gc.prototype.close=function(){Ku(this.a)},gc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Qu(this.a,e)}else this.l?((e={}).__data__=Ws(t),Qu(this.a,e)):Qu(this.a,t)},gc.prototype.G=function(){this.a.f=null,delete this.f,Ku(this.a),delete this.a,gc.X.G.call(this)},Uo(mc,Aa),Uo(yc,ja),Uo(vc,fc),vc.prototype.ta=function(){Ys(this.a,"a")},vc.prototype.sa=function(t){Ys(this.a,new mc(t))},vc.prototype.ra=function(t){Ys(this.a,new yc(t))},vc.prototype.qa=function(){Ys(this.a,"b")},pc.prototype.createWebChannel=pc.prototype.a,gc.prototype.send=gc.prototype.h,gc.prototype.open=gc.prototype.g,gc.prototype.close=gc.prototype.close,Sa.NO_ERROR=0,Sa.TIMEOUT=8,Sa.HTTP_ERROR=6,Ea.COMPLETE="complete",Ia.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",zs.prototype.listen=zs.prototype.va,Nu.prototype.listenOnce=Nu.prototype.wa,Nu.prototype.getLastError=Nu.prototype.Qa,Nu.prototype.getLastErrorCode=Nu.prototype.ua,Nu.prototype.getStatus=Nu.prototype.W,Nu.prototype.getResponseJson=Nu.prototype.Pa,Nu.prototype.getResponseText=Nu.prototype.$,Nu.prototype.send=Nu.prototype.ba;var bc=Sa,_c=Ea,wc=ga,Oc=Ia,Cc=Nu,Sc=n("mrSG"),Ec=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ec.o=-1;var Tc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ic=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Sc.c)(e,t),e}(Error),xc=new Oo.b("@firebase/firestore");function kc(){return xc.logLevel}function Ac(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xc.logLevel<=Oo.a.DEBUG){var r=e.map(Rc);xc.debug.apply(xc,Object(Sc.f)(["Firestore (8.4.0): "+t],r))}}function jc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xc.logLevel<=Oo.a.ERROR){var r=e.map(Rc);xc.error.apply(xc,Object(Sc.f)(["Firestore (8.4.0): "+t],r))}}function Pc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xc.logLevel<=Oo.a.WARN){var r=e.map(Rc);xc.warn.apply(xc,Object(Sc.f)(["Firestore (8.4.0): "+t],r))}}function Rc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Ab){return t}}function Nc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.0) INTERNAL ASSERTION FAILED: "+t;throw jc(e),new Error(e)}function Dc(t,e){t||Nc()}function Lc(t,e){return t}function Fc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Mc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Fc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Uc(t,e){return t<e?-1:t>e?1:0}function Vc(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function qc(t){return t+"\0"}var Bc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ic(Tc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ic(Tc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ic(Tc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ic(Tc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Uc(this.nanoseconds,t.nanoseconds):Uc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Hc=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Bc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function zc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Wc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Nc(),void 0===n?n=t.length-e:n>t.length-e&&Nc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Kc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Wc),Gc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Gc.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ic(Tc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ic(Tc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ic(Tc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Wc),Qc=function(){function t(t){this.fields=t,t.sort($c.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Vc(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Jc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Uc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Jc.EMPTY_BYTE_STRING=new Jc("");var Zc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tl(t){if(Dc(!!t),"string"==typeof t){var e=0,n=Zc.exec(t);if(Dc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:el(t.seconds),nanos:el(t.nanos)}}function el(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function nl(t){return"string"==typeof t?Jc.fromBase64String(t):Jc.fromUint8Array(t)}function rl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function il(t){var e=t.mapValue.fields.__previous_value__;return rl(e)?il(e):e}function ol(t){var e=tl(t.mapValue.fields.__local_write_time__.timestampValue);return new Bc(e.seconds,e.nanos)}function sl(t){return null==t}function al(t){return 0===t&&1/t==-1/0}function ul(t){return"number"==typeof t&&Number.isInteger(t)&&!al(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var cl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Kc.fromString(e))},t.fromName=function(e){return new t(Kc.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Kc.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Kc.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Kc(e.slice()))},t}();function ll(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rl(t)?4:10:Nc()}function hl(t,e){var n=ll(t);if(n!==ll(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ol(t).isEqual(ol(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=tl(t.timestampValue),r=tl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return nl(t.bytesValue).isEqual(nl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return el(t.geoPointValue.latitude)===el(e.geoPointValue.latitude)&&el(t.geoPointValue.longitude)===el(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return el(t.integerValue)===el(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=el(t.doubleValue),r=el(e.doubleValue);return n===r?al(n)===al(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Vc(t.arrayValue.values||[],e.arrayValue.values||[],hl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(zc(n)!==zc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hl(n[i],r[i])))return!1;return!0}(t,e);default:return Nc()}}function dl(t,e){return void 0!==(t.values||[]).find(function(t){return hl(t,e)})}function fl(t,e){var n=ll(t),r=ll(e);if(n!==r)return Uc(n,r);switch(n){case 0:return 0;case 1:return Uc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=el(t.integerValue||t.doubleValue),r=el(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return pl(t.timestampValue,e.timestampValue);case 4:return pl(ol(t),ol(e));case 5:return Uc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=nl(t),r=nl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Uc(n[i],r[i]);if(0!==o)return o}return Uc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Uc(el(t.latitude),el(e.latitude));return 0!==n?n:Uc(el(t.longitude),el(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=fl(n[i],r[i]);if(o)return o}return Uc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Uc(r[s],o[s]);if(0!==a)return a;var u=fl(n[r[s]],i[o[s]]);if(0!==u)return u}return Uc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Nc()}}function pl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Uc(t,e);var n=tl(t),r=tl(e),i=Uc(n.seconds,r.seconds);return 0!==i?i:Uc(n.nanos,r.nanos)}function gl(t){return ml(t)}function ml(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=tl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?nl(t.bytesValue).toBase64():"referenceValue"in t?cl.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ml(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ml(t.fields[o])}return e+"}"}(t.mapValue):Nc();var e}function yl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function vl(t){return!!t&&"integerValue"in t}function bl(t){return!!t&&"arrayValue"in t}function _l(t){return!!t&&"nullValue"in t}function wl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ol(t){return!!t&&"mapValue"in t}var Cl=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field($c.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return hl(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ll(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Ol(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay($c.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Ol(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Sl(t){var e=[];return Yc(t.fields||{},function(t,n){var r=new $c([t]);if(Ol(n)){var i=Sl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Qc(e)}var El=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Hc.min(),Cl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Cl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Cl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Cl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Cl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Tl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Il(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Tl(t,e,n,r,i,o,s)}function xl(t){var e=Lc(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+gl(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),sl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ql(e.startAt)),e.endAt&&(n+="|ub:",n+=ql(e.endAt)),e.h=n}return e.h}function kl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Hl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!hl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yl(t.startAt,e.startAt)&&Yl(t.endAt,e.endAt)}function Al(t){return cl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var jl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Sc.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Pl(t,n,r):"array-contains"===n?new Ll(t,r):"in"===n?new Fl(t,r):"not-in"===n?new Ml(t,r):"array-contains-any"===n?new Ul(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Rl(t,n):new Nl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(fl(e,this.value)):null!==e&&ll(this.value)===ll(e)&&this.m(fl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Nc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Pl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=cl.fromName(r.referenceValue),i}return Object(Sc.c)(e,t),e.prototype.matches=function(t){var e=cl.comparator(t.key,this.key);return this.m(e)},e}(jl),Rl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Dl(0,n),r}return Object(Sc.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(jl),Nl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Dl(0,n),r}return Object(Sc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(jl);function Dl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return cl.fromName(t.referenceValue)})}var Ll=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Sc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return bl(e)&&dl(e.arrayValue,this.value)},e}(jl),Fl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Sc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&dl(this.value.arrayValue,e)},e}(jl),Ml=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Sc.c)(e,t),e.prototype.matches=function(t){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!dl(this.value.arrayValue,e)},e}(jl),Ul=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Sc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!bl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return dl(e.value.arrayValue,t)})},e}(jl),Vl=function(t,e){this.position=t,this.before=e};function ql(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return gl(t)}).join(",")}var Bl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Hl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function zl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?cl.comparator(cl.fromName(s.referenceValue),n.key):fl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Yl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!hl(t.position[n],e.position[n]))return!1;return!0}var Xl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Wl(t,e,n,r,i,o,s,a){return new Xl(t,e,n,r,i,o,s,a)}function Kl(t){return new Xl(t)}function Gl(t){return!sl(t.limit)&&"F"===t.limitType}function $l(t){return!sl(t.limit)&&"L"===t.limitType}function Ql(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Jl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Zl(t){return null!==t.collectionGroup}function th(t){var e=Lc(t);if(null===e.p){e.p=[];var n=Jl(e),r=Ql(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Bl(n)),e.p.push(new Bl($c.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Bl($c.keyField(),u))}}}return e.p}function eh(t){var e=Lc(t);if(!e.T)if("F"===e.limitType)e.T=Il(e.path,e.collectionGroup,th(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=th(e);r<i.length;r++){var o=i[r];n.push(new Bl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Vl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Vl(e.startAt.position,!e.startAt.before):null;e.T=Il(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function nh(t,e,n){return new Xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rh(t,e){return kl(eh(t),eh(e))&&t.limitType===e.limitType}function ih(t){return xl(eh(t))+"|lt:"+t.limitType}function oh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+gl(e.value);var e}).join(", ")+"]"),sl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ql(t.startAt)),t.endAt&&(e+=", endAt: "+ql(t.endAt)),"Target("+e+")"}(eh(t))+"; limitType="+t.limitType+")"}function sh(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):cl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!zl(t.startAt,th(t),e)||t.endAt&&zl(t.endAt,th(t),e))}(t,e)}function ah(t){return function(e,n){for(var r=!1,i=0,o=th(t);i<o.length;i++){var s=o[i],a=uh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function uh(t,e,n){var r=t.field.isKeyField()?cl.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?fl(r,i):Nc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Nc()}}function ch(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:al(e)?"-0":e}}function lh(t){return{integerValue:""+t}}function hh(t,e){return ul(e)?lh(e):ch(t,e)}var dh=function(){this._=void 0};function fh(t,e,n){return t instanceof mh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof yh?vh(t,e):t instanceof bh?_h(t,e):function(t,e){var n=gh(t,e),r=Oh(n)+Oh(t.A);return vl(n)&&vl(t.A)?lh(r):ch(t.R,r)}(t,e)}function ph(t,e,n){return t instanceof yh?vh(t,e):t instanceof bh?_h(t,e):n}function gh(t,e){return t instanceof wh?vl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var mh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sc.c)(e,t),e}(dh),yh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Sc.c)(e,t),e}(dh);function vh(t,e){for(var n=Ch(e),r=function(t){n.some(function(e){return hl(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var bh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Sc.c)(e,t),e}(dh);function _h(t,e){for(var n=Ch(e),r=function(t){n=n.filter(function(e){return!hl(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var wh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Sc.c)(e,t),e}(dh);function Oh(t){return el(t.integerValue||t.doubleValue)}function Ch(t){return bl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Sh=function(t,e){this.field=t,this.transform=e},Eh=function(t,e){this.version=t,this.transformResults=e},Th=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ih(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var xh=function(){};function kh(t,e,n){t instanceof Nh?function(t,e,n){var r=t.value.clone(),i=Fh(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Dh?function(t,e,n){if(Ih(t.precondition,e)){var r=Fh(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Lh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Ah(t,e,n){t instanceof Nh?function(t,e,n){if(Ih(t.precondition,e)){var r=t.value.clone(),i=Mh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Rh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Dh?function(t,e,n){if(Ih(t.precondition,e)){var r=Mh(t.fieldTransforms,n,e),i=e.data;i.setAll(Lh(t)),i.setAll(r),e.convertToFoundDocument(Rh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Ih(t.precondition,e)&&e.convertToNoDocument(Hc.min())}(t,e)}function jh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=gh(o.transform,s||null);null!=a&&(null==n&&(n=Cl.empty()),n.set(o.field,a))}return n||null}function Ph(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Vc(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof yh&&e instanceof yh||t instanceof bh&&e instanceof bh?Vc(t.elements,e.elements,hl):t instanceof wh&&e instanceof wh?hl(t.A,e.A):t instanceof mh&&e instanceof mh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Rh(t){return t.isFoundDocument()?t.version:Hc.min()}var Nh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Sc.c)(e,t),e}(xh),Dh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Sc.c)(e,t),e}(xh);function Lh(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Fh(t,e,n){var r=new Map;Dc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ph(s,a,n[i]))}return r}function Mh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,fh(a,u,e))}return r}var Uh,Vh,qh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Sc.c)(e,t),e}(xh),Bh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Sc.c)(e,t),e}(xh),Hh=function(t){this.count=t};function zh(t){switch(t){case Tc.OK:return Nc();case Tc.CANCELLED:case Tc.UNKNOWN:case Tc.DEADLINE_EXCEEDED:case Tc.RESOURCE_EXHAUSTED:case Tc.INTERNAL:case Tc.UNAVAILABLE:case Tc.UNAUTHENTICATED:return!1;case Tc.INVALID_ARGUMENT:case Tc.NOT_FOUND:case Tc.ALREADY_EXISTS:case Tc.PERMISSION_DENIED:case Tc.FAILED_PRECONDITION:case Tc.ABORTED:case Tc.OUT_OF_RANGE:case Tc.UNIMPLEMENTED:case Tc.DATA_LOSS:return!0;default:return Nc()}}function Yh(t){if(void 0===t)return jc("GRPC error has no .code"),Tc.UNKNOWN;switch(t){case Uh.OK:return Tc.OK;case Uh.CANCELLED:return Tc.CANCELLED;case Uh.UNKNOWN:return Tc.UNKNOWN;case Uh.DEADLINE_EXCEEDED:return Tc.DEADLINE_EXCEEDED;case Uh.RESOURCE_EXHAUSTED:return Tc.RESOURCE_EXHAUSTED;case Uh.INTERNAL:return Tc.INTERNAL;case Uh.UNAVAILABLE:return Tc.UNAVAILABLE;case Uh.UNAUTHENTICATED:return Tc.UNAUTHENTICATED;case Uh.INVALID_ARGUMENT:return Tc.INVALID_ARGUMENT;case Uh.NOT_FOUND:return Tc.NOT_FOUND;case Uh.ALREADY_EXISTS:return Tc.ALREADY_EXISTS;case Uh.PERMISSION_DENIED:return Tc.PERMISSION_DENIED;case Uh.FAILED_PRECONDITION:return Tc.FAILED_PRECONDITION;case Uh.ABORTED:return Tc.ABORTED;case Uh.OUT_OF_RANGE:return Tc.OUT_OF_RANGE;case Uh.UNIMPLEMENTED:return Tc.UNIMPLEMENTED;case Uh.DATA_LOSS:return Tc.DATA_LOSS;default:return Nc()}}(Vh=Uh||(Uh={}))[Vh.OK=0]="OK",Vh[Vh.CANCELLED=1]="CANCELLED",Vh[Vh.UNKNOWN=2]="UNKNOWN",Vh[Vh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vh[Vh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vh[Vh.NOT_FOUND=5]="NOT_FOUND",Vh[Vh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vh[Vh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vh[Vh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vh[Vh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vh[Vh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vh[Vh.ABORTED=10]="ABORTED",Vh[Vh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vh[Vh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vh[Vh.INTERNAL=13]="INTERNAL",Vh[Vh.UNAVAILABLE=14]="UNAVAILABLE",Vh[Vh.DATA_LOSS=15]="DATA_LOSS";var Xh=function(){function t(t,e){this.comparator=t,this.root=e||Kh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Wh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Wh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Wh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Wh(this.root,t,this.comparator,!0)},t}(),Wh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Kh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Nc();if(this.right.isRed())throw Nc();var t=this.left.check();if(t!==this.right.check())throw Nc();return t+(this.isRed()?0:1)},t}();Kh.EMPTY=null,Kh.RED=!0,Kh.BLACK=!1,Kh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Nc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Nc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Nc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Nc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Nc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Kh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Gh=function(){function t(t){this.comparator=t,this.data=new Xh(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new $h(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new $h(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),$h=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Qh=new Xh(cl.comparator);function Jh(){return Qh}var Zh=new Xh(cl.comparator);function td(){return Zh}var ed=new Xh(cl.comparator);function nd(){return ed}var rd=new Gh(cl.comparator);function id(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=rd,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var od=new Gh(Uc);function sd(){return od}var ad=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ud.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Hc.min(),r,sd(),Jh(),id())},t}(),ud=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Jc.EMPTY_BYTE_STRING,n,id(),id(),id())},t}(),cd=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ld=function(t,e){this.targetId=t,this.V=e},hd=function(t,e,n,r){void 0===n&&(n=Jc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},dd=function(){function t(){this.S=0,this.D=gd(),this.C=Jc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=id(),e=id(),n=id();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Nc()}}),new ud(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=gd()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),fd=function(){function t(t){this.W=t,this.G=new Map,this.H=Jh(),this.J=pd(),this.Y=new Gh(Uc)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Nc()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Al(i))if(0===n){var o=new cl(i.path);this.tt(e,o,El.newNoDocument(o,Hc.min()))}else Dc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Al(o.target)){var s=new cl(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,El.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=id();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new ad(t,n,this.Y,this.H,r);return this.H=Jh(),this.J=pd(),this.Y=new Gh(Uc),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new dd,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Gh(Uc),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ac("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new dd),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function pd(){return new Xh(cl.comparator)}function gd(){return new Xh(cl.comparator)}var md={asc:"ASCENDING",desc:"DESCENDING"},yd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vd=function(t,e){this.databaseId=t,this.I=e};function bd(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function _d(t,e){return t.I?e.toBase64():e.toUint8Array()}function wd(t,e){return bd(t,e.toTimestamp())}function Od(t){return Dc(!!t),Hc.fromTimestamp(function(t){var e=tl(t);return new Bc(e.seconds,e.nanos)}(t))}function Cd(t,e){return function(t){return new Kc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Sd(t){var e=Kc.fromString(t);return Dc(Kd(e)),e}function Ed(t,e){return Cd(t.databaseId,e.path)}function Td(t,e){var n=Sd(e);if(n.get(1)!==t.databaseId.projectId)throw new Ic(Tc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ic(Tc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new cl(Ad(n))}function Id(t,e){return Cd(t.databaseId,e)}function xd(t){var e=Sd(t);return 4===e.length?Kc.emptyPath():Ad(e)}function kd(t){return new Kc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ad(t){return Dc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function jd(t,e,n){return{name:Ed(t,e),fields:n.toProto().mapValue.fields}}function Pd(t,e,n){var r=Td(t,e.name),i=Od(e.updateTime),o=new Cl({mapValue:{fields:e.fields}}),s=El.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Rd(t,e){var n;if(e instanceof Nh)n={update:jd(t,e.key,e.value)};else if(e instanceof qh)n={delete:Ed(t,e.key)};else if(e instanceof Dh)n={update:jd(t,e.key,e.data),updateMask:Wd(e.fieldMask)};else{if(!(e instanceof Bh))return Nc();n={verify:Ed(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof mh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Nc()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:wd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Nc()}(t,e.precondition)),n}function Nd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Th.updateTime(Od(t.updateTime)):void 0!==t.exists?Th.exists(t.exists):Th.none()}(e.currentDocument):Th.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Dc("REQUEST_TIME"===e.setToServerValue),n=new mh):"appendMissingElements"in e?n=new yh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new bh(e.removeAllFromArray.values||[]):"increment"in e?n=new wh(t,e.increment):Nc();var r=$c.fromServerFormat(e.fieldPath);return new Sh(r,n)}(t,e)}):[];if(e.update){var i=Td(t,e.update.name),o=new Cl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Qc((t.fieldPaths||[]).map(function(t){return $c.fromServerFormat(t)}))}(e.updateMask);return new Dh(i,o,s,n,r)}return new Nh(i,o,n,r)}if(e.delete){var a=Td(t,e.delete);return new qh(a,n)}if(e.verify){var u=Td(t,e.verify);return new Bh(u,n)}return Nc()}function Dd(t,e){return{documents:[Id(t,e.path)]}}function Ld(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Id(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Id(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(wl(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NAN"}};if(_l(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(wl(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NOT_NAN"}};if(_l(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hd(t.field),op:Bd(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Hd(t.field),direction:qd(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||sl(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ud(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ud(e.endAt)),n}function Fd(t){var e=xd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Dc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Md(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Bl(zd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return sl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Vd(n.startAt));var l=null;return n.endAt&&(l=Vd(n.endAt)),Wl(e,i,a,s,u,"F",c,l)}function Md(t){return t?void 0!==t.unaryFilter?[Xd(t)]:void 0!==t.fieldFilter?[Yd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Md(t)}).reduce(function(t,e){return t.concat(e)}):Nc():[]}function Ud(t){return{before:t.before,values:t.position}}function Vd(t){return new Vl(t.values||[],!!t.before)}function qd(t){return md[t]}function Bd(t){return yd[t]}function Hd(t){return{fieldPath:t.canonicalString()}}function zd(t){return $c.fromServerFormat(t.fieldPath)}function Yd(t){return jl.create(zd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Nc()}}(t.fieldFilter.op),t.fieldFilter.value)}function Xd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=zd(t.unaryFilter.field);return jl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=zd(t.unaryFilter.field);return jl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=zd(t.unaryFilter.field);return jl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=zd(t.unaryFilter.field);return jl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Nc()}}function Wd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Kd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Gd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Qd(e)),e=$d(t.get(n),e);return Qd(e)}function $d(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Qd(t){return t+"\x01\x01"}function Jd(t){var e=t.length;if(Dc(e>=2),2===e)return Dc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Kc.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Nc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Nc()}o=s+2}return new Kc(r)}var Zd=function(t,e){this.seconds=t,this.nanoseconds=e},tf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};tf.store="owner",tf.key="owner";var ef=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ef.store="mutationQueues",ef.keyPath="userId";var nf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};nf.store="mutations",nf.keyPath="batchId",nf.userMutationsIndex="userMutationsIndex",nf.userMutationsKeyPath=["userId","batchId"];var rf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Gd(e)]},t.key=function(t,e,n){return[t,Gd(e),n]},t}();rf.store="documentMutations",rf.PLACEHOLDER=new rf;var of=function(t,e){this.path=t,this.readTime=e},sf=function(t,e){this.path=t,this.version=e},af=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};af.store="remoteDocuments",af.readTimeIndex="readTimeIndex",af.readTimeIndexPath="readTime",af.collectionReadTimeIndex="collectionReadTimeIndex",af.collectionReadTimeIndexPath=["parentPath","readTime"];var uf=function(t){this.byteSize=t};uf.store="remoteDocumentGlobal",uf.key="remoteDocumentGlobalKey";var cf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};cf.store="targets",cf.keyPath="targetId",cf.queryTargetsIndexName="queryTargetsIndex",cf.queryTargetsKeyPath=["canonicalId","targetId"];var lf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};lf.store="targetDocuments",lf.keyPath=["targetId","path"],lf.documentTargetsIndex="documentTargetsIndex",lf.documentTargetsKeyPath=["path","targetId"];var hf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};hf.key="targetGlobalKey",hf.store="targetGlobal";var df=function(t,e){this.collectionId=t,this.parent=e};df.store="collectionParents",df.keyPath=["collectionId","parent"];var ff=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ff.store="clientMetadata",ff.keyPath="clientId";var pf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};pf.store="bundles",pf.keyPath="bundleId";var gf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};gf.store="namedQueries",gf.keyPath="name";var mf=Object(Sc.f)(Object(Sc.f)([],Object(Sc.f)(Object(Sc.f)([],Object(Sc.f)(Object(Sc.f)([],Object(Sc.f)(Object(Sc.f)([],[ef.store,nf.store,rf.store,af.store,cf.store,tf.store,hf.store,lf.store]),[ff.store])),[uf.store])),[df.store])),[pf.store,gf.store]),yf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vf=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),bf=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},_f=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Nc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),wf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new bf,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Sf(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=kf(e.target.error);n.ft.reject(new Sf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Sf(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ac("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Tf(e)},t}(),Of=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(wo.o)())&&jc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ac("SimpleDb","Removing database:",t),If(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(wo.o)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n=this;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Ac("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Sf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ic(Tc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Sf(t,n))},i.onupgradeneeded=function(t){Ac("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Ac("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Sc.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Sc.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Sc.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=wf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),_f.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Ac("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Cf=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return If(this.Pt.delete())},t}(),Sf=function(t){function e(e,n){var r=this;return(r=t.call(this,Tc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Sc.c)(e,t),e}(Ic);function Ef(t){return"IndexedDbTransactionError"===t.name}var Tf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ac("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ac("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),If(n)},t.prototype.add=function(t){return Ac("SimpleDb","ADD",this.store.name,t,t),If(this.store.add(t))},t.prototype.get=function(t){var e=this;return If(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Ac("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Ac("SimpleDb","DELETE",this.store.name,t),If(this.store.delete(t))},t.prototype.count=function(){return Ac("SimpleDb","COUNT",this.store.name),If(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Ac("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new _f(function(n,r){e.onerror=function(t){var e=kf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new _f(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Cf(i),s=e(i.primaryKey,i.value,o);if(s instanceof _f){var a=s.catch(function(t){return o.done(),_f.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return _f.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function If(t){return new _f(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=kf(t.target.error);n(e)}})}var xf=!1;function kf(t){var e=Of._t(Object(wo.o)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ic("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return xf||(xf=!0,setTimeout(function(){throw r},0)),r}}return t}var Af=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Sc.c)(e,t),e}(vf);function jf(t,e){var n=Lc(t);return Of.It(n.Mt,e)}var Pf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&kh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Ah(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Ah(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Hc.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},id())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Vc(this.mutations,t.mutations,function(t,e){return Ph(t,e)})&&Vc(this.baseMutations,t.baseMutations,function(t,e){return Ph(t,e)})},t}(),Rf=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Dc(e.mutations.length===r.length);for(var i=nd(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Nf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Hc.min()),void 0===o&&(o=Hc.min()),void 0===s&&(s=Jc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Df=function(t){this.Lt=t};function Lf(t,e){if(e.document)return Pd(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=cl.fromSegments(e.noDocument.path),r=qf(e.noDocument.readTime),i=El.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=cl.fromSegments(e.unknownDocument.path);return r=qf(e.unknownDocument.version),El.newUnknownDocument(o,r)}return Nc()}function Ff(t,e,n){var r=Mf(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ed(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:bd(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new af(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Vf(e.version);return s=e.hasCommittedMutations,new af(null,new of(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Vf(e.version);return new af(new sf(c,l),null,null,!0,r,i)}return Nc()}function Mf(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Uf(t){var e=new Bc(t[0],t[1]);return Hc.fromTimestamp(e)}function Vf(t){var e=t.toTimestamp();return new Zd(e.seconds,e.nanoseconds)}function qf(t){var e=new Bc(t.seconds,t.nanoseconds);return Hc.fromTimestamp(e)}function Bf(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Nd(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Nd(t.Lt,e)}),o=Bc.fromMillis(e.localWriteTimeMs);return new Pf(e.batchId,o,n,i)}function Hf(t){var e,n,r=qf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?qf(t.lastLimboFreeSnapshotVersion):Hc.min();return void 0!==t.query.documents?(Dc(1===(n=t.query).documents.length),e=eh(Kl(xd(n.documents[0])))):e=function(t){return eh(Fd(t))}(t.query),new Nf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Jc.fromBase64String(t.resumeToken))}function zf(t,e){var n,r=Vf(e.snapshotVersion),i=Vf(e.lastLimboFreeSnapshotVersion);n=Al(e.target)?Dd(t.Lt,e.target):Ld(t.Lt,e.target);var o=e.resumeToken.toBase64();return new cf(e.targetId,xl(e.target),r,o,e.sequenceNumber,i,n)}function Yf(t){var e=Fd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?nh(e,e.limit,"L"):e}var Xf=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Wf(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:qf(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Wf(t).put({bundleId:(n=e).id,createTime:Vf(Od(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Kf(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Yf(e.bundledQuery),readTime:qf(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Kf(t).put(function(t){return{name:t.name,readTime:Vf(Od(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Wf(t){return jf(t,pf.store)}function Kf(t){return jf(t,gf.store)}var Gf=function(){function t(){this.Bt=new $f}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),_f.resolve()},t.prototype.getCollectionParents=function(t,e){return _f.resolve(this.Bt.getEntries(e))},t}(),$f=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Gh(Kc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Gh(Kc.comparator)).toArray()},t}(),Qf=function(){function t(){this.qt=new $f}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Gd(i)};return Jf(t).put(o)}return _f.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[qc(e),""],!1,!0);return Jf(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Jd(o.parent))}return n})},t}();function Jf(t){return jf(t,df.store)}var Zf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ep(t,e,n){var r=t.store(nf.store),i=t.store(rf.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Dc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=rf.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return _f.waitFor(o).next(function(){return c})}function np(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Nc();e=t.noDocument}return JSON.stringify(e).length}tp.DEFAULT_COLLECTION_PERCENTILE=10,tp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tp.DEFAULT=new tp(41943040,tp.DEFAULT_COLLECTION_PERCENTILE,tp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tp.DISABLED=new tp(-1,0,0);var rp=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Dc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return op(t).Ot({index:nf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=sp(t),s=op(t);return s.add({}).next(function(a){Dc("number"==typeof a);for(var u=new Pf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Rd(t.Lt,e)}),i=n.mutations.map(function(e){return Rd(t.Lt,e)});return new nf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Gh(function(t,e){return Uc(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=rf.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,rf.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),_f.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return op(t).get(e).next(function(t){return t?(Dc(t.userId===n.userId),Bf(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?_f.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return op(t).Ot({index:nf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Dc(e.batchId>=r),o=Bf(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return op(t).Ot({index:nf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return op(t).Nt(nf.userMutationsIndex,n).next(function(t){return t.map(function(t){return Bf(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=rf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return sp(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=Jd(r[1]);if(a===n.userId&&e.path.isEqual(c))return op(t).get(u).next(function(t){if(!t)throw Nc();Dc(t.userId===n.userId),o.push(Bf(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Gh(Uc),i=[];return e.forEach(function(e){var o=rf.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=sp(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=Jd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),_f.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=rf.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Gh(Uc);return sp(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=Jd(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(op(t).get(e).next(function(t){if(null===t)throw Nc();Dc(t.userId===n.userId),r.push(Bf(n.R,t))}))}),_f.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return ep(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),_f.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return _f.resolve();var r=IDBKeyRange.lowerBound(rf.prefixForUser(e.userId)),i=[];return sp(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=Jd(t[1]);i.push(o)}else r.done()}).next(function(){Dc(0===i.length)})})},t.prototype.containsKey=function(t,e){return ip(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ap(t).get(this.userId).next(function(t){return t||new ef(e.userId,-1,"")})},t}();function ip(t,e,n){var r=rf.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return sp(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function op(t){return jf(t,nf.store)}function sp(t){return jf(t,rf.store)}function ap(t){return jf(t,ef.store)}var up=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),cp=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new up(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Hc.fromTimestamp(new Bc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return lp(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Dc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return lp(t).Ot(function(s,a){var u=Hf(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return _f.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return lp(t).Ot(function(t,n){var r=Hf(n);e(r)})},t.prototype.Xt=function(t){return hp(t).get(hf.key).next(function(t){return Dc(null!==t),t})},t.prototype.Zt=function(t,e){return hp(t).put(hf.key,e)},t.prototype.te=function(t,e){return lp(t).put(zf(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=xl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return lp(t).Ot({range:r,index:cf.queryTargetsIndexName},function(t,n,r){var o=Hf(n);kl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=dp(t);return e.forEach(function(e){var s=Gd(e.path);i.push(o.put(new lf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),_f.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=dp(t);return _f.forEach(e,function(e){var o=Gd(e.path);return _f.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=dp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=dp(t),i=id();return r.Ot({range:n,kt:!0},function(t,e,n){var r=Jd(t[1]),o=new cl(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Gd(e.path),r=IDBKeyRange.bound([n],[qc(n)],!1,!0),i=0;return dp(t).Ot({index:lf.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return lp(t).get(e).next(function(t){return t?Hf(t):null})},t}();function lp(t){return jf(t,cf.store)}function hp(t){return jf(t,hf.store)}function dp(t){return jf(t,lf.store)}function fp(t){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(e){if(t.code!==Tc.FAILED_PRECONDITION||t.message!==yf)throw t;return Ac("LocalStore","Unexpectedly lost primary lease"),[2]})})}function pp(t,e){var n=t[1],r=e[1],i=Uc(t[0],e[0]);return 0===i?Uc(n,r):i}var gp=function(){function t(t){this.ne=t,this.buffer=new Gh(pp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();pp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),mp=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ac("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Sc.b)(e,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ef(e=n.sent())?(Ac("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,fp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),yp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return _f.resolve(Ec.o);var r=new gp(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ac("LruGarbageCollector","Garbage collection skipped; disabled"),_f.resolve(Zf)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Ac("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Zf):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ac("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),kc()<=Oo.a.DEBUG&&Ac("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),_f.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),vp=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new yp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return bp(t,n)},t.prototype.removeReference=function(t,e,n){return bp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return bp(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return ap(t).$t(function(r){return ip(t,r,e).next(function(t){return t&&(n=!0),_f.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),dp(t).delete([0,Gd(s.path)])})});i.push(u)}}).next(function(){return _f.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return bp(t,e)},t.prototype.we=function(t,e){var n,r=dp(t),i=Ec.o;return r.Ot({index:lf.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ec.o&&e(new cl(Jd(n)),i),i=s,n=o):i=Ec.o}).next(function(){i!==Ec.o&&e(new cl(Jd(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function bp(t,e){return dp(t).put(function(t,e){return new lf(0,Gd(t.path),e)}(e,t.currentSequenceNumber))}var _p=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Yc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Xc(this.inner)},t}(),wp=function(){function t(){this.changes=new _p(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Hc.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:El.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?_f.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Op=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ep(t).put(Tp(e),n)},t.prototype.removeEntry=function(t,e){var n=Ep(t),r=Tp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Ep(t).get(Tp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Ep(t).get(Tp(e)).next(function(t){return{document:n.ye(e,t),size:np(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Jh();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Jh(),i=new Xh(cl.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,np(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return _f.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ep(t).Ot({range:r},function(t,e,r){for(var s=cl.fromSegments(t);o&&cl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Jh(),o=e.path.length+1,s={};if(n.isEqual(Hc.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Mf(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=af.collectionReadTimeIndex}return Ep(t).Ot(s,function(t,n,s){if(t.length===o){var a=Lf(r.R,n);e.path.isPrefixOf(a.key.path)?sh(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Cp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Sp(t).get(uf.key).next(function(t){return Dc(!!t),t})},t.prototype.me=function(t,e){return Sp(t).put(uf.key,e)},t.prototype.ye=function(t,e){if(e){var n=Lf(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Hc.min()))return n}return El.newInvalidDocument(t)},t}(),Cp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new _p(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Sc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Gh(function(t,e){return Uc(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Ff(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=np(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Ff(e.Ie.R,El.newNoDocument(o,Hc.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),_f.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(wp);function Sp(t){return jf(t,uf.store)}function Ep(t){return jf(t,af.store)}function Tp(t){return t.path.toArray()}var Ip=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Dc(n<r&&n>=0&&r<=11);var o=new wf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(tf.store)}(t),function(t){t.createObjectStore(ef.store,{keyPath:ef.keyPath}),t.createObjectStore(nf.store,{keyPath:nf.keyPath,autoIncrement:!0}).createIndex(nf.userMutationsIndex,nf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(rf.store)}(t),xp(t),function(t){t.createObjectStore(af.store)}(t));var s=_f.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(lf.store),t.deleteObjectStore(cf.store),t.deleteObjectStore(hf.store)}(t),xp(t)),s=s.next(function(){return function(t){var e=t.store(hf.store),n=new hf(0,0,Hc.min().toTimestamp(),0);return e.put(hf.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(nf.store).Nt().next(function(n){t.deleteObjectStore(nf.store),t.createObjectStore(nf.store,{keyPath:nf.keyPath,autoIncrement:!0}).createIndex(nf.userMutationsIndex,nf.userMutationsKeyPath,{unique:!0});var r=e.store(nf.store),i=n.map(function(t){return r.put(t)});return _f.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(ff.store,{keyPath:ff.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(uf.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(af.store);e.createIndex(af.readTimeIndex,af.readTimeIndexPath,{unique:!1}),e.createIndex(af.collectionReadTimeIndex,af.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(pf.store,{keyPath:pf.keyPath})}(t),function(t){t.createObjectStore(gf.store,{keyPath:gf.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(af.store).Ot(function(t,n){e+=np(n)}).next(function(){var n=new uf(e);return t.store(uf.store).put(uf.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(ef.store),r=t.store(nf.store);return n.Nt().next(function(n){return _f.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(nf.userMutationsIndex,i).next(function(r){return _f.forEach(r,function(r){Dc(r.userId===n.userId);var i=Bf(e.R,r);return ep(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(lf.store),n=t.store(af.store);return t.store(hf.store).get(hf.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Kc(n),s=function(t){return[0,Gd(t)]}(o);r.push(e.get(s).next(function(n){return n?_f.resolve():function(n){return e.put(new lf(0,Gd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return _f.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(df.store,{keyPath:df.keyPath});var n=e.store(df.store),r=new $f,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Gd(i)})}};return e.store(af.store).Ot({kt:!0},function(t,e){var n=new Kc(t);return i(n.popLast())}).next(function(){return e.store(rf.store).Ot({kt:!0},function(t,e){var n=Jd(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(cf.store);return n.Ot(function(t,r){var i=Hf(r),o=zf(e.R,i);return n.put(o)})},t}();function xp(t){t.createObjectStore(lf.store,{keyPath:lf.keyPath}).createIndex(lf.documentTargetsIndex,lf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(cf.store,{keyPath:cf.keyPath}).createIndex(cf.queryTargetsIndexName,cf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(hf.store)}var kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ap=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ic(Tc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vp(this,i),this.Le=n+"main",this.R=new Df(u),this.Be=new Of(this.Le,11,new Ip(this.R)),this.qe=new cp(this.referenceDelegate,this.R),this.Ut=new Qf,this.Ue=function(t,e){return new Op(t,e)}(this.R,this.Ut),this.Qe=new Xf,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&jc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ic(Tc.FAILED_PRECONDITION,kp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Ec(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Sc.b)(e,void 0,void 0,function(){return Object(Sc.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Sc.b)(e,void 0,void 0,function(){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Sc.b)(e,void 0,void 0,function(){return Object(Sc.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Pp(e).put(new ff(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Ef(e))return Ac("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ac("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return jp(t).get(tf.key).next(function(t){return _f.resolve(e.tn(t))})},t.prototype.en=function(t){return Pp(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=jf(t,ff.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return _f.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?_f.resolve(!0):jp(t).get(tf.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ic(Tc.FAILED_PRECONDITION,kp);return!1}}return!(!e.networkEnabled||!e.inForeground)||Pp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Ac("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t=this;return Object(Sc.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[tf.store,ff.store],function(e){var n=new Af(e,Ec.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Pp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return rp.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Ac("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",mf,function(o){return r=new Af(o,i.Ne?i.Ne.next():Ec.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw jc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Ic(Tc.FAILED_PRECONDITION,yf);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return jp(t).get(tf.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ic(Tc.FAILED_PRECONDITION,kp)})},t.prototype.Ze=function(t){var e=new tf(this.clientId,this.allowTabSynchronization,Date.now());return jp(t).put(tf.key,e)},t.yt=function(){return Of.yt()},t.prototype.Xe=function(t){var e=this,n=jp(t);return n.get(tf.key).next(function(t){return e.tn(t)?(Ac("IndexedDbPersistence","Releasing primary lease."),n.delete(tf.key)):_f.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(jc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Ac("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return jc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){jc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function jp(t){return jf(t,tf.store)}function Pp(t){return jf(t,ff.store)}function Rp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Np=function(t,e){this.progress=t,this.wn=e},Dp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return cl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Zl(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new cl(e)).next(function(t){var e=td();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=td();return this.Ut.getCollectionParents(t,i).next(function(s){return _f.forEach(s,function(s){var a=function(t,e){return new Xl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=El.newInvalidDocument(c),r=r.insert(c,l)),Ah(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){sh(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=id(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Dh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Lp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=id(),i=id(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Fp=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Hc.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Gl(e)||$l(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(kc()<=Oo.a.DEBUG&&Ac("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),oh(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Gh(ah(t));return e.forEach(function(e,r){sh(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return kc()<=Oo.a.DEBUG&&Ac("QueryEngine","Using full collection scan to execute query:",oh(e)),this.Sn.getDocumentsMatchingQuery(t,e,Hc.min())},t}(),Mp=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Xh(Uc),this.kn=new _p(function(t){return xl(t)},kl),this.On=Hc.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Dp(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Up(t,e,n,r){return new Mp(t,e,n,r)}function Vp(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Sc.d)(this,function(s){switch(s.label){case 0:return n=Lc(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Dp(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=id(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function qp(t,e){var n=Lc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=_f.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Dc(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Bp(t){var e=Lc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Hp(t,e){var n=Lc(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Dc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Jh();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(zp(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Hc.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return _f.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function zp(t,e,n,r,i){var o=id();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Jh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Hc.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Ac("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Yp(t,e){var n=Lc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Xp(t,e){var n=Lc(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?_f.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Nf(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Wp(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Sc.d)(this,function(a){switch(a.label){case 0:r=Lc(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ef(s=a.sent()))throw s;return Ac("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Kp(t,e,n){var r=Lc(t),i=Hc.min(),o=id();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Lc(t),i=r.kn.get(n);return void 0!==i?_f.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,eh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Hc.min(),n?o:id())}).next(function(t){return{documents:t,Bn:o}})})}function Gp(t,e){var n=Lc(t),r=Lc(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function $p(t){var e=Lc(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Lc(t),i=Jh(),o=Mf(n),s=Ep(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:af.readTimeIndex,range:a},function(t,e){var n=Lf(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Uf(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function Qp(t){return Object(Sc.b)(this,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){return[2,(e=Lc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Ep(t),n=Hc.min();return e.Ot({index:af.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Uf(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Jp(t,e,n,r){return Object(Sc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Sc.d)(this,function(p){switch(p.label){case 0:for(i=Lc(t),o=id(),s=Jh(),a=nd(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Xp(i,function(t){return eh(Kl(Kc.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return zp(t,d,s,Hc.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Zp(t,e,n){return void 0===n&&(n=id()),Object(Sc.b)(this,void 0,void 0,function(){var r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return[4,Xp(t,eh(Yf(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Lc(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Od(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Jc.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var tg=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return _f.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Od(n.createTime)}),_f.resolve()},t.prototype.getNamedQuery=function(t,e){return _f.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Yf(t.bundledQuery),readTime:Od(t.readTime)}}(e)),_f.resolve()},t}(),eg=function(){function t(){this.Wn=new Gh(ng.Gn),this.zn=new Gh(ng.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ng(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new ng(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new cl(new Kc([])),r=new ng(n,t),i=new ng(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new cl(new Kc([])),n=new ng(e,t),r=new ng(e,t+1),i=id();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new ng(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ng=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return cl.comparator(t.key,e.key)||Uc(t.ns,e.ns)},t.Hn=function(t,e){return Uc(t.ns,e.ns)||cl.comparator(t.key,e.key)},t}(),rg=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Gh(ng.Gn)}return t.prototype.checkEmpty=function(t){return _f.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Pf(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new ng(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return _f.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return _f.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return _f.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return _f.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return _f.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ng(e,0),i=new ng(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),_f.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Gh(Uc);return e.forEach(function(t){var e=new ng(t,0),i=new ng(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),_f.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;cl.isDocumentKey(i)||(i=i.child(""));var o=new ng(new cl(i),0),s=new Gh(Uc);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),_f.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Dc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return _f.forEach(e.mutations,function(i){var o=new ng(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new ng(e,0),r=this.rs.firstAfterOrEqual(n);return _f.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return _f.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ig=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Xh(cl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return _f.resolve(n?n.document.clone():El.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Jh();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():El.newInvalidDocument(t))}),_f.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Jh(),i=new cl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||sh(e,u)&&(r=r.insert(u.key,u.clone()))}return _f.resolve(r)},t.prototype.fs=function(t,e){return _f.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new og(this)},t.prototype.getSize=function(t){return _f.resolve(this.size)},t}(),og=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Sc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),_f.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(wp),sg=function(){function t(t){this.persistence=t,this.ds=new _p(function(t){return xl(t)},kl),this.lastRemoteSnapshotVersion=Hc.min(),this.highestTargetId=0,this.ws=0,this._s=new eg,this.targetCount=0,this.ys=up.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),_f.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return _f.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return _f.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),_f.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),_f.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new up(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,_f.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),_f.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,_f.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),_f.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return _f.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return _f.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),_f.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),_f.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),_f.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return _f.resolve(n)},t.prototype.containsKey=function(t,e){return _f.resolve(this._s.containsKey(e))},t}(),ag=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ec(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new sg(this),this.Ut=new Gf,this.Ue=function(t,e){return new ig(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Df(e),this.Qe=new tg(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new rg(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Ac("MemoryPersistence","Starting transaction:",t);var i=new ug(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return _f.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),ug=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Sc.c)(e,t),e}(vf),cg=function(){function t(t){this.persistence=t,this.As=new eg,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Nc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),_f.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),_f.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),_f.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _f.forEach(this.vs,function(r){var i=cl.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return _f.or([function(){return _f.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),lg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function hg(t,e){return"firestore_clients_"+t+"_"+e}function dg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function fg(t,e){return"firestore_targets_"+t+"_"+e}lg.UNAUTHENTICATED=new lg(null),lg.GOOGLE_CREDENTIALS=new lg("google-credentials-uid"),lg.FIRST_PARTY=new lg("first-party-uid");var pg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ic(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(jc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),gg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ic(i.error.code,i.error.message)),o?new t(e,i.state,r):(jc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mg=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=sd(),s=0;i&&s<r.activeTargetIds.length;++s)i=ul(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(jc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),yg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(jc("SharedClientState","Failed to parse online state: "+e),null)},t}(),vg=function(){function t(){this.activeTargetIds=sd()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),bg=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Xh(Uc),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=hg(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new vg),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Sc.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(hg(this.persistenceKey,r)))&&(o=mg.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(fg(this.persistenceKey,t));if(n){var r=gg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(fg(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ac("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ac("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ac("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ac("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void jc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Sc.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Sc.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ec.o;if(null!=t)try{var n=JSON.parse(t);Dc("number"==typeof n),e=n}catch(t){jc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ec.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new pg(this.currentUser,t,e,n),i=dg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=dg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=fg(this.persistenceKey,t),i=new gg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return mg.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return pg.Vs(new lg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return gg.Vs(r,e)},t.prototype.js=function(t){return yg.Vs(t)},t.prototype.ii=function(t){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ac("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=sd();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),_g=function(){function t(){this.li=new vg,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new vg,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),wg=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Og=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ac("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ac("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Cg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Sg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Eg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Sc.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Cc;s.listenOnce(_c.COMPLETE,function(){try{switch(s.getLastErrorCode()){case bc.NO_ERROR:var e=s.getResponseJson();Ac("Connection","XHR received:",JSON.stringify(e)),i(e);break;case bc.TIMEOUT:Ac("Connection",'RPC "'+t+'" timed out'),o(new Ic(Tc.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:var n=s.getStatus();if(Ac("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Tc).indexOf(e)>=0?e:Tc.UNKNOWN}(r.status);o(new Ic(a,r.message))}else o(new Ic(Tc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ic(Tc.UNAVAILABLE,"Connection failed."));break;default:Nc()}}finally{Ac("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new pc,i=ya(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(wo.v)()||Object(wo.y)()||Object(wo.s)()||Object(wo.u)()||Object(wo.z)()||Object(wo.r)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Ac("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Sg({Ei:function(t){c?Ac("Connection","Not sending because WebChannel is closed:",t):(u||(Ac("Connection","Opening WebChannel transport."),a.open(),u=!0),Ac("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Oc.EventType.OPEN,function(){c||Ac("Connection","WebChannel transport opened.")}),h(a,Oc.EventType.CLOSE,function(){c||(c=!0,Ac("Connection","WebChannel transport closed"),l.Vi())}),h(a,Oc.EventType.ERROR,function(t){c||(c=!0,Pc("Connection","WebChannel transport errored:",t),l.Vi(new Ic(Tc.UNAVAILABLE,"The operation could not be completed")))}),h(a,Oc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Dc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Ac("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Uh[t];if(void 0!==e)return Yh(e)}(i),s=r.message;void 0===o&&(o=Tc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Ic(o,s)),a.close()}else Ac("Connection","WebChannel received:",n),l.Si(n)}}),h(i,wc.STAT_EVENT,function(t){10===t.stat?Ac("Connection","Detected buffering proxy"):11===t.stat&&Ac("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ac("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Ac("RestConnection","Received: ",t),t},function(e){throw Pc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.0",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Cg[t]},t}());function Tg(){return"undefined"!=typeof window?window:null}function Ig(){return"undefined"!=typeof document?document:null}function xg(t){return new vd(t,!0)}var kg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Ac("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ag=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new kg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Tc.RESOURCE_EXHAUSTED?(jc(e.toString()),jc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Tc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Ic(Tc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Sc.b)(t,void 0,void 0,function(){return Object(Sc.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Ac("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Ac("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),jg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Sc.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Nc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Dc(void 0===e||"string"==typeof e),Jc.fromBase64String(e||"")):(Dc(void 0===e||e instanceof Uint8Array),Jc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Tc.UNKNOWN:Yh(t.code);return new Ic(e,t.message||"")}(a);n=new hd(r,i,o,s||null)}else if("documentChange"in e){i=Td(t,(r=e.documentChange).document.name),o=Od(r.document.updateTime);var a=new Cl({mapValue:{fields:r.document.fields}}),u=(s=El.newFoundDocument(i,o,a),r.targetIds||[]);n=new cd(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Td(t,(r=e.documentDelete).document),o=r.readTime?Od(r.readTime):Hc.min(),a=El.newNoDocument(i,o),n=new cd([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Td(t,(r=e.documentRemove).document),n=new cd([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Nc();var c=e.filter;i=new Hh(r=c.count||0),n=new ld(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Hc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Hc.min():e.readTime?Od(e.readTime):Hc.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=kd(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Al(r)?{documents:Dd(t,r)}:{query:Ld(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=_d(t,e.resumeToken):e.snapshotVersion.compareTo(Hc.min())>0&&(n.readTime=bd(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=kd(this.R),e.removeTarget=t,this.cr(e)},e}(Ag),Pg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Sc.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Dc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Dc(void 0!==e),t.map(function(t){return function(t,e){var n=Od(t.updateTime?t.updateTime:e);return n.isEqual(Hc.min())&&(n=Od(e)),new Eh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Od(t.commitTime);return this.listener.Tr(n,e)}return Dc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=kd(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Rd(e.R,t)})};this.cr(n)},e}(Ag),Rg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Sc.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Ic(Tc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw t.code===Tc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw t.code===Tc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Rr=!1},e}(function(){}),Ng=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(jc(e),this.Vr=!1):Ac("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Dg=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Sc.b)(o,void 0,void 0,function(){return Object(Sc.d)(this,function(t){switch(t.label){case 0:return zg(this)?(Ac("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Sc.b)(this,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return(e=Lc(t)).$r.add(4),[4,Fg(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Lg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Ng(n,r)};function Lg(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:if(!zg(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Fg(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Mg(t,e){var n=Lc(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Hg(n)?Bg(n):om(n).er()&&Vg(n,e))}function Ug(t,e){var n=Lc(t),r=om(n);n.Or.delete(e),r.er()&&qg(n,e),0===n.Or.size&&(r.er()?r.ir():zg(n)&&n.Br.set("Unknown"))}function Vg(t,e){t.qr.U(e.targetId),om(t).mr(e)}function qg(t,e){t.qr.U(e),om(t).yr(e)}function Bg(t){t.qr=new fd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),om(t).start(),t.Br.Sr()}function Hg(t){return zg(t)&&!om(t).tr()&&t.Or.size>0}function zg(t){return 0===Lc(t).$r.size}function Yg(t){t.qr=void 0}function Xg(t){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(e){return t.Or.forEach(function(e,n){Vg(t,e)}),[2]})})}function Wg(t,e){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(n){return Yg(t),Hg(t)?(t.Br.Nr(e),Bg(t)):t.Br.set("Unknown"),[2]})})}function Kg(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i,o;return Object(Sc.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof hd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Sc.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ac("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Gg(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof cd?t.qr.X(e):e instanceof ld?t.qr.rt(e):t.qr.et(e),n.isEqual(Hc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Bp(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Jc.EMPTY_BYTE_STRING,n.snapshotVersion)),qg(t,e);var r=new Nf(n.target,e,1,n.sequenceNumber);Vg(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ac("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Gg(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Gg(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r=this;return Object(Sc.d)(this,function(i){switch(i.label){case 0:if(!Ef(e))throw e;return t.$r.add(1),[4,Fg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Bp(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Sc.b)(r,void 0,void 0,function(){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return Ac("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Lg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function $g(t,e){return e().catch(function(n){return Gg(t,n,e)})}function Qg(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Sc.d)(this,function(s){switch(s.label){case 0:e=Lc(t),n=sm(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return zg(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Yp(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=sm(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Gg(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Jg(e)&&Zg(e),[2]}})})}function Jg(t){return zg(t)&&!sm(t).tr()&&t.kr.length>0}function Zg(t){sm(t).start()}function tm(t){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(e){return sm(t).Ar(),[2]})})}function em(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n,r;return Object(Sc.d)(this,function(i){for(e=sm(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function nm(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Rf.from(r,e,n),[4,$g(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Qg(t)];case 2:return o.sent(),[2]}})})}function rm(t,e){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(n){switch(n.label){case 0:return e&&sm(t).pr?[4,function(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return zh(r=e.code)&&r!==Tc.ABORTED?(n=t.kr.shift(),sm(t).sr(),[4,$g(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Qg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Jg(t)&&Zg(t),[2]}})})}function im(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return n=Lc(t),e?(n.$r.delete(2),[4,Lg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Fg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function om(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Lc(t);return r.br(),new jg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Xg.bind(null,t),Ri:Wg.bind(null,t),_r:Kg.bind(null,t)}),t.Mr.push(function(n){return Object(Sc.b)(e,void 0,void 0,function(){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Hg(t)?Bg(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Yg(t),e.label=3;case 3:return[2]}})})})),t.Ur}function sm(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Lc(t);return r.br(),new Pg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:tm.bind(null,t),Ri:rm.bind(null,t),Ir:em.bind(null,t),Tr:nm.bind(null,t)}),t.Mr.push(function(n){return Object(Sc.b)(e,void 0,void 0,function(){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Qg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Ac("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var am=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ic(Tc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function um(t,e){if(jc("AsyncQueue",e+": "+t),Ef(t))return new Ic(Tc.UNAVAILABLE,e+": "+t);throw t}var cm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||cl.comparator(e.key,n.key)}:function(t,e){return cl.comparator(t.key,e.key)},this.keyedMap=td(),this.sortedSet=new Xh(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),lm=function(){function t(){this.Kr=new Xh(cl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Nc():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),hm=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,cm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&rh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),dm=function(){this.Wr=void 0,this.listeners=[]},fm=function(){this.queries=new _p(function(t){return ih(t)},rh),this.onlineState="Unknown",this.Gr=new Set};function pm(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Sc.d)(this,function(c){switch(c.label){case 0:if(n=Lc(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new dm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=um(a,"Initialization of query '"+oh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&vm(n),[2]}})})}function gm(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Sc.d)(this,function(a){return n=Lc(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function mm(t,e){for(var n=Lc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&vm(n)}function ym(t,e,n){var r=Lc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function vm(t){t.Gr.forEach(function(t){t.next()})}var bm=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new hm(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=hm.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),_m=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),wm=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Td(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Pd(this.R,t.document,!1):El.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Od(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new wm(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||id()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return[4,Jp(this.localStore,new wm(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Zp(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Np(Object.assign({},this.progress),t))]}})})}}();var Om=function(t){this.key=t},Cm=function(t){this.key=t},Sm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=id(),this.mutatedKeys=id(),this.lo=ah(t),this.fo=new cm(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new lm,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Gl(this.query)&&i.size===this.query.limit?i.last():null,c=$l(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=sh(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Gl(this.query)||$l(this.query))for(;s.size>this.query.limit;){var l=Gl(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nc()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new hm(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new lm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=id(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Cm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Om(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=id();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return hm.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Em=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Tm=function(t){this.key=t,this.bo=!1},Im=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new _p(function(t){return ih(t)},rh),this.Vo=new Map,this.So=new Set,this.Do=new Xh(cl.comparator),this.Co=new Map,this.No=new eg,this.xo={},this.Fo=new Map,this.ko=up.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function xm(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Sc.d)(this,function(a){switch(a.label){case 0:return n=ry(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Xp(n.localStore,eh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,km(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Mg(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function km(t,e,n,r){return Object(Sc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Sc.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Sc.b)(this,void 0,void 0,function(){var i,o,s;return Object(Sc.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Kp(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Bm(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Kp(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Sm(e,i.Bn),s=o._o(i.documents),a=ud.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Bm(t,n,u.To),c=new Em(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Am(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return n=Lc(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!rh(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Wp(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Ug(n.remoteStore,r.targetId),Vm(n,r.targetId)}).catch(fp)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Vm(n,r.targetId),[4,Wp(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function jm(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Sc.d)(this,function(a){switch(a.label){case 0:r=iy(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Lc(t),i=Bc.now(),o=e.reduce(function(t,e){return t.add(e.key)},id());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=jh(c,n.get(c.key));null!=l&&s.push(new Dh(c.key,l,Sl(l.toProto().mapValue),Th.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Xh(Uc)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ym(r,i.changes)];case 3:return a.sent(),[4,Qg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=um(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Pm(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r;return Object(Sc.d)(this,function(i){switch(i.label){case 0:n=Lc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Hp(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Dc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Dc(r.bo):t.removedDocuments.size>0&&(Dc(r.bo),r.bo=!1))}),[4,Ym(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,fp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Rm(t,e,n){var r=Lc(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Lc(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&vm(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Nm(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Sc.d)(this,function(c){switch(c.label){case 0:return(r=Lc(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Xh(cl.comparator)).insert(o,El.newNoDocument(o,Hc.min())),a=id().add(o),u=new ad(Hc.min(),new Map,new Gh(Uc),s,a),[4,Pm(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),zm(r),[3,4];case 2:return[4,Wp(r.localStore,e,!1).then(function(){return Vm(r,e,n)}).catch(fp)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Dm(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:n=Lc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,qp(n.localStore,e)];case 2:return i=o.sent(),Um(n,r,null),Mm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ym(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,fp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Lm(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:r=Lc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Lc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Dc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Um(r,e,n),Mm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Ym(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,fp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Fm(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Sc.d)(this,function(a){switch(a.label){case 0:zg((n=Lc(t)).remoteStore)||Ac("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Lc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=um(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Mm(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Um(t,e,n){var r=Lc(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Vm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||qm(t,e)})}function qm(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Ug(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),zm(t))}function Bm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Om?(t.No.addReference(o.key,e),Hm(t,o)):o instanceof Cm?(Ac("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||qm(t,o.key)):Nc()}}function Hm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ac("SyncEngine","New document in limbo: "+n),t.So.add(r),zm(t))}function zm(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new cl(Kc.fromString(e)),r=t.ko.next();t.Co.set(r,new Tm(n)),t.Do=t.Do.insert(n,r),Mg(t.remoteStore,new Nf(eh(Kl(n.path)),r,2,Ec.o))}}function Ym(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Sc.d)(this,function(a){switch(a.label){case 0:return r=Lc(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Lp.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Sc.d)(this,function(l){switch(l.label){case 0:n=Lc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return _f.forEach(e,function(e){return _f.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return _f.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Ef(r=l.sent()))throw r;return Ac("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Xm(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return(n=Lc(t)).currentUser.isEqual(e)?[3,3]:(Ac("SyncEngine","User change. New user:",e.toKey()),[4,Vp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Ic(Tc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Ym(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Wm(t,e){var n=Lc(t),r=n.Co.get(e);if(r&&r.bo)return id().add(r.key);var i=id(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Km(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return[4,Kp((n=Lc(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Bm(n,e.targetId,i.To),i)]}})})}function Gm(t){return Object(Sc.b)(this,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){return[2,$p((e=Lc(t)).localStore).then(function(t){return Ym(e,t)})]})})}function $m(t,e,n,r){return Object(Sc.b)(this,void 0,void 0,function(){var i,o;return Object(Sc.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Lc(t),r=Lc(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):_f.resolve(null)})})}((i=Lc(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Qg(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Um(i,e,r||null),Mm(i,e),function(t,e){Lc(Lc(t)._n).Gt(e)}(i.localStore,e)):Nc(),s.label=4;case 4:return[4,Ym(i,o)];case 5:return s.sent(),[3,7];case 6:Ac("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Qm(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Sc.d)(this,function(c){switch(c.label){case 0:return ry(n=Lc(t)),iy(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Jm(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,im(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Mg(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Vm(n,e),Wp(n.localStore,e,!0)}),Ug(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Jm(n,a)];case 5:return c.sent(),function(t){var e=Lc(t);e.Co.forEach(function(t,n){Ug(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Xh(cl.comparator)}(n),n.Oo=!1,[4,im(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Jm(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Sc.d)(this,function(g){switch(g.label){case 0:n=Lc(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Xp(n.localStore,eh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,Km(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Gp(n.localStore,a)];case 8:return p=g.sent(),[4,Xp(n.localStore,p)];case 9:return u=g.sent(),[4,km(n,Zm(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Zm(t){return Wl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ty(t){var e=Lc(t);return Lc(Lc(e.localStore).persistence).fn()}function ey(t,e,n,r){return Object(Sc.b)(this,void 0,void 0,function(){var i,o,s;return Object(Sc.d)(this,function(a){switch(a.label){case 0:return(i=Lc(t)).Oo?(Ac("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,$p(i.localStore)];case 3:return o=a.sent(),s=ad.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ym(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Wp(i.localStore,e,!0)];case 6:return a.sent(),Vm(i,e,r),[3,8];case 7:Nc(),a.label=8;case 8:return[2]}})})}function ny(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Sc.d)(this,function(d){switch(d.label){case 0:if(!(r=ry(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Ac("SyncEngine","Adding an already active target "+s),[3,5]):[4,Gp(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,Xp(r.localStore,a)];case 3:return u=d.sent(),[4,km(r,Zm(a),u.targetId,!1)];case 4:d.sent(),Mg(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Wp(r.localStore,t,!1).then(function(){Ug(r.remoteStore,t),Vm(r,t)}).catch(fp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function ry(t){var e=Lc(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nm.bind(null,e),e.vo._r=mm.bind(null,e.eventManager),e.vo.Mo=ym.bind(null,e.eventManager),e}function iy(t){var e=Lc(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lm.bind(null,e),e}var oy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return this.R=xg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Up(this.persistence,new Fp,t.initialUser,this.R)},t.prototype.qo=function(t){return new ag(cg.bs,this.R)},t.prototype.Bo=function(t){return new _g},t.prototype.terminate=function(){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),sy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Sc.c)(e,t),e.prototype.initialize=function(e){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Qp(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,iy(this.Ko.syncEngine)];case 4:return n.sent(),[4,Qg(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Up(this.persistence,new Fp,t.initialUser,this.R)},e.prototype.Uo=function(t){return new mp(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Rp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?tp.withCacheSize(this.cacheSizeBytes):tp.DEFAULT;return new Ap(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Tg(),Ig(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new _g},e}(oy),ay=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Sc.c)(e,t),e.prototype.initialize=function(e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r=this;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof bg?(this.sharedClientState.syncEngine={ui:$m.bind(null,n),ai:ey.bind(null,n),hi:ny.bind(null,n),fn:ty.bind(null,n),ci:Gm.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Sc.b)(r,void 0,void 0,function(){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return[4,Qm(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Tg();if(!bg.yt(e))throw new Ic(Tc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Rp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new bg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(sy),uy=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n=this;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Rm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Xm.bind(null,this.syncEngine),[4,im(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new fm},t.prototype.createDatastore=function(t){var e=xg(t.databaseInfo.databaseId),n=new Eg(t.databaseInfo);return function(t,e,n){return new Rg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Rm(s.syncEngine,t,0)},o=Og.yt()?new Og:new wg,new Dg(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Im(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Sc.b)(this,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return e=Lc(t),Ac("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Fg(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),cy=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),ly=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new bf,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new _m(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t,e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Sc.b)(this,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t,e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n=this;return Object(Sc.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ic(Tc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Sc.d)(this,function(u){switch(u.label){case 0:return n=Lc(t),r=kd(n.R)+"/documents",i={documents:e.map(function(t){return Ed(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Dc(!!e.found);var n=Td(t,e.found.name),r=Od(e.found.updateTime),i=new Cl({mapValue:{fields:e.found.fields}});return El.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Dc(!!e.missing),Dc(!!e.readTime);var n=Td(t,e.missing),r=Od(e.readTime);return El.newNoDocument(n,r)}(t,e):Nc()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Dc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new qh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t,e=this;return Object(Sc.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=cl.fromPath(n);e.mutations.push(new Bh(r,e.precondition(r)))}),[4,function(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return n=Lc(t),r=kd(n.R)+"/documents",i={writes:e.map(function(t){return Rd(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Nc();e=Hc.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ic(Tc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Th.updateTime(e):Th.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Hc.min()))throw new Ic(Tc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Th.updateTime(e)}return Th.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),hy=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new kg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Sc.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Sc.d)(this,function(r){return t=new ly(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!sl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!zh(e)}return!1},t}(),dy=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=lg.UNAUTHENTICATED,this.clientId=Mc.u(),this.credentialListener=function(){},this.receivedInitialUser=new bf,this.credentials.setChangeListener(function(t){Ac("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ic(Tc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new bf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Sc.b)(t,void 0,void 0,function(){var t,n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=um(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function fy(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ac("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Sc.b)(i,void 0,void 0,function(){return Object(Sc.d)(this,function(t){switch(t.label){case 0:return[4,Vp(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function py(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,gy(t)];case 1:return n=i.sent(),Ac("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return(n=Lc(t)).asyncQueue.verifyOperationInProgress(),Ac("RemoteStore","RemoteStore received new credentials"),r=zg(n),n.$r.add(3),[4,Fg(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Lg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function gy(t){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ac("FirestoreClient","Using default OfflineComponentProvider"),[4,fy(t,new oy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function my(t){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ac("FirestoreClient","Using default OnlineComponentProvider"),[4,py(t,new uy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function yy(t){return gy(t).then(function(t){return t.persistence})}function vy(t){return gy(t).then(function(t){return t.localStore})}function by(t){return my(t).then(function(t){return t.remoteStore})}function _y(t){return my(t).then(function(t){return t.syncEngine})}function wy(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return[4,my(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=xm.bind(null,e.syncEngine),n.onUnlisten=Am.bind(null,e.syncEngine),n)]}})})}function Oy(t,e,n){var r=this;void 0===n&&(n={});var i=new bf;return t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(r,void 0,void 0,function(){var r;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new cy({next:function(o){e.enqueueAndForget(function(){return gm(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ic(Tc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ic(Tc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new bm(Kl(n.path),o,{includeMetadataChanges:!0,so:!0});return pm(t,s)},[4,wy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Cy(t,e,n){var r=this;void 0===n&&(n={});var i=new bf;return t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(r,void 0,void 0,function(){var r;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new cy({next:function(n){e.enqueueAndForget(function(){return gm(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ic(Tc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new bm(n,o,{includeMetadataChanges:!0,so:!0});return pm(t,s)},[4,wy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Sy=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Ey=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ty=new Map,Iy=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},xy=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(lg.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ky=function(){function t(t){var e=this;this.oc=null,this.currentUser=lg.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Ac("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Dc("string"==typeof n.accessToken),new Iy(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Dc(null===t||"string"==typeof t),new lg(t)},t}(),Ay=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=lg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),jy=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Ay(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(lg.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Py(t,e,n){if(!n)throw new Ic(Tc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ry(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ny(t,e,n,r){if(!0===e&&!0===r)throw new Ic(Tc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Dy(t){if(!cl.isDocumentKey(t))throw new Ic(Tc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ly(t){if(cl.isDocumentKey(t))throw new Ic(Tc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Fy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Nc()}function My(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ic(Tc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Fy(t);throw new Ic(Tc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Uy(t,e){if(e<=0)throw new Ic(Tc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Vy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ic(Tc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ic(Tc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ny("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),qy=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Vy({}),this._settingsFrozen=!1,t instanceof Ey?(this._databaseId=t,this._credentials=new xy):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ic(Tc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ey(t.options.projectId)}(t),this._credentials=new ky(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ic(Tc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ic(Tc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vy(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new xy;switch(t.type){case"gapi":var e=t.client;return Dc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new jy(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ic(Tc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Ty.get(this))&&(Ac("ComponentProvider","Removing Datastore"),Ty.delete(this),t.terminate()),Promise.resolve();var t},t}(),By=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new zy(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Hy=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),zy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Kl(r))||this)._path=r,i.type="collection",i}return Object(Sc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new By(this.firestore,null,new cl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Hy);function Yy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(wo.n)(t),Py("collection","path",e),t instanceof qy)return Ly(n=Kc.fromString.apply(Kc,Object(Sc.f)([e],r))),new zy(t,null,n);if(!(t instanceof By||t instanceof zy))throw new Ic(Tc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ly(n=Kc.fromString.apply(Kc,Object(Sc.f)([t.path],r)).child(Kc.fromString(e))),new zy(t.firestore,null,n)}function Xy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(wo.n)(t),1===arguments.length&&(e=Mc.u()),Py("doc","path",e),t instanceof qy)return Dy(n=Kc.fromString.apply(Kc,Object(Sc.f)([e],r))),new By(t,null,new cl(n));if(!(t instanceof By||t instanceof zy))throw new Ic(Tc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Dy(n=t._path.child(Kc.fromString.apply(Kc,Object(Sc.f)([e],r)))),new By(t.firestore,t instanceof zy?t._converter:null,new cl(n))}function Wy(t,e){return t=Object(wo.n)(t),e=Object(wo.n)(e),(t instanceof By||t instanceof zy)&&(e instanceof By||e instanceof zy)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Ky(t,e){return t=Object(wo.n)(t),e=Object(wo.n)(e),t instanceof Hy&&e instanceof Hy&&t.firestore===e.firestore&&rh(t._query,e._query)&&t._converter===e._converter}var Gy=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new kg(this,"async_queue_retry"),this.Ec=function(){var e=Ig();e&&Ac("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Ig();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Ig();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t,e=this;return Object(Sc.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ef(t=n.sent()))throw t;return Ac("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,jc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=am.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Nc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t;return Object(Sc.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function $y(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new bf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Qy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Gy,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Sc.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Zy(this),this._firestoreClient.terminate()},e}(qy);function Jy(t){return t._firestoreClient||Zy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Zy(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Sy(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new dy(t._credentials,t._queue,r)}function tv(t,e,n){var r=this,i=new bf;return t.asyncQueue.enqueue(function(){return Object(Sc.b)(r,void 0,void 0,function(){var r;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fy(t,n)];case 1:return o.sent(),[4,py(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Tc.FAILED_PRECONDITION||t.code===Tc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function ev(t){if(t._initialized||t._terminated)throw new Ic(Tc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var nv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $c(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),rv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Jc.fromBase64String(e))}catch(e){throw new Ic(Tc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Jc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),iv=function(t){this._methodName=t},ov=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ic(Tc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ic(Tc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Uc(this._lat,t._lat)||Uc(this._long,t._long)},t}(),sv=/^__.*__$/,av=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Dh(t,this.data,this.fieldMask,e,this.fieldTransforms):new Nh(t,this.data,e,this.fieldTransforms)},t}(),uv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Dh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function cv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nc()}}var lv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Av(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(cv(this.Dc)&&sv.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),hv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||xg(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new lv({Dc:t,methodName:e,Lc:n,path:$c.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function dv(t){var e=t._freezeSettings(),n=xg(t._databaseId);return new hv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Tv("Data must be an object, but it was:",s,r);var a,u,c=Sv(r,s);if(o.merge)a=new Qc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Iv(e,d[h],n);if(!s.contains(f))throw new Ic(Tc.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");jv(l,f)||l.push(f)}a=new Qc(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new av(new Cl(c),a,u)}var pv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sc.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(iv);function gv(t,e,n){return new lv({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sc.c)(e,t),e.prototype._toFieldTransform=function(t){return new Sh(t.path,new mh)},e.prototype.isEqual=function(t){return t instanceof e},e}(iv),yv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Sc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=gv(this,t,!0),n=this.qc.map(function(t){return Cv(t,e)}),r=new yh(n);return new Sh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(iv),vv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Sc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=gv(this,t,!0),n=this.qc.map(function(t){return Cv(t,e)}),r=new bh(n);return new Sh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(iv),bv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Sc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new wh(t.R,hh(t.R,this.Uc));return new Sh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(iv);function _v(t,e,n,r){var i=t.Bc(1,e,n);Tv("Data must be an object, but it was:",i,r);var o=[],s=Cl.empty();Yc(r,function(t,r){var a=kv(e,t,n);r=Object(wo.n)(r);var u=i.kc(a);if(r instanceof pv)o.push(a);else{var c=Cv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Qc(o);return new uv(s,a,i.fieldTransforms)}function wv(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Iv(e,r,n)],u=[i];if(o.length%2!=0)throw new Ic(Tc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Iv(e,o[c])),u.push(o[c+1]);for(var l=[],h=Cl.empty(),d=a.length-1;d>=0;--d)if(!jv(l,a[d])){var f=a[d],p=u[d];p=Object(wo.n)(p);var g=s.kc(f);if(p instanceof pv)l.push(f);else{var m=Cv(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new Qc(l);return new uv(h,y,s.fieldTransforms)}function Ov(t,e,n,r){return void 0===r&&(r=!1),Cv(n,t.Bc(r?4:3,e))}function Cv(t,e){if(Ev(t=Object(wo.n)(t)))return Tv("Unsupported field value:",e,t),Sv(t,e);if(t instanceof iv)return function(t,e){if(!cv(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Cv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(wo.n)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Bc.fromDate(t);return{timestampValue:bd(e.R,n)}}if(t instanceof Bc)return n=new Bc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:bd(e.R,n)};if(t instanceof ov)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rv)return{bytesValue:_d(e.R,t._byteString)};if(t instanceof By){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Cd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Fy(t))}(t,e)}function Sv(t,e){var n={};return Xc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yc(t,function(t,r){var i=Cv(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Ev(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Bc||t instanceof ov||t instanceof rv||t instanceof By||t instanceof iv)}function Tv(t,e,n){if(!Ev(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Fy(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Iv(t,e,n){if((e=Object(wo.n)(e))instanceof nv)return e._internalPath;if("string"==typeof e)return kv(t,e);throw Av("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var xv=new RegExp("[~\\*/\\[\\]]");function kv(t,e,n){if(e.search(xv)>=0)throw Av("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(nv.bind.apply(nv,Object(Sc.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Av("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Av(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ic(Tc.INVALID_ARGUMENT,(a+=". ")+t+u)}function jv(t,e){return t.some(function(t){return t.isEqual(e)})}var Pv=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new By(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Nv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Pv);function Nv(t,e){return"string"==typeof e?kv(t,e):e instanceof nv?e._internalPath:e._delegate._internalPath}var Dv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Lv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Sc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Fv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Nv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Pv),Fv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Lv),Mv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Dv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Fv(n._firestore,n._userDataWriter,r.key,r,new Dv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ic(Tc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Fv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Dv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Fv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Dv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Uv(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Uv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nc()}}function Vv(t,e){return t instanceof Lv&&e instanceof Lv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Mv&&e instanceof Mv&&t._firestore===e._firestore&&Ky(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function qv(t){if($l(t)&&0===t.explicitOrderBy.length)throw new Ic(Tc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bv=function(){};function Hv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var zv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Sc.c)(e,t),e.prototype._apply=function(t){var e=dv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Qv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push($v(r,t,l[c]));a={arrayValue:{values:u}}}else a=$v(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Qv(s,o),a=Ov(n,"where",s,"in"===o||"not-in"===o);var h=jl.create(i,o,a);return function(t,e){if(e.g()){var n=Jl(t);if(null!==n&&!n.isEqual(e.field))throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ql(t);null!==r&&Jv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ic(Tc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Hy(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Bv),Yv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Sc.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bl(e,n);return function(t,e){if(null===Ql(t)){var n=Jl(t);null!==n&&Jv(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Hy(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Xl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Bv),Xv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Sc.c)(e,t),e.prototype._apply=function(t){return new Hy(t.firestore,t._converter,nh(t._query,this.Gc,this.zc))},e}(Bv),Wv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Sc.c)(e,t),e.prototype._apply=function(t){var e=Gv(t,this.type,this.Hc,this.Jc);return new Hy(t.firestore,t._converter,function(t,e){return new Xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Bv),Kv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Sc.c)(e,t),e.prototype._apply=function(t){var e=Gv(t,this.type,this.Hc,this.Jc);return new Hy(t.firestore,t._converter,function(t,e){return new Xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Bv);function Gv(t,e,n,r){if(n[0]=Object(wo.n)(n[0]),n[0]instanceof Pv)return function(t,e,n,r,i){if(!r)throw new Ic(Tc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=th(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(yl(e,r.key));else{var c=r.data.field(u.field);if(rl(c))throw new Ic(Tc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Vl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=dv(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ic(Tc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Zl(t)&&-1!==c.indexOf("/"))throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Kc.fromString(c));if(!cl.isDocumentKey(l))throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new cl(l);a.push(yl(e,h))}else{var d=Ov(n,r,c);a.push(d)}}return new Vl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function $v(t,e,n){if("string"==typeof(n=Object(wo.n)(n))){if(""===n)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zl(e)&&-1!==n.indexOf("/"))throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Kc.fromString(n));if(!cl.isDocumentKey(r))throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return yl(t,new cl(r))}if(n instanceof By)return yl(t,n._key);throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Fy(n)+".")}function Qv(t,e){if(!Array.isArray(t)||0===t.length)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Jv(t,e,n){if(!n.isEqual(e))throw new Ic(Tc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Zv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ll(t)){case 0:return null;case 1:return t.booleanValue;case 2:return el(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(nl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Nc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Yc(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new ov(el(t.latitude),el(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=il(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ol(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=tl(t);return new Bc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Kc.fromString(t);Dc(Kd(n));var r=new Ey(n.get(1),n.get(3)),i=new cl(n.popFirst(5));return r.isEqual(e)||jc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function tb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var eb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Sc.c)(e,t),e.prototype.convertBytes=function(t){return new rv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new By(this.firestore,null,e)},e}(Zv),nb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=dv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=rb(t,this._firestore),i=tb(r._converter,e,n),o=fv(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Th.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=rb(t,this._firestore);return o="string"==typeof(e=Object(wo.n)(e))||e instanceof nv?wv(this._dataReader,"WriteBatch.update",s._key,e,n,r):_v(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Th.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=rb(t,this._firestore);return this._mutations=this._mutations.concat(new qh(e._key,Th.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ic(Tc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function rb(t,e){if((t=Object(wo.n)(t)).firestore!==e)throw new Ic(Tc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ib=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Sc.c)(e,t),e.prototype.convertBytes=function(t){return new rv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new By(this.firestore,null,e)},e}(Zv);function ob(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=My(t,By);var o=My(t.firestore,Qy),s=dv(o);return ab(o,[("string"==typeof(e=Object(wo.n)(e))||e instanceof nv?wv(s,"updateDoc",t._key,e,n,r):_v(s,"updateDoc",t._key,e)).toMutation(t._key,Th.exists(!0))])}function sb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(wo.n)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||$y(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if($y(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof By)c=My(t.firestore,Qy),l=Kl(t._key.path),u={next:function(e){i[a]&&i[a](ub(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=My(t,Hy);c=My(f.firestore,Qy),l=f._query;var p=new ib(c);u={next:function(t){i[a]&&i[a](new Mv(c,p,f,t))},error:i[a+1],complete:i[a+2]},qv(t._query)}return function(t,e,n,r){var i=this,o=new cy(r),s=new bm(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(i,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return e=pm,[4,wy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(i,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return e=gm,[4,wy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Jy(c),l,h,u)}function ab(t,e){return function(t,e){var n=this,r=new bf;return t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(n,void 0,void 0,function(){var n;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return n=jm,[4,_y(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Jy(t),e)}function ub(t,e,n){var r=n.docs.get(e._key),i=new ib(t);return new Lv(t,i,e._key,r,new Dv(n.hasPendingWrites,n.fromCache),e._converter)}var cb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Sc.c)(e,t),e.prototype.get=function(e){var n=this,r=rb(e,this._firestore),i=new ib(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Lv(n._firestore,i,r._key,t._document,new Dv(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=dv(t)}return t.prototype.get=function(t){var e=this,n=rb(t,this._firestore),r=new eb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Nc();var i=t[0];if(i.isFoundDocument())return new Pv(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Pv(e._firestore,r,n._key,null,n._converter);throw Nc()})},t.prototype.set=function(t,e,n){var r=rb(t,this._firestore),i=tb(r._converter,e,n),o=fv(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=rb(t,this._firestore);return o="string"==typeof(e=Object(wo.n)(e))||e instanceof nv?wv(this._dataReader,"Transaction.update",s._key,e,n,r):_v(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=rb(t,this._firestore);return this._transaction.delete(e._key),this},t}());function lb(){if("undefined"==typeof Uint8Array)throw new Ic(Tc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function hb(){if("undefined"==typeof atob)throw new Ic(Tc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var db=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return hb(),new t(rv.fromBase64String(e))},t.fromUint8Array=function(e){return lb(),new t(rv.fromUint8Array(e))},t.prototype.toBase64=function(){return hb(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return lb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),fb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ev(t=My(t,Qy));var n=Jy(t),r=t._freezeSettings(),i=new uy;return tv(n,i,new sy(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ev(t=My(t,Qy));var e=Jy(t),n=t._freezeSettings(),r=new uy;return tv(e,r,new ay(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ic(Tc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new bf;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Sc.b)(e,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Sc.b)(this,void 0,void 0,function(){return Object(Sc.d)(this,function(e){switch(e.label){case 0:return Of.yt()?[4,Of.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Rp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),pb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Ey||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=My(t,qy))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Pc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Sc.b)(e,void 0,void 0,function(){var e,n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return[4,yy(t)];case 1:return e=r.sent(),[4,by(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Lc(t);return e.$r.delete(0),Lg(e)}(n))]}})})})}(Jy(My(this._delegate,Qy)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Sc.b)(e,void 0,void 0,function(){var e,n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return[4,yy(t)];case 1:return e=r.sent(),[4,by(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Sc.b)(this,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return(e=Lc(t)).$r.add(0),[4,Fg(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Jy(My(this._delegate,Qy)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ny("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new bf;return t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(e,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return e=Fm,[4,_y(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Jy(My(this._delegate,Qy)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new cy(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(n,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Lc(t).Gr.add(e),e.next()},[4,wy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(n,void 0,void 0,function(){var e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Lc(t).Gr.delete(e)},[4,wy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Jy(t=My(t,Qy)),$y(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Ic(Tc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xb(this,Yy(this._delegate,t))}catch(t){throw _b(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new bb(this,Xy(this._delegate,t))}catch(t){throw _b(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Eb(this,function(t,e){if(t=My(t,qy),Py("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Hy(t,null,function(t){return new Xl(Kc.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw _b(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new bf;return t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(n,void 0,void 0,function(){var n;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return my(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new hy(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Jy(t),function(n){return e(new cb(t,n))})}(this._delegate,function(n){return t(new mb(e,n))})},t.prototype.batch=function(){var t=this;return Jy(this._delegate),new yb(new nb(this._delegate,function(e){return ab(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Ic(Tc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ic(Tc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),gb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Sc.c)(e,t),e.prototype.convertBytes=function(t){return new db(new rv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return bb.Zc(e,this.firestore,null)},e}(Zv),mb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new gb(t)}return t.prototype.get=function(t){var e=this,n=kb(t);return this._delegate.get(n).then(function(t){return new Cb(e._firestore,new Lv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=kb(t);return n?(Ry("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=kb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Sc.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=kb(t);return this._delegate.delete(e),this},t}(),yb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=kb(t);return n?(Ry("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=kb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Sc.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=kb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),vb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Fv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Sb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new gb(e),n),i.set(n,o)),o},t}();vb.eu=new WeakMap;var bb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gb(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Ic(Tc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new By(n._delegate,r,new cl(e)))},t.Zc=function(e,n,r){return new t(n,new By(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xb(this.firestore,Yy(this._delegate,t))}catch(t){throw _b(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(wo.n)(t))instanceof By&&Wy(this._delegate,t)},t.prototype.set=function(t,e){e=Ry("DocumentReference.set",e);try{return function(t,e,n){t=My(t,By);var r=My(t.firestore,Qy),i=tb(t._converter,e,n);return ab(r,[fv(dv(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Th.none())])}(this._delegate,t,e)}catch(t){throw _b(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ob(this._delegate,t):ob.apply(void 0,Object(Sc.f)([this._delegate,t,e],n))}catch(t){throw _b(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return ab(My((t=this._delegate).firestore,Qy),[new qh(t._key,Th.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=wb(e),i=Ob(e,function(e){return new Cb(t.firestore,new Lv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return sb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=My(t,By);var e=My(t.firestore,Qy),n=Jy(e),r=new ib(e);return function(t,e){var n=this,r=new bf;return t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(n,void 0,void 0,function(){var n;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Lc(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ic(Tc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=um(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,vy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Lv(e,r,t._key,n,new Dv(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=My(t,By);var e=My(t.firestore,Qy);return Oy(Jy(e),t._key,{source:"server"}).then(function(n){return ub(e,t,n)})}(this._delegate):function(t){t=My(t,By);var e=My(t.firestore,Qy);return Oy(Jy(e),t._key).then(function(n){return ub(e,t,n)})}(this._delegate)).then(function(t){return new Cb(e.firestore,new Lv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?vb.tu(this.firestore,e):null))},t}();function _b(t,e,n){return t.message=t.message.replace(e,n),t}function wb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!$y(r))return r}return{}}function Ob(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=$y(t[0])?t[0]:$y(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Cb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new bb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Vv(this._delegate,t._delegate)},t}(),Sb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sc.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Cb),Eb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Hv(this._delegate,function(t,e,n){var r=e,i=Nv("where",t);return new zv(i,r,n)}(e,n,r)))}catch(e){throw _b(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Hv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Nv("orderBy",t);return new Yv(r,n)}(e,n)))}catch(e){throw _b(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Hv(this._delegate,function(t){return Uy("limit",t),new Xv("limit",t,"F")}(e)))}catch(e){throw _b(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Hv(this._delegate,function(t){return Uy("limitToLast",t),new Xv("limitToLast",t,"L")}(e)))}catch(e){throw _b(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Hv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wv("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw _b(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Hv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wv("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw _b(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Hv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kv("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw _b(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Hv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kv("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw _b(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ky(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=My(t,Hy);var e=My(t.firestore,Qy),n=Jy(e),r=new ib(e);return function(t,e){var n=this,r=new bf;return t.asyncQueue.enqueueAndForget(function(){return Object(Sc.b)(n,void 0,void 0,function(){var n;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Sc.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Kp(t,e,!0)];case 1:return a=u.sent(),r=new Sm(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=um(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,vy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Mv(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=My(t,Hy);var e=My(t.firestore,Qy),n=Jy(e),r=new ib(e);return Cy(n,t._query,{source:"server"}).then(function(n){return new Mv(e,r,t,n)})}(this._delegate):function(t){t=My(t,Hy);var e=My(t.firestore,Qy),n=Jy(e),r=new ib(e);return qv(t._query),Cy(n,t._query).then(function(n){return new Mv(e,r,t,n)})}(this._delegate)).then(function(t){return new Ib(e.firestore,new Mv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=wb(e),i=Ob(e,function(e){return new Ib(t.firestore,new Mv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return sb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?vb.tu(this.firestore,e):null))},t}(),Tb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Sb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Ib=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Eb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Sb(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Tb(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Sb(n._firestore,r))})},t.prototype.isEqual=function(t){return Vv(this._delegate,t._delegate)},t}(),xb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Sc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new bb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new bb(this.firestore,void 0===t?Xy(this._delegate):Xy(this._delegate,t))}catch(t){throw _b(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=My(t.firestore,Qy),r=Xy(t),i=tb(t._converter,e);return ab(n,[fv(dv(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Th.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new bb(e.firestore,t)})},e.prototype.isEqual=function(t){return Wy(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?vb.tu(this.firestore,t):null))},e}(Eb);function kb(t){return My(t,By)}var Ab,jb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(nv.bind.apply(nv,Object(Sc.f)([void 0],t)))}return t.documentId=function(){return new t($c.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(wo.n)(t))instanceof nv&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Pb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new mv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new pv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new bv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Rb=n("/6Yf"),Nb={Firestore:pb,GeoPoint:ov,Timestamp:Bc,Blob:db,Transaction:mb,WriteBatch:yb,DocumentReference:bb,DocumentSnapshot:Cb,Query:Eb,QueryDocumentSnapshot:Sb,QuerySnapshot:Ib,CollectionReference:xb,FieldPath:jb,FieldValue:Pb,setLogLevel:function(t){xc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Db(t,e){return function(t,e=Yi.b){return new It.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Lb(t,e){return Db(t,e).pipe(Object(jt.a)(t=>({payload:t,type:"query"})))}function Fb(t,e){return Lb(t,e).pipe(Ne(void 0),yo(),Object(jt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Mb(t,e,n){return Fb(t,n).pipe(De((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ub(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Ub(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ub(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Wi(),Object(jt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Ub(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Vb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new Rb.a("firestore",function(t){return function(t,e){return new pb(t,new Qy(t,e),new fb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Nb)))})(Ab=_o.a),Ab.registerVersion("@firebase/firestore","2.2.4");class qb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Fb(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(jt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ne(void 0),yo(),Yt(([t,e])=>e.length>0||!t),Object(jt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(De((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Vb(t);return Mb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Lb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(jt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(xt.a)(this.query.get(t)).pipe(Object(At.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Bb(this.ref.doc(t),this.afs)}}class Bb{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Kb(n,e);return new qb(r,i,this.afs)}snapshotChanges(){return Db(this.ref,this.afs.schedulers.outsideAngular).pipe(Ne(void 0),yo(),Object(jt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(jt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(xt.a)(this.ref.get(t)).pipe(Object(At.b)(this.afs.schedulers.insideAngular))}}class Hb{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Fb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(jt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Yt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Fb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(De((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Vb(t);return Mb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Lb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(jt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(xt.a)(this.query.get(t)).pipe(Object(At.b)(this.afs.schedulers.insideAngular))}}const zb=new r.u("angularfire2.enableFirestorePersistence"),Yb=new r.u("angularfire2.firestore.persistenceSettings"),Xb=new r.u("angularfire2.firestore.settings"),Wb=new r.u("angularfire2.firestore.use-emulator");function Kb(t,e=(t=>t)){return{query:e(t),ref:t}}let Gb=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new le.d(o),this.keepUnstableUntilFirst=Object(le.h)(this.schedulers);const c=Object(le.g)(t,o,e);!St.a.auth&&u&&Object(le.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(le.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!H(i)){const e=()=>{try{return Object(xt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Ab){return"undefined"!=typeof console&&console.warn(Ab),Object(Tt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Tt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Kb(n,e),o=this.schedulers.ngZone.run(()=>r);return new qb(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Hb(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Bb(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.cc(le.c),r.cc(le.b,8),r.cc(zb,8),r.cc(Xb,8),r.cc(r.I),r.cc(r.F),r.cc(Yb,8),r.cc(Wb,8),r.cc(he,8))},t.\u0275prov=Object(r.Pb)({factory:function(){return new t(Object(r.cc)(le.c),Object(r.cc)(le.b,8),Object(r.cc)(zb,8),Object(r.cc)(Xb,8),Object(r.cc)(r.I),Object(r.cc)(r.F),Object(r.cc)(Yb,8),Object(r.cc)(Wb,8),Object(r.cc)(he,8))},token:t,providedIn:"any"}),t})(),$b=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:zb,useValue:!0},{provide:Yb,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:[Gb]}),t})(),Qb=(()=>{class t{constructor(t,e,n,r,i){this.afAuth=t,this.route=e,this.router=n,this.db=r,this.angularFireStore=i,this.loggedIn=!1,this.userDetails=null,this.user=t.authState,this.user.subscribe(t=>{t?(this.userDetails=t,console.log(this.userDetails)):this.userDetails=null})}getUserId(){return this.uid}getCurrentUser(){return sessionStorage.getItem("users")||void 0}isLoggedIn(){return this.loggedIn}doRegister(t){return new Promise((e,n)=>{St.a.auth().createUserWithEmailAndPassword(t.email,t.password).then(t=>{e(t)},t=>n(t))})}doLogin(t){return new Promise((e,n)=>{St.a.auth().signInWithEmailAndPassword(t.email,t.password).then(t=>{e(t),this.loggedIn=!0},t=>n(t))})}doLogOut(){return new Promise((t,e)=>{St.a.auth().currentUser?(this.afAuth.signOut(),t(),this.loggedIn=!1):e()})}}return t.\u0275fac=function(e){return new(e||t)(r.cc(ye),r.cc(nr),r.cc(wi),r.cc(go),r.cc(Gb))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Jb{constructor(){this.id="",this.name="",this.email="",this.photoName="",this.photoURL=""}}let Zb=(()=>{class t{constructor(t,e){this.angularFirestore=t,this.db=e,this.dbPath="/users",this.usersRef=e.list(this.dbPath)}getUserList(){return this.angularFirestore.collection("users").snapshotChanges().pipe(Object(jt.a)(t=>t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))))}createUser(t){return this.angularFirestore.collection("users").add({name:t.name,email:t.email,photoURL:t.photoURL})}getUserById(t){return this.angularFirestore.doc("users/"+t).valueChanges()}saveUser(t){const e=JSON.parse(JSON.stringify(t));return this.angularFirestore.collection("users").add(e)}update(t,e){const n=JSON.parse(JSON.stringify(e));return this.angularFirestore.doc("users/"+t).update(n)}delete(t){return this.angularFirestore.doc("users/"+t).delete()}getCurrentUser(){return new Promise((t,e)=>{St.a.auth().onAuthStateChanged(function(n){n?t(n):e("No user logged in")})})}updateCurrentUser(t){return new Promise((e,n)=>{var r=St.a.auth().currentUser;null==r||r.updateProfile({displayName:t.name,photoURL:r.photoURL}).then(t=>{e(t)},t=>n(t))})}}return t.\u0275fac=function(e){return new(e||t)(r.cc(Gb),r.cc(go))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function t_(t,e){1&t&&(r.Yb(0,"a",12),r.xc(1," Merhaba "),r.Xb())}function e_(t,e){if(1&t&&(r.Yb(0,"a",13),r.xc(1),r.Xb()),2&t){const t=r.hc();r.Ib(1),r.zc(" ",t.user.name," ")}}function n_(t,e){1&t&&(r.Yb(0,"a",14),r.xc(1," Kay\u0131t Ol "),r.Xb())}function r_(t,e){1&t&&(r.Yb(0,"a",15),r.xc(1," Giri\u015f Yap "),r.Xb())}function i_(t,e){if(1&t){const t=r.Zb();r.Yb(0,"a",16),r.fc("click",function(){return r.qc(t),r.hc().logout()}),r.xc(1," \xc7\u0131k\u0131\u015f Yap "),r.Xb()}}let o_=(()=>{class t{constructor(t,e,n,r){this.userService=t,this.authService=e,this.route=n,this.router=r,this.title="PetProject",this.user=new Jb,this.route.snapshot.params.id&&(this.currentUserId=this.route.snapshot.paramMap.get("id")||"id gelmiyor",console.log(this.currentUserId))}ngOnInit(){this.currentUserId=this.authService.getUserId(),console.log(this.currentUserId)}logout(){this.authService.doLogOut().then(t=>{this.router.navigate(["/login-user"])},t=>{console.log("Logout error",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Zb),r.Tb(Qb),r.Tb(nr),r.Tb(wi))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-navbar"]],decls:17,vars:5,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow",2,"height","50px","align-items","center"],["routerLink","/register-student",1,"navbar-brand","col-sm-3","col-md-2","mr-0"],[1,"dasboard-text",2,"margin-left","5px"],[1,"flex-container"],[1,"nav-item","dropdown",2,"padding-bottom","20px !important"],["class","nav-link dropdown-toggle","style","align-items: center;","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",4,"ngIf"],["class","nav-link dropdown-toggle","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",4,"ngIf"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["class","dropdown-item","routerLink","/register-user",4,"ngIf"],["class","dropdown-item","routerLink","/login-user",4,"ngIf"],["class","dropdown-item","aria-labelledby","navbarDropdown","routerLink","/login-user",3,"click",4,"ngIf"],["src","https://avatars.githubusercontent.com/u/54598461?v=4","alt","User image",1,"card-img-top","image",2,"margin-right","20px"],["id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle",2,"align-items","center"],["id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["routerLink","/register-user",1,"dropdown-item"],["routerLink","/login-user",1,"dropdown-item"],["aria-labelledby","navbarDropdown","routerLink","/login-user",1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(r.Yb(0,"nav",0),r.Yb(1,"a",1),r.Yb(2,"span",2),r.xc(3,"Pet Project"),r.Xb(),r.Xb(),r.Yb(4,"div",3),r.xc(5,"\xa0 "),r.Yb(6,"li",4),r.wc(7,t_,2,0,"a",5),r.wc(8,e_,2,1,"a",6),r.Yb(9,"ul",7),r.Yb(10,"li"),r.wc(11,n_,2,0,"a",8),r.Xb(),r.Yb(12,"li"),r.wc(13,r_,2,0,"a",9),r.Xb(),r.wc(14,i_,2,0,"a",10),r.Xb(),r.Xb(),r.Yb(15,"div"),r.Ub(16,"img",11),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.Ib(7),r.kc("ngIf",!e.user.name),r.Ib(1),r.kc("ngIf",e.user.name),r.Ib(3),r.kc("ngIf",!e.authService.isLoggedIn()),r.Ib(2),r.kc("ngIf",!e.authService.isLoggedIn()),r.Ib(1),r.kc("ngIf",e.authService.isLoggedIn()))},directives:[Ci,F],styles:["img[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;align-items:center}div.flex-container[_ngcontent-%COMP%], li.flex-container[_ngcontent-%COMP%], ul.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),t})(),s_=(()=>{class t{constructor(t){this.authService=t}LoggedIn(){return this.authService.isLoggedIn()}logout(){return this.authService.doLogOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Qb))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(t,e){1&t&&(r.Ub(0,"app-navbar"),r.Ub(1,"br"),r.Ub(2,"router-outlet"))},directives:[o_,Ti],styles:[""]}),t})();class a_{}class u_{}class c_{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof c_?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new c_;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof c_?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class l_{encodeKey(t){return h_(t)}encodeValue(t){return h_(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function h_(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class d_{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new l_,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new d_({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function f_(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function p_(t){return"undefined"!=typeof Blob&&t instanceof Blob}function g_(t){return"undefined"!=typeof FormData&&t instanceof FormData}class m_{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new c_),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new d_,this.urlWithParams=e}serializeBody(){return null===this.body?null:f_(this.body)||p_(this.body)||g_(this.body)||"string"==typeof this.body?this.body:this.body instanceof d_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||g_(this.body)?null:p_(this.body)?this.body.type||null:f_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof d_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new m_(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var y_=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class v_{constructor(t,e=200,n="OK"){this.headers=t.headers||new c_,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class b_ extends v_{constructor(t={}){super(t),this.type=y_.ResponseHeader}clone(t={}){return new b_({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class __ extends v_{constructor(t={}){super(t),this.type=y_.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new __({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class w_ extends v_{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function O_(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let C_=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof m_)r=t;else{let i,o;i=n.headers instanceof c_?n.headers:new c_(n.headers),n.params&&(o=n.params instanceof d_?n.params:new d_({fromObject:n.params})),r=new m_(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Tt.a)(r).pipe(Be(t=>this.handler.handle(t)));if(t instanceof m_||"events"===n.observe)return i;const o=i.pipe(Yt(t=>t instanceof __));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(jt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(jt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(jt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(jt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new d_).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,O_(n,e))}post(t,e,n={}){return this.request("POST",t,O_(n,e))}put(t,e,n={}){return this.request("PUT",t,O_(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.cc(a_))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();class S_{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const E_=new r.u("HTTP_INTERCEPTORS");let T_=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();const I_=/^\)\]\}',?\n/;class x_{}let k_=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),A_=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new It.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new c_(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new b_({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(I_,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new __({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new w_({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new w_({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:y_.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:y_.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:y_.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.cc(x_))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();const j_=new r.u("XSRF_COOKIE_NAME"),P_=new r.u("XSRF_HEADER_NAME");class R_{}let N_=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=R(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.cc(s),r.cc(r.I),r.cc(j_))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),D_=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.cc(R_),r.cc(P_))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),L_=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(E_,[]);this.chain=t.reduceRight((t,e)=>new S_(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.cc(u_),r.cc(r.v))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),F_=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:D_,useClass:T_}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:j_,useValue:e.cookieName}:[],e.headerName?{provide:P_,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:[D_,{provide:E_,useExisting:D_,multi:!0},{provide:R_,useClass:N_},{provide:j_,useValue:"XSRF-TOKEN"},{provide:P_,useValue:"X-XSRF-TOKEN"}]}),t})(),M_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:[C_,{provide:a_,useClass:L_},A_,{provide:u_,useExisting:A_},k_,{provide:x_,useExisting:k_}],imports:[[F_.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var U_=n("XoHu");function V_(t,e){return new It.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(xt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class q_{}const B_=new r.u("NgValueAccessor"),H_={provide:B_,useExisting:Object(r.bb)(()=>Y_),multi:!0},z_=new r.u("CompositionEventMode");let Y_=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.L),r.Tb(r.o),r.Tb(z_,8))},t.\u0275dir=r.Ob({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.fc("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.Hb([H_])]}),t})();function X_(t){return null==t||0===t.length}function W_(t){return null!=t&&"number"==typeof t.length}const K_=new r.u("NgValidators"),G_=new r.u("NgAsyncValidators"),$_=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Q_{static min(t){return function(t){return e=>{if(X_(e.value)||X_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(X_(e.value)||X_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return J_(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return X_(t.value)||$_.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>X_(e.value)||!W_(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>W_(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return Z_;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(X_(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return ow(t)}static composeAsync(t){return aw(t)}}function J_(t){return X_(t.value)?{required:!0}:null}function Z_(t){return null}function tw(t){return null!=t}function ew(t){const e=Object(r.yb)(t)?Object(xt.a)(t):t;return Object(r.xb)(e),e}function nw(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function rw(t,e){return e.map(e=>e(t))}function iw(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function ow(t){if(!t)return null;const e=t.filter(tw);return 0==e.length?null:function(t){return nw(rw(t,e))}}function sw(t){return null!=t?ow(iw(t)):null}function aw(t){if(!t)return null;const e=t.filter(tw);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(we.a)(e))return V_(e,null);if(Object(U_.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return V_(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return V_(t=1===t.length&&Object(we.a)(t[0])?t[0]:t,null).pipe(Object(jt.a)(t=>e(...t)))}return V_(t,null)}(rw(t,e).map(ew)).pipe(Object(jt.a)(nw))}}function uw(t){return null!=t?aw(iw(t)):null}function cw(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function lw(t){return t._rawValidators}function hw(t){return t._rawAsyncValidators}let dw=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=sw(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=uw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Ob({type:t}),t})(),fw=(()=>{class t extends dw{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return pw(e||t)},t.\u0275dir=r.Ob({type:t,features:[r.Fb]}),t})();const pw=r.ac(fw);class gw extends dw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class mw{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let yw=(()=>{class t extends mw{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(gw,2))},t.\u0275dir=r.Ob({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Lb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.Fb]}),t})(),vw=(()=>{class t extends mw{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(fw,10))},t.\u0275dir=r.Ob({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Lb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.Fb]}),t})();function bw(t,e){return[...e.path,t]}function _w(t,e){Cw(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Ew(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Ew(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function ww(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Sw(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ow(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Cw(t,e,n){const r=lw(t);null!==e.validator?t.setValidators(cw(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=hw(t);if(null!==e.asyncValidator?t.setAsyncValidators(cw(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Ow(e._rawValidators,n),Ow(e._rawAsyncValidators,n)}}function Sw(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=lw(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=hw(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};Ow(e._rawValidators,t),Ow(e._rawAsyncValidators,t)}return r}function Ew(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Tw(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function Iw(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Y_?n=t:Object.getPrototypeOf(t.constructor)===q_?r=t:i=t}),i||r||n||null}function xw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function kw(t){return(Rw(t)?t.validators:t)||null}function Aw(t){return Array.isArray(t)?sw(t):t||null}function jw(t,e){return(Rw(e)?e.asyncValidators:t)||null}function Pw(t){return Array.isArray(t)?uw(t):t||null}function Rw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Nw{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Aw(this._rawValidators),this._composedAsyncValidatorFn=Pw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Aw(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Pw(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const e=ew(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Lw?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Fw&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.q,this.statusChanges=new r.q}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Rw(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Dw extends Nw{constructor(t=null,e,n){super(kw(e),jw(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){xw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){xw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Lw extends Nw{constructor(t,e,n){super(kw(e),jw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Dw?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Fw extends Nw{constructor(t,e,n){super(kw(e),jw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Dw?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Mw={provide:gw,useExisting:Object(r.bb)(()=>Vw)},Uw=(()=>Promise.resolve(null))();let Vw=(()=>{class t extends gw{constructor(t,e,n,i){super(),this.control=new Dw,this._registered=!1,this.update=new r.q,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Iw(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Tw(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?bw(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_w(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Uw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Uw.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(fw,9),r.Tb(K_,10),r.Tb(G_,10),r.Tb(B_,10))},t.\u0275dir=r.Ob({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.Hb([Mw]),r.Fb,r.Gb]}),t})(),qw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Ob({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Bw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({}),t})();const Hw=new r.u("NgModelWithFormControlWarning"),zw={provide:fw,useExisting:Object(r.bb)(()=>Yw)};let Yw=(()=>{class t extends fw{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.q,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sw(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return _w(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){ww(t.control||null,t,!1),xw(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(ww(e||null,t),n instanceof Dw&&(_w(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){Cw(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return Sw(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Cw(this.form,this,!1),this._oldForm&&Sw(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(K_,10),r.Tb(G_,10))},t.\u0275dir=r.Ob({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.fc("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.Hb([zw]),r.Fb,r.Gb]}),t})();const Xw={provide:gw,useExisting:Object(r.bb)(()=>Ww)};let Ww=(()=>{class t extends gw{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.q,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Iw(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Tw(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return bw(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(fw,13),r.Tb(K_,10),r.Tb(G_,10),r.Tb(B_,10),r.Tb(Hw,8))},t.\u0275dir=r.Ob({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.Hb([Xw]),r.Fb,r.Gb]}),t._ngModelWarningSentOnce=!1,t})();const Kw={provide:B_,useExisting:Object(r.bb)(()=>$w),multi:!0};function Gw(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let $w=(()=>{class t extends q_{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=Gw(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.L),r.Tb(r.o))},t.\u0275dir=r.Ob({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.fc("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.Hb([Kw]),r.Fb]}),t})(),Qw=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Gw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.o),r.Tb(r.L),r.Tb($w,9))},t.\u0275dir=r.Ob({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Jw={provide:B_,useExisting:Object(r.bb)(()=>tO),multi:!0};function Zw(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let tO=(()=>{class t extends q_{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.L),r.Tb(r.o))},t.\u0275dir=r.Ob({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.fc("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.Hb([Jw]),r.Fb]}),t})(),eO=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Zw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Zw(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(r.o),r.Tb(r.L),r.Tb(tO,9))},t.\u0275dir=r.Ob({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const nO={provide:K_,useExisting:Object(r.bb)(()=>rO),multi:!0};let rO=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?J_(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Ob({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Jb("required",e.required?"":null)},inputs:{required:"required"},features:[r.Hb([nO])]}),t})(),iO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({imports:[[Bw]]}),t})(),oO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({imports:[iO]}),t})(),sO=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Hw,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({imports:[iO]}),t})(),aO=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new Lw(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new Dw(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Fw(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Dw||t instanceof Lw||t instanceof Fw?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Pb)({factory:function(){return new t},token:t,providedIn:sO}),t})();class uO{}function cO(t,e=null){return{type:4,styles:e,timings:t}}function lO(t,e=null){return{type:2,steps:t,options:e}}function hO(t){return{type:6,styles:t,offset:null}}function dO(t,e,n){return{type:0,name:t,styles:e,options:n}}function fO(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function pO(t){Promise.resolve(null).then(t)}class gO{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class mO{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?pO(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function yO(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function vO(t){switch(t.length){case 0:return new gO;case 1:return t[0];default:return new mO(t)}}function bO(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function _O(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&wO(n,"start",t)));break;case"done":t.onDone(()=>r(n&&wO(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&wO(n,"destroy",t)))}}function wO(t,e,n){const r=n.totalTime,i=OO(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function OO(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function CO(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function SO(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let EO=(t,e)=>!1,TO=(t,e)=>!1,IO=(t,e,n)=>[];const xO=yO();(xO||"undefined"!=typeof Element)&&(EO=(t,e)=>t.contains(e),TO=(()=>{if(xO||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):TO}})(),IO=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let kO=null,AO=!1;function jO(t){kO||(kO=("undefined"!=typeof document?document.body:null)||{},AO=!!kO.style&&"WebkitAppearance"in kO.style);let e=!0;return kO.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in kO.style,!e&&AO)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in kO.style),e}const PO=TO,RO=EO,NO=IO;function DO(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let LO=(()=>{class t{validateStyleProperty(t){return jO(t)}matchesElement(t,e){return PO(t,e)}containsElement(t,e){return RO(t,e)}query(t,e,n){return NO(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new gO(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})(),FO=(()=>{class t{}return t.NOOP=new LO,t})();function MO(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:UO(parseFloat(e[1]),e[2])}function UO(t,e){switch(e){case"s":return 1e3*t;default:return t}}function VO(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=UO(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=UO(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function qO(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function BO(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else qO(t,n);return n}function HO(t,e,n){return n?e+":"+n+";":""}function zO(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=HO(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=HO(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function YO(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=ZO(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),yO()&&zO(t))}function XO(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=ZO(e);t.style[n]=""}),yO()&&zO(t))}function WO(t){return Array.isArray(t)?1==t.length?t[0]:lO(t):t}const KO=new RegExp("{{\\s*(.+?)\\s*}}","g");function GO(t){let e=[];if("string"==typeof t){let n;for(;n=KO.exec(t);)e.push(n[1]);KO.lastIndex=0}return e}function $O(t,e,n){const r=t.toString(),i=r.replace(KO,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function QO(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const JO=/-+([a-z0-9])/g;function ZO(t){return t.replace(JO,(...t)=>t[1].toUpperCase())}function tC(t,e){return 0===t||0===e}function eC(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=rC(t,e)})}}return e}function nC(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function rC(t,e){return window.getComputedStyle(t)[e]}function iC(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(aC(i,s)),"<"!=o[0]||"*"==i&&"*"==s||e.push(aC(s,i))}(t,n,e)):n.push(t),n}const oC=new Set(["true","1"]),sC=new Set(["false","0"]);function aC(t,e){const n=oC.has(t)||sC.has(t),r=oC.has(e)||sC.has(e);return(i,o)=>{let s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?oC.has(t):sC.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?oC.has(e):sC.has(e)),s&&a}}const uC=new RegExp("s*:selfs*,?","g");function cC(t,e,n){return new lC(t).build(e,n)}class lC{constructor(t){this._driver=t}build(t,e){const n=new hC(e);return this._resetContextStyleTimingState(n),nC(this,WO(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(dC(t)){const e=t;Object.keys(e).forEach(t=>{GO(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=QO(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=nC(this,WO(t.animation),e);return{type:1,matchers:iC(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:fC(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>nC(this,t,e)),options:fC(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=nC(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:fC(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return pC(VO(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=pC(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||VO(r,e),pC(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:hO({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=hO(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(dC(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=GO(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(dC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(dC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:nC(this,WO(t.animation),e),options:fC(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:fC(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:fC(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(uC,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,CO(e.collectedStyles,e.currentQuerySelector,{});const s=nC(this,WO(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:fC(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:VO(t.timings,e.errors,!0);return{type:12,animation:nC(this,WO(t.animation),e),timings:n,options:null}}}class hC{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function dC(t){return!Array.isArray(t)&&"object"==typeof t}function fC(t){var e;return t?(t=qO(t)).params&&(t.params=(e=t.params)?qO(e):null):t={},t}function pC(t,e,n){return{duration:t,delay:e,easing:n}}function gC(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class mC{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const yC=new RegExp(":enter","g"),vC=new RegExp(":leave","g");function bC(t,e,n,r,i,o={},s={},a,u,c=[]){return(new _C).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class _C{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new mC;const l=new OC(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),nC(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[gC(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?MO(n.duration):null,o=null!=n.delay?MO(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),nC(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=wC);const t=MO(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>nC(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?MO(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),nC(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return VO(e.params?$O(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?MO(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=wC);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),nC(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;nC(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const wC={};class OC{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new CC(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=MO(n.duration)),null!=n.delay&&(r.delay=MO(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=$O(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new OC(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=wC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new SC(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(yC,"."+this._enterClassName)).replace(vC,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class CC{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new CC(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):BO(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=$O(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=BO(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?QO(t.values()):[],o=e.size?QO(e.values()):[];if(n){const t=r[0],e=qO(t);t.offset=0,e.offset=1,r=[t,e]}return gC(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class SC extends CC{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=BO(t[0],!1);a.offset=0,i.push(a);const u=BO(t[0],!1);u.offset=EC(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=BO(t[r],!1);s.offset=EC((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return gC(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function EC(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class TC{}class IC extends TC{normalizePropertyName(t,e){return ZO(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(xC[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const xC=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function kC(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const AC={};class jC{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||AC,d=this.buildStyles(n,s&&s.params||AC,l),f=a&&a.params||AC,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=c?[]:bC(t,e,this.ast.animation,i,o,d,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return kC(e,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=CO(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=CO(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const O=QO(g.values());return kC(e,this._triggerName,n,r,v,d,p,_,O,m,y,w)}}class PC{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=qO(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=$O(o,r,e)),n[t]=o})}}),n}}class RC{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new PC(t.style,t.options&&t.options.params||{})}),NC(this.states,"true","1"),NC(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new jC(t,e,this.states))}),this.fallbackTransition=new jC(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function NC(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const DC=new mC;class LC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=cC(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=bO(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=bC(this._driver,e,i,"ng-enter","ng-leave",{},{},n,DC,r),o.forEach(t=>{const e=CO(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=vO(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=OO(e,"","","");return _O(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const FC=[],MC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},UC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class VC{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=qO(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const qC=new VC("void");class BC{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,GC(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=CO(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=CO(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(GC(t,"ng-trigger"),GC(t,"ng-trigger-"+e),a[e]=qC),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new zC(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(GC(t,"ng-trigger"),GC(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new VC(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=qC),"void"!==u.value&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{XO(t,n),YO(t,r)})}return}const c=CO(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(GC(t,"ng-animate-queued"),o.onStart(()=>{$C(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&vO(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||qC,a=new VC("void"),u=new zC(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==MC||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){GC(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=OO(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,_O(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class HC{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new BC(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(YC(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!YC(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),GC(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),$C(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(YC(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return YC(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return vO(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=MC,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)GC(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?vO(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new mC,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=KC(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n="ng-enter"+p++;f.set(e,n),t.forEach(t=>GC(t,n))});const g=[],m=new Set,y=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=KC(h,Array.from(m));b.forEach((t,e)=>{const n="ng-leave"+p++;v.set(e,n),t.forEach(t=>GC(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>$C(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>$C(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>XO(i,p.fromStyles)),e.onDestroy(()=>YO(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>XO(i,p.fromStyles)),e.onDestroy(()=>YO(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>CO(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const O=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,O))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{CO(O,e,[]).push(t),t.destroy()})});const S=g.filter(t=>ZC(t,a,u)),E=new Map;WC(E,this.driver,y,u,"*").forEach(t=>{ZC(t,a,u)&&S.push(t)});const T=new Map;d.forEach((t,e)=>{WC(T,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=E.get(t),n=T.get(t);E.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],k={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>YO(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=k;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,O,i,T,E);if(o.setRealPlayer(n),t===k)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=vO(e)),r.push(o)}}else XO(e,s.fromStyles),o.onDestroy(()=>YO(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=vO(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<g.length;A++){const t=g[A],e=t.__ng_removed;if($C(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?QC(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=CO(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}XO(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new gO(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return JC(t,e),e}((n.get(h)||FC).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=bO(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new zC(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{CO(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>GC(t,"ng-animating"));const d=vO(h);return d.onDestroy(()=>{c.forEach(t=>$C(t,"ng-animating")),YO(a,e.toStyles)}),l.forEach(t=>{CO(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new gO(t.duration,t.delay)}}class zC{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new gO,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>_O(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){CO(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function YC(t){return t&&1===t.nodeType}function XC(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function WC(t,e,n,r,i){const o=[];n.forEach(t=>o.push(XC(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=UC,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>XC(t,o[a++])),s}function KC(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function GC(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function $C(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function QC(t,e,n){vO(n).onDone(()=>t.processLeaveNode(e))}function JC(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof mO?JC(r.players,e):e.push(r)}}function ZC(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class tS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new HC(t,e,n),this._timelineEngine=new LC(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=cC(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new RC(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=SO(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=SO(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function eS(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=rS(e[0]),e.length>1&&(r=rS(e[e.length-1]))):e&&(n=rS(e)),n||r?new nS(t,n,r):null}let nS=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&YO(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(YO(this._element,this._initialStyles),this._endStyles&&(YO(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(XO(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(XO(this._element,this._endStyles),this._endStyles=null),YO(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function rS(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];iS(i)&&(e=e||{},e[i]=t[i])}return e}function iS(t){return"display"===t||"position"===t}class oS{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=hS(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),lS(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),cS(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){sS(this._element,this._name,"paused")}resume(){sS(this._element,this._name,"running")}setPosition(t){const e=aS(this._element,this._name);this._position=t*this._duration,lS(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),cS(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=hS(t,"").split(","),r=uS(n,e);r>=0&&(n.splice(r,1),lS(t,"",n.join(",")))}(this._element,this._name))}}function sS(t,e,n){lS(t,"PlayState",n,aS(t,e))}function aS(t,e){const n=hS(t,"");return n.indexOf(",")>0?uS(n.split(","),e):uS([n],e)}function uS(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function cS(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function lS(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function hS(t,e){return t.style["animation"+e]||""}class dS{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new oS(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:rC(this.element,n))})}this.currentSnapshot=t}}class fS extends gO{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=DO(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class pS{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return jO(t)}matchesElement(t,e){return PO(t,e)}containsElement(t,e){return RO(t,e)}query(t,e,n){return NO(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>DO(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof dS),u={};tC(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=eC(t,e,u));if(0==n)return new fS(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=eS(t,e),f=new dS(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class gS{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:rC(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class mS{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(yS().toString()),this._cssKeyframesDriver=new pS}validateStyleProperty(t){return jO(t)}matchesElement(t,e){return PO(t,e)}containsElement(t,e){return RO(t,e)}query(t,e,n){return NO(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof gS);tC(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=eS(t,e=eC(t,e=e.map(t=>BO(t,!1)),u));return new gS(t,e,a,l)}}function yS(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let vS=(()=>{class t extends uO{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.Y.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?lO(t):t;return wS(this._renderer,null,e,"register",[n]),new bS(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.cc(r.M),r.cc(s))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();class bS extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new _S(this._id,t,e||{},this._renderer)}}class _S{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return wS(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function wS(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let OS=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new CS("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new SS(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.cc(r.M),r.cc(tS),r.cc(r.F))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();class CS{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class SS extends CS{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let ES=(()=>{class t extends tS{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.cc(s),r.cc(FO),r.cc(TC))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac}),t})();const TS=[{provide:FO,useFactory:function(){return"function"==typeof yS()?new mS:new pS}},{provide:new r.u("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:uO,useClass:vS},{provide:TC,useFactory:function(){return new IC}},{provide:tS,useClass:ES},{provide:r.M,useFactory:function(t,e,n){return new OS(t,e,n)},deps:[ut,tS,r.F]}];let IS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:TS,imports:[Ct]}),t})();function xS(t,e){1&t&&(r.Yb(0,"div",1),r.Yb(1,"div",2),r.Yb(2,"nav",3),r.Yb(3,"div",4),r.Yb(4,"ul",5),r.Yb(5,"li",6),r.Yb(6,"a",7),r.Ub(7,"i",8),r.xc(8,"Evcil Hayvan Ekle "),r.Xb(),r.Xb(),r.Yb(9,"li",6),r.Yb(10,"a",9),r.Ub(11,"i",10),r.xc(12,"Evcil Hayvan Listele "),r.Xb(),r.Xb(),r.Yb(13,"li",6),r.Yb(14,"a",11),r.Ub(15,"i",10),r.xc(16,"Kullan\u0131c\u0131 Ekle "),r.Xb(),r.Xb(),r.Yb(17,"li",6),r.Yb(18,"a",12),r.Ub(19,"i",10),r.xc(20,"Kullan\u0131c\u0131 Listele "),r.Xb(),r.Xb(),r.Yb(21,"li",6),r.Yb(22,"a",13),r.Ub(23,"i",10),r.xc(24,"User Detail "),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(25,"main",14),r.Yb(26,"div",15),r.Ub(27,"router-outlet"),r.Xb(),r.Xb(),r.Xb(),r.Xb())}let kS=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Qb))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-general-page"]],decls:1,vars:1,consts:[["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar",2,"margin-top","70px"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/add-pet","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-plus"],["routerLink","/view-pets","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-list-ul"],["routerLink","/add-user","routerLinkActive","active",1,"nav-link"],["routerLink","/view-users","routerLinkActive","active",1,"nav-link"],["routerLink","/detail-user","routerLinkActive","active",1,"nav-link"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4",2,"margin-top","50px"],[1,"inner-adjust"]],template:function(t,e){1&t&&r.wc(0,xS,28,0,"div",0),2&t&&r.kc("ngIf",e.authService.isLoggedIn())},directives:[F,Ci,Ei,Ti],styles:[""]}),t})();class AS{}let jS=(()=>{class t{constructor(t,e){this.angularFirestore=t,this.db=e,this.dbPath="/pets",this.petsRef=e.list(this.dbPath)}createPet(t){return this.angularFirestore.collection("pets").add({name:t.name,animalType:t.animalType,photoUrl:t.photoUrl})}getPetList(){return this.angularFirestore.collection("pets").snapshotChanges().pipe(Object(jt.a)(t=>t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))))}getCurrentPet(){return new Promise((t,e)=>{})}savePet(t){const e=JSON.parse(JSON.stringify(t));return this.angularFirestore.collection("pets").add(e)}update(t,e){const n=JSON.parse(JSON.stringify(e));return this.angularFirestore.doc("pets/"+t).update(n)}delete(t){return this.angularFirestore.doc("pets/"+t).delete()}getPetById(t){return this.angularFirestore.doc("pets/"+t).valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.cc(Gb),r.cc(go))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const PS=["toast-component",""];function RS(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",5),r.fc("click",function(){return r.qc(t),r.hc().remove()}),r.Yb(1,"span",6),r.xc(2,"\xd7"),r.Xb(),r.Xb()}}function NS(t,e){if(1&t&&(r.Wb(0),r.xc(1),r.Vb()),2&t){const t=r.hc(2);r.Ib(1),r.zc("[",t.duplicatesCount+1,"]")}}function DS(t,e){if(1&t&&(r.Yb(0,"div"),r.xc(1),r.wc(2,NS,2,1,"ng-container",4),r.Xb()),2&t){const t=r.hc();r.Kb(t.options.titleClass),r.Jb("aria-label",t.title),r.Ib(1),r.zc(" ",t.title," "),r.Ib(1),r.kc("ngIf",t.duplicatesCount)}}function LS(t,e){if(1&t&&r.Ub(0,"div",7),2&t){const t=r.hc();r.Kb(t.options.messageClass),r.kc("innerHTML",t.message,r.rc)}}function FS(t,e){if(1&t&&(r.Yb(0,"div",8),r.xc(1),r.Xb()),2&t){const t=r.hc();r.Kb(t.options.messageClass),r.Jb("aria-label",t.message),r.Ib(1),r.zc(" ",t.message," ")}}function MS(t,e){if(1&t&&(r.Yb(0,"div"),r.Ub(1,"div",9),r.Xb()),2&t){const t=r.hc();r.Ib(1),r.uc("width",t.width+"%")}}function US(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",5),r.fc("click",function(){return r.qc(t),r.hc().remove()}),r.Yb(1,"span",6),r.xc(2,"\xd7"),r.Xb(),r.Xb()}}function VS(t,e){if(1&t&&(r.Wb(0),r.xc(1),r.Vb()),2&t){const t=r.hc(2);r.Ib(1),r.zc("[",t.duplicatesCount+1,"]")}}function qS(t,e){if(1&t&&(r.Yb(0,"div"),r.xc(1),r.wc(2,VS,2,1,"ng-container",4),r.Xb()),2&t){const t=r.hc();r.Kb(t.options.titleClass),r.Jb("aria-label",t.title),r.Ib(1),r.zc(" ",t.title," "),r.Ib(1),r.kc("ngIf",t.duplicatesCount)}}function BS(t,e){if(1&t&&r.Ub(0,"div",7),2&t){const t=r.hc();r.Kb(t.options.messageClass),r.kc("innerHTML",t.message,r.rc)}}function HS(t,e){if(1&t&&(r.Yb(0,"div",8),r.xc(1),r.Xb()),2&t){const t=r.hc();r.Kb(t.options.messageClass),r.Jb("aria-label",t.message),r.Ib(1),r.zc(" ",t.message," ")}}function zS(t,e){if(1&t&&(r.Yb(0,"div"),r.Ub(1,"div",9),r.Xb()),2&t){const t=r.hc();r.Ib(1),r.uc("width",t.width+"%")}}class YS{constructor(t,e,n,r,i,o){this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=i,this.toastRef=o,this._onTap=new Et.a,this._onAction=new Et.a,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const XS={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},WS=new r.u("ToastConfig");class KS{constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class GS extends class{attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}{constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){const n=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=n.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let $S=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(r.cc(s))},t.\u0275prov=Object(r.Pb)({factory:function(){return new t(Object(r.cc)(s))},token:t,providedIn:"root"}),t})();class QS{constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let JS=(()=>{class t{constructor(t,e,n,r){this._overlayContainer=t,this._componentFactoryResolver=e,this._appRef=n,this._document=r,this._paneElements=new Map}create(t,e){return this._createOverlayRef(this.getPaneElement(t,e))}getPaneElement(t="",e){return this._paneElements.get(e)||this._paneElements.set(e,{}),this._paneElements.get(e)[t]||(this._paneElements.get(e)[t]=this._createPaneElement(t,e)),this._paneElements.get(e)[t]}_createPaneElement(t,e){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(t),n.classList.add("toast-container"),e?e.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(t){return new GS(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new QS(this._createPortalHost(t))}}return t.\u0275fac=function(e){return new(e||t)(r.cc($S),r.cc(r.l),r.cc(r.g),r.cc(s))},t.\u0275prov=Object(r.Pb)({factory:function(){return new t(Object(r.cc)($S),Object(r.cc)(r.l),Object(r.cc)(r.g),Object(r.cc)(s))},token:t,providedIn:"root"}),t})();class ZS{constructor(t){this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new Et.a,this._activate=new Et.a,this._manualClose=new Et.a,this._resetTimeout=new Et.a,this._countDuplicate=new Et.a}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class tE{constructor(t,e){this._toastPackage=t,this._parentInjector=e}get(t,e,n){return t===YS?this._toastPackage:this._parentInjector.get(t,e,n)}}let eE=(()=>{class t{constructor(t,e,n,r,i){this.overlay=e,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,e,n={},r=""){return this._preBuildNotification(r,t,e,this.applyConfig(n))}success(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,e,this.applyConfig(n))}error(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,e,this.applyConfig(n))}info(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,e,this.applyConfig(n))}warning(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,e,this.applyConfig(n))}clear(t){for(const e of this.toasts)if(void 0!==t){if(e.toastId===t)return void e.toastRef.manualClose()}else e.toastRef.manualClose()}remove(t){const e=this._findToast(t);if(!e)return!1;if(e.activeToast.toastRef.close(),this.toasts.splice(e.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const t=this.toasts[this.currentlyActive].toastRef;t.isInactive()||(this.currentlyActive=this.currentlyActive+1,t.activate())}return!0}findDuplicate(t="",e="",n,r){const{includeTitleDuplicates:i}=this.toastrConfig;for(const o of this.toasts){const s=i&&o.title===t;if((!i||s)&&o.message===e)return o.toastRef.onDuplicate(n,r),o}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let e=0;e<this.toasts.length;e++)if(this.toasts[e].toastId===t)return{index:e,activeToast:this.toasts[e]};return null}_preBuildNotification(t,e,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,e,n,r)):this._buildNotification(t,e,n,r)}_buildNotification(t,e,n,i){if(!i.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(n,e,this.toastrConfig.resetTimeoutOnDuplicate&&i.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||e)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=e;let s=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(s=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const a=this.overlay.create(i.positionClass,this.overlayContainer);this.index=this.index+1;let u=e;e&&i.enableHtml&&(u=this.sanitizer.sanitize(r.P.HTML,e));const c=new ZS(a),l=new YS(this.index,i,u,n,t,c),h=new tE(l,this._injector),d=new KS(i.toastComponent,h),f=a.attach(d,this.toastrConfig.newestOnTop);c.componentInstance=f.instance;const p={toastId:this.index,title:n||"",message:e||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:f};return s||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{p.toastRef.activate()})),this.toasts.push(p),p}}return t.\u0275fac=function(e){return new(e||t)(r.cc(WS),r.cc(JS),r.cc(r.v),r.cc(vt),r.cc(r.F))},t.\u0275prov=Object(r.Pb)({factory:function(){return new t(Object(r.cc)(WS),Object(r.cc)(JS),Object(r.cc)(r.r),Object(r.cc)(vt),Object(r.cc)(r.F))},token:t,providedIn:"root"}),t})(),nE=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),e)):this.timeout=setTimeout(()=>t(),e)}outsideInterval(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),e)):this.intervalId=setInterval(()=>t(),e)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}var e;return t.\u0275fac=function(e){return new(e||t)(r.Tb(eE),r.Tb(YS),r.Tb(r.F))},t.\u0275cmp=r.Nb({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,e){1&t&&r.fc("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.vc("@flyInOut",e.state),r.Kb(e.toastClasses),r.uc("display",e.displayStyle))},attrs:PS,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.wc(0,RS,3,0,"button",0),r.wc(1,DS,3,5,"div",1),r.wc(2,LS,1,3,"div",2),r.wc(3,FS,2,4,"div",3),r.wc(4,MS,2,2,"div",4)),2&t&&(r.kc("ngIf",e.options.closeButton),r.Ib(1),r.kc("ngIf",e.title),r.Ib(1),r.kc("ngIf",e.message&&e.options.enableHtml),r.Ib(1),r.kc("ngIf",e.message&&!e.options.enableHtml),r.Ib(1),r.kc("ngIf",e.options.progressBar))},directives:[F],encapsulation:2,data:{animation:[(e=[dO("inactive",hO({opacity:0})),dO("active",hO({opacity:1})),dO("removed",hO({opacity:0})),fO("inactive => active",cO("{{ easeTime }}ms {{ easing }}")),fO("active => removed",cO("{{ easeTime }}ms {{ easing }}"))],{type:7,name:"flyInOut",definitions:e,options:{}})]}}),t})();const rE=Object.assign(Object.assign({},XS),{toastComponent:nE});let iE=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:WS,useValue:{default:rE,config:e}}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({imports:[[B]]}),t})(),oE=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.appRef=n,this.width=-1,this.toastClasses="",this.state="inactive",this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state&&(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(eE),r.Tb(YS),r.Tb(r.g))},t.\u0275cmp=r.Nb({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,e){1&t&&r.fc("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.Kb(e.toastClasses),r.uc("display",e.displayStyle))},attrs:PS,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.wc(0,US,3,0,"button",0),r.wc(1,qS,3,5,"div",1),r.wc(2,BS,1,3,"div",2),r.wc(3,HS,2,4,"div",3),r.wc(4,zS,2,2,"div",4)),2&t&&(r.kc("ngIf",e.options.closeButton),r.Ib(1),r.kc("ngIf",e.title),r.Ib(1),r.kc("ngIf",e.message&&e.options.enableHtml),r.Ib(1),r.kc("ngIf",e.message&&!e.options.enableHtml),r.Ib(1),r.kc("ngIf",e.options.progressBar))},directives:[F],encapsulation:2}),t})();function sE(t,e){1&t&&(r.Yb(0,"p",15),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen isminizi giriniz "),r.Xb())}function aE(t,e){1&t&&(r.Yb(0,"p",15),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"\u0130sim alan\u0131 2 karakterden b\xfcy\xfck olmal\u0131"),r.Xb())}function uE(t,e){1&t&&(r.Yb(0,"p",15),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen ge\xe7erli bir Hayvan T\xfcr\xfc giriniz"),r.Xb())}function cE(t,e){1&t&&(r.Yb(0,"p",15),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"Bir Resim Kaydedin"),r.Xb())}Object.assign(Object.assign({},XS),{toastComponent:oE});let lE=(()=>{class t{constructor(t,e,n,r){this.petService=t,this.fb=e,this.toastr=n,this.router=r,this.pet=new AS}ngOnInit(){this.petForm()}petForm(){this.petsForm=this.fb.group({name:["",[Q_.required,Q_.minLength(2)]],userName:["",[Q_.required,Q_.minLength(2)]],animalType:["",[Q_.required,Q_.minLength(2)]],photoUrl:[""]})}get name(){return this.petsForm.get("name")}get userName(){return this.petsForm.get("userName")}get animalType(){return this.petsForm.get("animalType")}get photoUrl(){return this.petsForm.get("photoUrl")}ResetForm(){this.petsForm.reset()}submitPetData(){this.petService.createPet(this.petsForm.value),this.toastr.success(this.petsForm.controls.name.value+" ba\u015far\u0131yla kaydedildi!"),this.ResetForm()}goBack(){this.router.navigate(["/general-page"])}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(jS),r.Tb(aO),r.Tb(eE),r.Tb(wi))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-pet"]],decls:35,vars:5,consts:[[1,"btn-group",2,"margin-left","100px"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"pt-3","pb-2","mb-3","border-bottom",2,"margin-left","100px"],[1,"h2"],["novalidate","",2,"margin-left","100px",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","animalType","required","",1,"form-control"],["type","text","formControlName","photoUrl","required","",1,"form-control"],[1,"form-group","text-right"],["type","button",1,"btn","btn-warning","mr-2",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"error"]],template:function(t,e){1&t&&(r.Ub(0,"br"),r.Ub(1,"br"),r.Ub(2,"br"),r.Yb(3,"div",0),r.Yb(4,"button",1),r.fc("click",function(){return e.goBack()}),r.xc(5,"Geri Git"),r.Xb(),r.Xb(),r.Yb(6,"div",2),r.Yb(7,"h1",3),r.xc(8,"Evcil Hayvan Kay\u0131t"),r.Xb(),r.Xb(),r.Yb(9,"form",4),r.fc("ngSubmit",function(){return e.submitPetData()}),r.Yb(10,"div",5),r.Yb(11,"div",6),r.Yb(12,"div",5),r.Yb(13,"div",7),r.Yb(14,"label"),r.xc(15,"\u0130sim"),r.Xb(),r.Ub(16,"input",8),r.wc(17,sE,4,0,"p",9),r.wc(18,aE,4,0,"p",9),r.Xb(),r.Xb(),r.Yb(19,"div",5),r.Yb(20,"div",7),r.Yb(21,"label"),r.xc(22,"Hayvan T\xfcr\xfc"),r.Xb(),r.Ub(23,"input",10),r.wc(24,uE,4,0,"p",9),r.Xb(),r.Yb(25,"div",7),r.Yb(26,"label"),r.xc(27,"Foto\u011fraf"),r.Xb(),r.Ub(28,"input",11),r.wc(29,cE,4,0,"p",9),r.Xb(),r.Xb(),r.Yb(30,"div",12),r.Yb(31,"button",13),r.fc("click",function(){return e.ResetForm()}),r.xc(32,"S\u0131f\u0131rla"),r.Xb(),r.Yb(33,"button",14),r.xc(34,"Kaydet"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.Ib(9),r.kc("formGroup",e.petsForm),r.Ib(8),r.kc("ngIf",(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid)),r.Ib(1),r.kc("ngIf",null==e.name||null==e.name.errors?null:e.name.errors.minlength),r.Ib(6),r.kc("ngIf",null==e.animalType||null==e.animalType.errors?null:e.animalType.errors.minlength),r.Ib(5),r.kc("ngIf",(null==e.photoUrl?null:e.photoUrl.touched)&&(null==e.photoUrl?null:e.photoUrl.invalid)))},directives:[qw,vw,Yw,Y_,yw,Ww,rO,F],styles:["p.error[_ngcontent-%COMP%]{color:red}"]}),t})();function hE(t,e){if(1&t){var n=r.Zb();r.Yb(0,"a",11),r.fc("keyup.enter",function(){return r.qc(n),r.hc(3),r.pc(1).previous()})("click",function(){return r.qc(n),r.hc(3),r.pc(1).previous()}),r.xc(1),r.Yb(2,"span",12),r.xc(3),r.Xb(),r.Xb()}if(2&t){var i=r.hc(3);r.Jb("aria-label",i.previousLabel+" "+i.screenReaderPageLabel),r.Ib(1),r.zc(" ",i.previousLabel," "),r.Ib(2),r.yc(i.screenReaderPageLabel)}}function dE(t,e){if(1&t&&(r.Yb(0,"span"),r.xc(1),r.Yb(2,"span",12),r.xc(3),r.Xb(),r.Xb()),2&t){var n=r.hc(3);r.Ib(1),r.zc(" ",n.previousLabel," "),r.Ib(2),r.yc(n.screenReaderPageLabel)}}function fE(t,e){if(1&t&&(r.Yb(0,"li",8),r.wc(1,hE,4,3,"a",9),r.wc(2,dE,4,2,"span",10),r.Xb()),2&t){r.hc(2);var n=r.pc(1);r.Lb("disabled",n.isFirstPage()),r.Ib(1),r.kc("ngIf",1<n.getCurrent()),r.Ib(1),r.kc("ngIf",n.isFirstPage())}}function pE(t,e){if(1&t){var n=r.Zb();r.Yb(0,"a",11),r.fc("keyup.enter",function(){r.qc(n);var t=r.hc().$implicit;return r.hc(2),r.pc(1).setCurrent(t.value)})("click",function(){r.qc(n);var t=r.hc().$implicit;return r.hc(2),r.pc(1).setCurrent(t.value)}),r.Yb(1,"span",12),r.xc(2),r.Xb(),r.Yb(3,"span"),r.xc(4),r.ic(5,"number"),r.Xb(),r.Xb()}if(2&t){var i=r.hc().$implicit,o=r.hc(2);r.Ib(2),r.zc("",o.screenReaderPageLabel," "),r.Ib(2),r.yc("..."===i.label?i.label:r.jc(5,2,i.label,""))}}function gE(t,e){if(1&t&&(r.Wb(0),r.Yb(1,"span",12),r.xc(2),r.Xb(),r.Yb(3,"span"),r.xc(4),r.ic(5,"number"),r.Xb(),r.Vb()),2&t){var n=r.hc().$implicit,i=r.hc(2);r.Ib(2),r.zc("",i.screenReaderCurrentLabel," "),r.Ib(2),r.yc("..."===n.label?n.label:r.jc(5,2,n.label,""))}}function mE(t,e){if(1&t&&(r.Yb(0,"li"),r.wc(1,pE,6,5,"a",9),r.wc(2,gE,6,5,"ng-container",10),r.Xb()),2&t){var n=e.$implicit;r.hc(2);var i=r.pc(1);r.Lb("current",i.getCurrent()===n.value)("ellipsis","..."===n.label),r.Ib(1),r.kc("ngIf",i.getCurrent()!==n.value),r.Ib(1),r.kc("ngIf",i.getCurrent()===n.value)}}function yE(t,e){if(1&t){var n=r.Zb();r.Yb(0,"a",11),r.fc("keyup.enter",function(){return r.qc(n),r.hc(3),r.pc(1).next()})("click",function(){return r.qc(n),r.hc(3),r.pc(1).next()}),r.xc(1),r.Yb(2,"span",12),r.xc(3),r.Xb(),r.Xb()}if(2&t){var i=r.hc(3);r.Jb("aria-label",i.nextLabel+" "+i.screenReaderPageLabel),r.Ib(1),r.zc(" ",i.nextLabel," "),r.Ib(2),r.yc(i.screenReaderPageLabel)}}function vE(t,e){if(1&t&&(r.Yb(0,"span"),r.xc(1),r.Yb(2,"span",12),r.xc(3),r.Xb(),r.Xb()),2&t){var n=r.hc(3);r.Ib(1),r.zc(" ",n.nextLabel," "),r.Ib(2),r.yc(n.screenReaderPageLabel)}}function bE(t,e){if(1&t&&(r.Yb(0,"li",13),r.wc(1,yE,4,3,"a",9),r.wc(2,vE,4,2,"span",10),r.Xb()),2&t){r.hc(2);var n=r.pc(1);r.Lb("disabled",n.isLastPage()),r.Ib(1),r.kc("ngIf",!n.isLastPage()),r.Ib(1),r.kc("ngIf",n.isLastPage())}}function _E(t,e){if(1&t&&(r.Yb(0,"ul",3),r.wc(1,fE,3,4,"li",4),r.Yb(2,"li",5),r.xc(3),r.Xb(),r.wc(4,mE,3,6,"li",6),r.wc(5,bE,3,4,"li",7),r.Xb()),2&t){var n=r.hc(),i=r.pc(1);r.Lb("responsive",n.responsive),r.Jb("aria-label",n.screenReaderPaginationLabel),r.Ib(1),r.kc("ngIf",n.directionLinks),r.Ib(2),r.Ac(" ",i.getCurrent()," / ",i.getLastPage()," "),r.Ib(1),r.kc("ngForOf",i.pages),r.Ib(1),r.kc("ngIf",n.directionLinks)}}var wE=function(){function t(){this.change=new r.q,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}return t.prototype.defaultId=function(){return this.DEFAULT_ID},t.prototype.register=function(t){return null==t.id&&(t.id=this.DEFAULT_ID),this.instances[t.id]?this.updateInstance(t):(this.instances[t.id]=t,!0)},t.prototype.updateInstance=function(t){var e=!1;for(var n in this.instances[t.id])t[n]!==this.instances[t.id][n]&&(this.instances[t.id][n]=t[n],e=!0);return e},t.prototype.getCurrentPage=function(t){if(this.instances[t])return this.instances[t].currentPage},t.prototype.setCurrentPage=function(t,e){if(this.instances[t]){var n=this.instances[t];e<=Math.ceil(n.totalItems/n.itemsPerPage)&&1<=e&&(this.instances[t].currentPage=e,this.change.emit(t))}},t.prototype.setTotalItems=function(t,e){this.instances[t]&&0<=e&&(this.instances[t].totalItems=e,this.change.emit(t))},t.prototype.setItemsPerPage=function(t,e){this.instances[t]&&(this.instances[t].itemsPerPage=e,this.change.emit(t))},t.prototype.getInstance=function(t){return void 0===t&&(t=this.DEFAULT_ID),this.instances[t]?this.clone(this.instances[t]):{}},t.prototype.clone=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Pb({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),OE=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},CE=Number.MAX_SAFE_INTEGER,SE=function(){function t(t){this.service=t,this.state={}}return t.prototype.transform=function(t,e){if(!(t instanceof Array)){var n=e.id||this.service.defaultId();return this.state[n]?this.state[n].slice:t}var r,i,o=e.totalItems&&e.totalItems!==t.length,s=this.createInstance(t,e),a=s.id,u=s.itemsPerPage,c=this.service.register(s);if(!o&&t instanceof Array){if(this.stateIsIdentical(a,t,r=(s.currentPage-1)*(u=+u||CE),i=r+u))return this.state[a].slice;var l=t.slice(r,i);return this.saveState(a,t,l,r,i),this.service.change.emit(a),l}return c&&this.service.change.emit(a),this.saveState(a,t,t,r,i),t},t.prototype.createInstance=function(t,e){return this.checkConfig(e),{id:null!=e.id?e.id:this.service.defaultId(),itemsPerPage:+e.itemsPerPage||0,currentPage:+e.currentPage||1,totalItems:+e.totalItems||t.length}},t.prototype.checkConfig=function(t){var e=["itemsPerPage","currentPage"].filter(function(e){return!(e in t)});if(0<e.length)throw new Error("PaginatePipe: Argument is missing the following required properties: "+e.join(", "))},t.prototype.saveState=function(t,e,n,r,i){this.state[t]={collection:e,size:e.length,slice:n,start:r,end:i}},t.prototype.stateIsIdentical=function(t,e,n,r){var i=this.state[t];return!!i&&!(i.size!==e.length||i.start!==n||i.end!==r)&&i.slice.every(function(t,r){return t===e[n+r]})},(t=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([OE("design:paramtypes",[wE])],t)).\u0275fac=function(e){return new(e||t)(r.Tb(wE))},t.\u0275pipe=r.Sb({name:"paginate",type:t,pure:!1}),t}(),EE=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},TE=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};function IE(t){return!!t&&"false"!==t}var xE=function(){function t(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new r.q,this.pageBoundsCorrection=new r.q,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}return Object.defineProperty(t.prototype,"directionLinks",{get:function(){return this._directionLinks},set:function(t){this._directionLinks=IE(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoHide",{get:function(){return this._autoHide},set:function(t){this._autoHide=IE(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"responsive",{get:function(){return this._responsive},set:function(t){this._responsive=IE(t)},enumerable:!0,configurable:!0}),EE([Object(r.w)(),TE("design:type",String)],t.prototype,"id",void 0),EE([Object(r.w)(),TE("design:type",Number)],t.prototype,"maxSize",void 0),EE([Object(r.w)(),TE("design:type",Boolean),TE("design:paramtypes",[Boolean])],t.prototype,"directionLinks",null),EE([Object(r.w)(),TE("design:type",Boolean),TE("design:paramtypes",[Boolean])],t.prototype,"autoHide",null),EE([Object(r.w)(),TE("design:type",Boolean),TE("design:paramtypes",[Boolean])],t.prototype,"responsive",null),EE([Object(r.w)(),TE("design:type",String)],t.prototype,"previousLabel",void 0),EE([Object(r.w)(),TE("design:type",String)],t.prototype,"nextLabel",void 0),EE([Object(r.w)(),TE("design:type",String)],t.prototype,"screenReaderPaginationLabel",void 0),EE([Object(r.w)(),TE("design:type",String)],t.prototype,"screenReaderPageLabel",void 0),EE([Object(r.w)(),TE("design:type",String)],t.prototype,"screenReaderCurrentLabel",void 0),EE([Object(r.H)(),TE("design:type",r.q)],t.prototype,"pageChange",void 0),EE([Object(r.H)(),TE("design:type",r.q)],t.prototype,"pageBoundsCorrection",void 0),t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Nb({type:t,selectors:[["pagination-controls"]],inputs:{maxSize:"maxSize",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",id:"id"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:3,vars:3,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["class","ngx-pagination","role","navigation",3,"responsive",4,"ngIf"],["role","navigation",1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],[4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],[1,"pagination-next"]],template:function(t,e){if(1&t&&(r.Yb(0,"pagination-template",0,1),r.fc("pageChange",function(t){return e.pageChange.emit(t)})("pageBoundsCorrection",function(t){return e.pageBoundsCorrection.emit(t)}),r.wc(2,_E,6,8,"ul",2),r.Xb()),2&t){var n=r.pc(1);r.kc("id",e.id)("maxSize",e.maxSize),r.Ib(2),r.kc("ngIf",!(e.autoHide&&n.pages.length<=1))}},directives:function(){return[jE,F,D]},pipes:function(){return[q]},styles:["\n.ngx-pagination {\n  margin-left: 0;\n  margin-bottom: 1rem; }\n  .ngx-pagination::before, .ngx-pagination::after {\n    content: ' ';\n    display: table; }\n  .ngx-pagination::after {\n    clear: both; }\n  .ngx-pagination li {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    margin-right: 0.0625rem;\n    border-radius: 0; }\n  .ngx-pagination li {\n    display: inline-block; }\n  .ngx-pagination a,\n  .ngx-pagination button {\n    color: #0a0a0a; \n    display: block;\n    padding: 0.1875rem 0.625rem;\n    border-radius: 0; }\n    .ngx-pagination a:hover,\n    .ngx-pagination button:hover {\n      background: #e6e6e6; }\n  .ngx-pagination .current {\n    padding: 0.1875rem 0.625rem;\n    background: #2199e8;\n    color: #fefefe;\n    cursor: default; }\n  .ngx-pagination .disabled {\n    padding: 0.1875rem 0.625rem;\n    color: #cacaca;\n    cursor: default; } \n    .ngx-pagination .disabled:hover {\n      background: transparent; }\n  .ngx-pagination a, .ngx-pagination button {\n    cursor: pointer; }\n\n.ngx-pagination .pagination-previous a::before,\n.ngx-pagination .pagination-previous.disabled::before { \n  content: '\xab';\n  display: inline-block;\n  margin-right: 0.5rem; }\n\n.ngx-pagination .pagination-next a::after,\n.ngx-pagination .pagination-next.disabled::after {\n  content: '\xbb';\n  display: inline-block;\n  margin-left: 0.5rem; }\n\n.ngx-pagination .show-for-sr {\n  position: absolute !important;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0); }\n.ngx-pagination .small-screen {\n  display: none; }\n@media screen and (max-width: 601px) {\n  .ngx-pagination.responsive .small-screen {\n    display: inline-block; } \n  .ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next) {\n    display: none; }\n}\n  "],encapsulation:2,changeDetection:0}),t}(),kE=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},AE=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},jE=function(){function t(t,e){var n=this;this.service=t,this.changeDetectorRef=e,this.maxSize=7,this.pageChange=new r.q,this.pageBoundsCorrection=new r.q,this.pages=[],this.changeSub=this.service.change.subscribe(function(t){n.id===t&&(n.updatePageLinks(),n.changeDetectorRef.markForCheck(),n.changeDetectorRef.detectChanges())})}return t.prototype.ngOnInit=function(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()},t.prototype.ngOnChanges=function(t){this.updatePageLinks()},t.prototype.ngOnDestroy=function(){this.changeSub.unsubscribe()},t.prototype.previous=function(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)},t.prototype.next=function(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)},t.prototype.isFirstPage=function(){return 1===this.getCurrent()},t.prototype.isLastPage=function(){return this.getLastPage()===this.getCurrent()},t.prototype.setCurrent=function(t){this.pageChange.emit(t)},t.prototype.getCurrent=function(){return this.service.getCurrentPage(this.id)},t.prototype.getLastPage=function(){var t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)},t.prototype.getTotalItems=function(){return this.service.getInstance(this.id).totalItems},t.prototype.checkValidId=function(){null==this.service.getInstance(this.id).id&&console.warn('PaginationControlsDirective: the specified id "'+this.id+'" does not match any registered PaginationInstance')},t.prototype.updatePageLinks=function(){var t=this,e=this.service.getInstance(this.id),n=this.outOfBoundCorrection(e);n!==e.currentPage?setTimeout(function(){t.pageBoundsCorrection.emit(n),t.pages=t.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,t.maxSize)}):this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)},t.prototype.outOfBoundCorrection=function(t){var e=Math.ceil(t.totalItems/t.itemsPerPage);return e<t.currentPage&&0<e?e:t.currentPage<1?1:t.currentPage},t.prototype.createPageArray=function(t,e,n,r){r=+r;for(var i=[],o=Math.ceil(n/e),s=Math.ceil(r/2),a=t<=s,u=o-s<t,c=!a&&!u,l=r<o,h=1;h<=o&&h<=r;){var d=this.calculatePageNumber(h,t,r,o);i.push({label:l&&(2===h&&(c||u)||h===r-1&&(c||a))?"...":d,value:d}),h++}return i},t.prototype.calculatePageNumber=function(t,e,n,r){var i=Math.ceil(n/2);return t===n?r:1===t?t:n<r?r-i<e?r-n+t:i<e?e-i+t:t:t},kE([Object(r.w)(),AE("design:type",String)],t.prototype,"id",void 0),kE([Object(r.w)(),AE("design:type",Number)],t.prototype,"maxSize",void 0),kE([Object(r.H)(),AE("design:type",r.q)],t.prototype,"pageChange",void 0),kE([Object(r.H)(),AE("design:type",r.q)],t.prototype,"pageBoundsCorrection",void 0),(t=kE([AE("design:paramtypes",[wE,r.i])],t)).\u0275fac=function(e){return new(e||t)(r.Tb(wE),r.Tb(r.i))},t.\u0275dir=r.Ob({type:t,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{maxSize:"maxSize",id:"id"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[r.Gb]}),t}(),PE=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:[wE],imports:[[B]]}),t}();function RE(t,e){1&t&&(r.Yb(0,"a",13),r.Ub(1,"i",14),r.xc(2," Evcil Hayvan ekle "),r.Xb())}function NE(t,e){1&t&&(r.Yb(0,"div",15),r.Yb(1,"p",16),r.xc(2,"Hen\xfcz bir evcil hayvan eklenmedi!"),r.Xb(),r.Yb(3,"a",17),r.Ub(4,"i",14),r.xc(5," Evcil Hayvan ekle "),r.Xb(),r.Xb())}function DE(t,e){if(1&t&&r.Ub(0,"img",24),2&t){const t=r.hc().$implicit;r.lc("src",t.photoUrl,r.sc)}}function LE(t,e){1&t&&(r.Yb(0,"td"),r.xc(1,"Resim Yok"),r.Xb())}function FE(t,e){if(1&t){const t=r.Zb();r.Yb(0,"tr"),r.Yb(1,"th",18),r.xc(2),r.Xb(),r.Yb(3,"td"),r.xc(4),r.Xb(),r.Yb(5,"td"),r.xc(6),r.Xb(),r.wc(7,DE,1,1,"img",19),r.wc(8,LE,2,0,"td",20),r.Yb(9,"td",21),r.Yb(10,"button",22),r.xc(11,"D\xfczenle"),r.Xb(),r.Yb(12,"button",23),r.fc("click",function(){r.qc(t);const n=e.$implicit;return r.hc().deleteUser(n)}),r.xc(13,"Sil"),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=e.$implicit;r.Ib(2),r.yc(t.id),r.Ib(2),r.yc(t.name),r.Ib(2),r.yc(t.animalType),r.Ib(1),r.kc("ngIf",t.photoUrl),r.Ib(1),r.kc("ngIf",!t.photoUrl),r.Ib(2),r.mc("routerLink","/edit-pet/",t.id,"")}}const ME=function(t){return{itemsPerPage:7,currentPage:t}};let UE=(()=>{class t{constructor(t,e,n,r){this.petService=t,this.toastr=e,this.location=n,this.router=r,this.p=1,this.hideWhenNoPet=!1,this.noData=!1}ngOnInit(){this.petService.getPetList().subscribe(t=>this.petList=t)}deleteUser(t){window.confirm("Bu Evcil hayvan\u0131 silmek istedi\u011fine emin misiniz ?")&&(this.petService.delete(t.id),this.toastr.success(t.name+" ba\u015far\u0131yla silindi!"))}goBack(){this.router.navigate(["/general-page"])}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(jS),r.Tb(eE),r.Tb(w),r.Tb(wi))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-pet-list"]],decls:30,vars:8,consts:[[1,"btn-group",2,"margin-left","5px"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom",2,"margin-left","5px"],[1,"h2"],["routerLink","/view-pet","class","btn btn-success",4,"ngIf"],[1,"pricing-header","mx-auto",2,"margin-left","5px"],["class","no-data text-center",4,"ngIf"],[1,"table-responsive",2,"margin-left","5px"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["AutoHide","true","Responsive","true",2,"margin-left","5px",3,"pageChange"],["routerLink","/view-pet",1,"btn","btn-success"],[1,"fas","fa-plus","custom-fa-plus"],[1,"no-data","text-center"],[1,"nodata-msg"],["routerLink","/register-user",1,"btn","btn-success"],["scope","row"],["style","width:50px; height:50px",3,"src",4,"ngIf"],[4,"ngIf"],[1,"text-center","action-block"],["type","submit",1,"btn","btn-primary",2,"margin-right","5px",3,"routerLink"],["type","submit",1,"btn","btn-primary",3,"click"],[2,"width","50px","height","50px",3,"src"]],template:function(t,e){1&t&&(r.Ub(0,"br"),r.Ub(1,"br"),r.Ub(2,"br"),r.Yb(3,"div",0),r.Yb(4,"button",1),r.fc("click",function(){return e.goBack()}),r.xc(5,"Geri Git"),r.Xb(),r.Xb(),r.Yb(6,"div",2),r.Yb(7,"h1",3),r.xc(8,"Evcil Hayvan Listesi"),r.Xb(),r.wc(9,RE,3,0,"a",4),r.Xb(),r.Yb(10,"div",5),r.wc(11,NE,6,0,"div",6),r.Yb(12,"div",7),r.Yb(13,"table",8),r.Yb(14,"thead"),r.Yb(15,"tr"),r.Yb(16,"th",9),r.xc(17,"Evcil Hayvan Id"),r.Xb(),r.Yb(18,"th",9),r.xc(19,"Evcil Hayvan Ad\u0131"),r.Xb(),r.Yb(20,"th",9),r.xc(21,"Hayvan T\xfcr\xfc"),r.Xb(),r.Yb(22,"th",9),r.xc(23,"Foto\u011fraf"),r.Xb(),r.Yb(24,"th",10),r.xc(25,"D\xfczenle"),r.Xb(),r.Xb(),r.Xb(),r.Yb(26,"tbody"),r.wc(27,FE,14,6,"tr",11),r.ic(28,"paginate"),r.Xb(),r.Xb(),r.Xb(),r.Yb(29,"pagination-controls",12),r.fc("pageChange",function(t){return e.p=t}),r.Xb(),r.Xb()),2&t&&(r.Ib(9),r.kc("ngIf",e.hideWhenNoPet),r.Ib(2),r.kc("ngIf",e.noData),r.Ib(16),r.kc("ngForOf",r.jc(28,3,e.petList,r.nc(6,ME,e.p))))},directives:[F,D,xE,Ci,Oi],pipes:[SE],styles:[""]}),t})();function VE(t,e){1&t&&(r.Yb(0,"p",19),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen bo\u015f b\u0131rakmay\u0131n\u0131z "),r.Xb())}function qE(t,e){1&t&&(r.Yb(0,"p",20),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"isim 2 kelimeden fazla olmal\u0131 "),r.Xb())}function BE(t,e){1&t&&(r.Yb(0,"p",20),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen bo\u015f b\u0131rakmay\u0131n\u0131z "),r.Xb())}function HE(t,e){1&t&&(r.Yb(0,"p",20),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen bo\u015f b\u0131rakmay\u0131n\u0131z "),r.Xb())}let zE=(()=>{class t{constructor(t,e,n,r,i){this.petService=t,this.fb=e,this.actRoute=n,this.router=r,this.toastr=i,this.title="Create",this.pet=new AS,this.actRoute.snapshot.params.id&&(this.petId=this.actRoute.snapshot.paramMap.get("id")||"id gelmiyor",console.log(this.petId))}ngOnInit(){this.petId&&(this.title="Edit",this.petService.getPetById(this.petId).subscribe(t=>{t&&(this.pet=t,console.log(t),this.updatePetData(t.name,t.animalType))}))}selectFile(t){this.selectedFiles=t.target.files}get name(){return this.editForm.get("name")}get userName(){return this.editForm.get("userName")}get animalType(){return this.editForm.get("animalType")}get photoUrl(){return this.editForm.get("photoUrl")}updatePetData(t,e){this.editForm=this.fb.group({name:[t],animalType:[e],photoUrl:[""]})}onPetFormSubmit(){this.petId?this.petService.update(this.petId,this.editForm.value).then(()=>{this.toastr.success(this.editForm.controls.name.value+" ba\u015far\u0131yla g\xfcncelle\u015ftirildi"),this.router.navigate(["/view-pets"])}):this.petService.savePet(this.pet).then(()=>{this.router.navigate(["/view-pets"])})}goBack(){this.router.navigate(["/general-page"])}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(jS),r.Tb(aO),r.Tb(nr),r.Tb(wi),r.Tb(eE))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-pet-update"]],decls:37,vars:6,consts:[[1,"pt-3","pb-2","mb-3","border-bottom",2,"margin-left","100px"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"row",2,"margin-left","100px"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["class","error",4,"ngIf"],["style","color:red;","class","error",4,"ngIf"],["type","string","formControlName","animalType","required","",1,"form-control"],["type","file","formControlName","photoUrl",1,"text-nowrap","text-truncate",3,"change"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"error"],[1,"error",2,"color","red"]],template:function(t,e){1&t&&(r.Ub(0,"br"),r.Ub(1,"br"),r.Ub(2,"br"),r.Yb(3,"div",0),r.Yb(4,"h1",1),r.xc(5,"Evcil Hayvan Detaylar\u0131 D\xfczenleme"),r.Xb(),r.Yb(6,"div",2),r.Yb(7,"div",3),r.Yb(8,"button",4),r.fc("click",function(){return e.goBack()}),r.xc(9,"Geri Git"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(10,"div",5),r.Yb(11,"div",6),r.Yb(12,"div",7),r.Yb(13,"form",8),r.fc("ngSubmit",function(){return e.onPetFormSubmit()}),r.Yb(14,"div",9),r.Yb(15,"div",10),r.Yb(16,"div",9),r.Yb(17,"div",11),r.Yb(18,"label"),r.xc(19,"\u0130sim"),r.Xb(),r.Ub(20,"input",12),r.wc(21,VE,4,0,"p",13),r.wc(22,qE,4,0,"p",14),r.Xb(),r.Xb(),r.Yb(23,"div",9),r.Yb(24,"div",11),r.Yb(25,"label"),r.xc(26,"Hayvan T\xfcr\xfc"),r.Xb(),r.Ub(27,"input",15),r.wc(28,BE,4,0,"p",14),r.Xb(),r.Yb(29,"div",11),r.Yb(30,"label"),r.xc(31,"PhotoUrl"),r.Xb(),r.Yb(32,"input",16),r.fc("change",function(t){return e.selectFile(t)}),r.Xb(),r.wc(33,HE,4,0,"p",14),r.Xb(),r.Xb(),r.Yb(34,"div",17),r.Yb(35,"button",18),r.xc(36," Evcil Hayvan\u0131 G\xfcncelle "),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.Ib(13),r.kc("formGroup",e.editForm),r.Ib(8),r.kc("ngIf",(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid)),r.Ib(1),r.kc("ngIf",null==e.name||null==e.name.errors?null:e.name.errors.minlength),r.Ib(6),r.kc("ngIf",(null==e.animalType?null:e.animalType.touched)&&(null==e.animalType?null:e.animalType.invalid)),r.Ib(5),r.kc("ngIf",(null==e.photoUrl?null:e.photoUrl.touched)&&(null==e.photoUrl?null:e.photoUrl.invalid)),r.Ib(2),r.kc("disabled",!e.editForm.valid))},directives:[qw,vw,Yw,Y_,yw,Ww,rO,F],styles:[""]}),t})(),YE=(()=>{class t{constructor(t,e,n,r,i){this.toastr=t,this.authService=e,this.userService=n,this.router=r,this.fb=i,this.errorMessage="",this.createForm()}ngOnInit(){}createForm(){this.loginForm=this.fb.group({email:["",Q_.required],password:["",Q_.required]})}tryLogin(t){this.authService.doLogin(t).then(t=>{this.toastr.success("Ho\u015fgeldiniz"),this.router.navigate(["/general-page"])},t=>{console.log(t),this.errorMessage="B\xf6yle bir kullan\u0131c\u0131 yok veya silinmi\u015f"})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(eE),r.Tb(Qb),r.Tb(Zb),r.Tb(wi),r.Tb(aO))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-login"]],decls:29,vars:2,consts:[[1,"header"],[1,"container"],[1,"row"],[1,"col-md-6","col-md-offset-3"],[3,"formGroup"],[1,"form-group"],["type","email","formControlName","email",1,"form-control"],["type","password","formControlName","password",1,"form-control"],[1,"error"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"col-md-4","col-md-offset-4"],["routerLink","/register-user","routerLinkActive","active",1,"nav-link"]],template:function(t,e){1&t&&(r.Ub(0,"br"),r.Ub(1,"br"),r.Ub(2,"br"),r.Ub(3,"br"),r.Ub(4,"br"),r.Yb(5,"h1",0),r.xc(6,"Firebase ile giri\u015f yap"),r.Xb(),r.Yb(7,"div",1),r.Yb(8,"div",2),r.Yb(9,"div",3),r.Yb(10,"form",4),r.Yb(11,"div",5),r.Yb(12,"label"),r.xc(13,"Email"),r.Xb(),r.Ub(14,"input",6),r.Xb(),r.Yb(15,"div",5),r.Yb(16,"label"),r.xc(17,"\u015eifre"),r.Xb(),r.Ub(18,"input",7),r.Yb(19,"label",8),r.xc(20),r.Xb(),r.Xb(),r.Yb(21,"button",9),r.fc("click",function(){return e.tryLogin(e.loginForm.value)}),r.xc(22,"Giri\u015f Yap"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(23,"div",2),r.Yb(24,"div",10),r.Yb(25,"p"),r.xc(26,"Hesab\u0131n Yok Mu? "),r.Yb(27,"a",11),r.xc(28,"Hesap olu\u015ftur"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.Ib(10),r.kc("formGroup",e.loginForm),r.Ib(10),r.yc(e.errorMessage))},directives:[qw,vw,Yw,Y_,yw,Ww,Ci,Ei],styles:[".header[_ngcontent-%COMP%]{text-align:center;font-size:30px;margin-bottom:40px}.row[_ngcontent-%COMP%]{margin-top:10px}.error[_ngcontent-%COMP%]{color:red}"]}),t})(),XE=(()=>{class t{constructor(t,e,n,r,i,o){this.userService=t,this.fb=e,this.toastr=n,this.activatedRoute=r,this.authService=i,this.router=o,this.errorMessage="",this.successMessage="",this.createForm()}ngOnInit(){}createForm(){this.registerForm=this.fb.group({email:["",Q_.required],password:["",Q_.required]})}tryRegister(t){this.authService.doRegister(t).then(t=>{console.log(t),this.errorMessage="",this.successMessage="Hesab\u0131n\u0131z olu\u015fturuldu",this.toastr.success(this.successMessage)},t=>{console.log(t),this.errorMessage=t.message,this.successMessage=""})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Zb),r.Tb(aO),r.Tb(eE),r.Tb(nr),r.Tb(Qb),r.Tb(wi))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-sign-up"]],decls:31,vars:3,consts:[[1,"header"],[1,"container"],[1,"row"],[1,"col-md-6","col-md-offset-3"],[3,"formGroup"],[1,"form-group"],["type","email","formControlName","email",1,"form-control"],["type","password","formControlName","password",1,"form-control"],[1,"error"],[1,"success"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"col-md-4","col-md-offset-4"],["routerLink","/login-user","routerLinkActive","active",1,"nav-link"]],template:function(t,e){1&t&&(r.Ub(0,"br"),r.Ub(1,"br"),r.Ub(2,"br"),r.Ub(3,"br"),r.Ub(4,"br"),r.Yb(5,"h1",0),r.xc(6,"Firebase ile hesap olu\u015ftur"),r.Xb(),r.Yb(7,"div",1),r.Yb(8,"div",2),r.Yb(9,"div",3),r.Yb(10,"form",4),r.Yb(11,"div",5),r.Yb(12,"label"),r.xc(13,"Email"),r.Xb(),r.Ub(14,"input",6),r.Xb(),r.Yb(15,"div",5),r.Yb(16,"label"),r.xc(17,"\u015eifre"),r.Xb(),r.Ub(18,"input",7),r.Yb(19,"label",8),r.xc(20),r.Xb(),r.Yb(21,"label",9),r.xc(22),r.Xb(),r.Xb(),r.Yb(23,"button",10),r.fc("click",function(){return e.tryRegister(e.registerForm.value)}),r.xc(24,"Kay\u0131t Ol"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(25,"div",2),r.Yb(26,"div",11),r.Yb(27,"p"),r.xc(28,"Hesab\u0131n Var M\u0131? "),r.Yb(29,"a",12),r.xc(30,"Giri\u015f Yap"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.Ib(10),r.kc("formGroup",e.registerForm),r.Ib(10),r.yc(e.errorMessage),r.Ib(2),r.yc(e.successMessage))},directives:[qw,vw,Yw,Y_,yw,Ww,Ci,Ei],styles:[".header[_ngcontent-%COMP%]{text-align:center;font-size:30px;margin-bottom:40px}.row[_ngcontent-%COMP%]{margin-top:10px}.error[_ngcontent-%COMP%]{color:red}.success[_ngcontent-%COMP%]{color:green}"]}),t})();class WE{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new KE(t,this.dueTime,this.scheduler))}}class KE extends zt.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(GE,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function GE(t){t.debouncedNext()}var $E=function(t){function e(n,r){var i=t.call(this,QE(n),"Firebase Storage: "+r+" ("+QE(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Sc.c)(e,t),e.prototype._codeEquals=function(t){return QE(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(wo.c);function QE(t){return"storage/"+t}function JE(){return new $E("unknown","An unknown error occurred, please check the error payload for server response.")}function ZE(){return new $E("canceled","User canceled the upload/download.")}function tT(){return new $E("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function eT(t){return new $E("invalid-argument",t)}function nT(){return new $E("app-deleted","The Firebase app was deleted.")}function rT(t){return new $E("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function iT(t,e){return new $E("invalid-format","String does not match format '"+t+"': "+e)}function oT(t){throw new $E("internal-error","Internal error: "+t)}var sT={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},aT=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function uT(t,e){switch(t){case sT.RAW:return new aT(cT(e));case sT.BASE64:case sT.BASE64URL:return new aT(lT(t,e));case sT.DATA_URL:return new aT((n=new hT(e)).base64?lT(sT.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Ab){throw iT(sT.DATA_URL,"Malformed data URL.")}return cT(e)}(n.rest),new hT(e).contentType)}var n;throw JE()}function cT(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function lT(t,e){switch(t){case sT.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw iT(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case sT.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw iT(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Ab){throw iT(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var hT=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw iT(sT.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),dT={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fT(t){switch(t){case"running":case"pausing":case"canceling":return dT.RUNNING;case"paused":return dT.PAUSED;case"success":return dT.SUCCESS;case"canceled":return dT.CANCELED;case"error":default:return dT.ERROR}}var pT=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),gT=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=pT.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=pT.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=pT.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw oT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw oT("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw oT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Ab){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw oT("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),mT=function(){function t(){}return t.prototype.createXhrIo=function(){return new gT},t}(),yT=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Ab){return new t(e,"")}if(""===r.path)return r;throw new $E("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),r=new t(l[c.indices.bucket],h),c.postModify(r);break}}if(null==r)throw function(t){return new $E("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),vT=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function bT(t){return"string"==typeof t||t instanceof String}function _T(t){return wT()&&t instanceof Blob}function wT(){return"undefined"!=typeof Blob}function OT(t,e,n,r){if(r<e)throw eT("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw eT("Invalid value for '"+t+"'. Expected "+n+" or less.")}function CT(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function ST(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var ET=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Ab){o(Ab)}else null!==s?((r=JE()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?nT():ZE():new $E("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new TT(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new TT(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===pT.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new TT(s,n))}else{var a=n.getErrorCode()===pT.ABORT;e(!1,new TT(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Sc.f)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Sc.f)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),TT=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function IT(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function xT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=IT();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(wT())return new Blob(t);throw new $E("unsupported-environment","This browser doesn't seem to support creating Blobs")}var kT=function(){function t(t,e){var n=0,r="";_T(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(_T(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(wT()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(xT.apply(null,r))}var i=e.map(function(t){return bT(t)?uT(sT.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function AT(t){var e,n;try{e=JSON.parse(t)}catch(Ab){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function jT(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function PT(t,e){return e}var RT=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||PT}}(),NT=null;function DT(){if(NT)return NT;var t=[];t.push(new RT("bucket")),t.push(new RT("generation")),t.push(new RT("metageneration")),t.push(new RT("name","fullPath",!0));var e=new RT("name");e.xform=function(t,e){return function(t){return!bT(t)||t.length<2?t:jT(t)}(e)},t.push(e);var n=new RT("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new RT("timeCreated")),t.push(new RT("updated")),t.push(new RT("md5Hash",null,!0)),t.push(new RT("cacheControl",null,!0)),t.push(new RT("contentDisposition",null,!0)),t.push(new RT("contentEncoding",null,!0)),t.push(new RT("contentLanguage",null,!0)),t.push(new RT("contentType",null,!0)),t.push(new RT("metadata","customMetadata",!0)),NT=t}function LT(t,e,n){var r=AT(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new yT(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function FT(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var MT=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function UT(t){if(!t)throw JE()}function VT(t,e){return function(n,r){var i=LT(t,r,e);return UT(null!==i),i}}function qT(t){return function(e,n){var r;return(r=401===e.getStatus()?new $E("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new $E("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new $E("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function BT(t){var e=qT(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new $E("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function HT(t,e,n){var r=CT(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new MT(r,"GET",VT(t,n),i);return o.errorHandler=BT(e),o}function zT(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var YT=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function XT(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Ab){UT(!1)}return UT(!!n&&-1!==(e||["active"]).indexOf(n)),n}var WT=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function KT(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var GT=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=DT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then(function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=zT(e,r,i),a={name:s.fullPath},u=CT(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=FT(s,n),h=new MT(u,"POST",function(t){var e;XT(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Ab){UT(!1)}return UT(bT(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=qT(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new MT(n,"POST",function(t){var e=XT(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Ab){UT(!1)}n||UT(!1);var i=Number(n);return UT(!isNaN(i)),new YT(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=qT(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new YT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new YT(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new $E("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw tT();var p=new MT(n,"POST",function(t,n){var i,s=XT(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?VT(e,o)(t,n):null,new YT(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=qT(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Ab){return t._error=Ab,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=HT(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=zT(e,r,i),c=FT(u,n),l=kT.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw tT();var h={name:u.fullPath},d=CT(o,t.host),f=t.maxUploadRetryTime,p=new MT(d,"POST",VT(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=qT(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=ZE(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=fT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new WT(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(fT(this._state)){case dT.SUCCESS:KT(this._resolve.bind(null,this.snapshot))();break;case dT.CANCELED:case dT.ERROR:KT(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(fT(this._state)){case dT.RUNNING:case dT.PAUSED:t.next&&KT(t.next.bind(t,this.snapshot))();break;case dT.SUCCESS:t.complete&&KT(t.complete.bind(t))();break;case dT.CANCELED:case dT.ERROR:t.error&&KT(t.error.bind(t,this._error))();break;default:t.error&&KT(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),$T=function(){function t(t,e){this._service=t,this._location=e instanceof yT?e:yT.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new yT(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return jT(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new yT(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw rT(t)},t}();function QT(t){var e={prefixes:[],items:[]};return JT(t,e).then(function(){return e})}function JT(t,e,n){return Object(Sc.b)(this,void 0,void 0,function(){var r,i,o;return Object(Sc.d)(this,function(s){switch(s.label){case 0:return[4,ZT(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,JT(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function ZT(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Sc.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&OT("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=CT(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new MT(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=AT(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new yT(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new yT(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return UT(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=qT(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}})})}function tI(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new yT(t._location.bucket,n);return new $T(t.storage,r)}function eI(t){return/^[A-Za-z]+:\/\//.test(t)}function nI(t,e){if(t instanceof oI){var n=t;if(null==n._bucket)throw new $E("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new $T(n,n._bucket);return null!=e?nI(r,e):r}if(void 0!==e){if(e.includes(".."))throw eT('`path` param cannot contain ".."');return tI(t,e)}return t}function rI(t,e){if(e&&eI(e)){if(t instanceof oI)return new $T(t,e);throw eT("To use ref(service, url), the first argument must be a Storage instance.")}return nI(t,e)}function iI(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:yT.makeFromBucketSpec(n,t)}var oI=function(){function t(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?yT.makeFromBucketSpec(r,this._host):iI(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?yT.makeFromBucketSpec(this._url,t):iI(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){OT("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){OT("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Sc.b)(this,void 0,void 0,function(){var t,e;return Object(Sc.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new $T(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new vT(nT());var r=function(t,e,n,r,i){var o=ST(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new ET(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}();function sI(t,e){return rI(t=Object(wo.n)(t),e)}var aI,uI,cI=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),lI=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new cI(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new cI(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new cI(t,i,i._ref))}:{next:e.next?function(t){return e.next(new cI(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),hI=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new dI(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new dI(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),dI=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return tI(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new lI(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new GT(t,new kT(e),n)}(t=Object(wo.n)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=sT.RAW),this._throwIfRoot("putString");var r=uT(e,t),i=Object(Sc.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new lI(new GT(this._delegate,new kT(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,QT(t=Object(wo.n)(t))).then(function(t){return new hI(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return ZT(t=Object(wo.n)(t),e)}(this._delegate,t||void 0).then(function(t){return new hI(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=HT(t.storage,t._location,DT()),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(t=Object(wo.n)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Sc.b)(this,void 0,void 0,function(){var n,r;return Object(Sc.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=CT(e.fullServerUrl(),t.host),o=FT(n,r),s=t.maxOperationRetryTime,a=new MT(i,"PATCH",VT(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=BT(e),a}(t.storage,t._location,e,DT()),[2,t.storage._makeRequest(r,n).getPromise()]}})})}(t=Object(wo.n)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=CT(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new MT(r,"GET",function(t,e){return function(n,r){var i=LT(t,r,e);return UT(null!==i),function(t,e,n){var r=AT(e);if(null===r)return null;if(!bT(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return CT("/b/"+o(t.bucket)+"/o/"+o(r),n)+ST({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=BT(e),o}(t.storage,t._location,DT()),[2,t.storage._makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new $E("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(wo.n)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(Sc.b)(this,void 0,void 0,function(){var e,n;return Object(Sc.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=CT(e.fullServerUrl(),t.host),r=new MT(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=BT(e),r}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(t=Object(wo.n)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw rT(t)},t}(),fI=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(eI(t))throw eT("ref() expected a child path but got a URL, use refFromURL instead.");return new dI(sI(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!eI(t))throw eT("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yT.makeFromUrl(t,this._delegate.host)}catch(Ab){throw eT("refFromUrl() expected a valid full URL but got an invalid one.")}return new dI(sI(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function pI(t){const e=function(t){return new It.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=Yi.a){return n=>n.lift(new WE(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(jt.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function gI(t,e,n){return{getDownloadURL:()=>Object(Tt.a)(void 0).pipe(Object(At.b)(e.outsideAngular),Rt(()=>t.getDownloadURL()),n),getMetadata:()=>Object(Tt.a)(void 0).pipe(Object(At.b)(e.outsideAngular),Rt(()=>t.getMetadata()),n),delete:()=>Object(xt.a)(t.delete()),child:r=>gI(t.child(r),e,n),updateMetadata:e=>Object(xt.a)(t.updateMetadata(e)),put:(e,n)=>pI(t.put(e,n)),putString:(e,n,r)=>pI(t.putString(e,n,r)),listAll:()=>Object(xt.a)(t.listAll())}}uI={TaskState:dT,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:sT,Storage:oI,Reference:dI},(aI=_o.a).INTERNAL.registerComponent(new Rb.a("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new fI(r,new oI(r,i,new mT,n,_o.a.SDK_VERSION))},"PUBLIC").setServiceProps(uI).setMultipleInstances(!0)),aI.registerVersion("@firebase/storage","0.5.0");const mI=new r.u("angularfire2.storageBucket"),yI=new r.u("angularfire2.storage.maxUploadRetryTime"),vI=new r.u("angularfire2.storage.maxOperationRetryTime");let bI=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new le.d(i),this.keepUnstableUntilFirst=Object(le.h)(this.schedulers);const a=Object(le.g)(t,i,e);this.storage=Object(le.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return gI(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return gI(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return gI(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.cc(le.c),r.cc(le.b,8),r.cc(mI,8),r.cc(r.I),r.cc(r.F),r.cc(yI,8),r.cc(vI,8))},t.\u0275prov=Object(r.Pb)({factory:function(){return new t(Object(r.cc)(le.c),Object(r.cc)(le.b,8),Object(r.cc)(mI,8),Object(r.cc)(r.I),Object(r.cc)(r.F),Object(r.cc)(yI,8),Object(r.cc)(vI,8))},token:t,providedIn:"any"}),t})(),_I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({}),t})(),wI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({providers:[bI],imports:[_I]}),t})(),OI=(()=>{class t{constructor(t,e){this.db=t,this.storage=e,this.basePath="/uploads"}pushFileToStorage(t){const e=`${this.basePath}/${t.file.name}`,n=this.storage.ref(e),r=this.storage.upload(e,t.file);return r.snapshotChanges().pipe(Ke(()=>{n.getDownloadURL().subscribe(e=>{t.url=e,t.name=t.file.name,this.saveFileData(t)})})).subscribe(),r.percentageChanges()}saveFileData(t){this.db.list(this.basePath).push(t)}getFiles(t){return this.db.list(this.basePath,e=>e.limitToLast(t))}deleteFile(t){this.deleteFileDatabase(t.name).then(()=>{this.deleteFileStorage(t.name)}).catch(t=>console.log(t))}deleteFileDatabase(t){return this.db.list(this.basePath).remove(t)}deleteFileStorage(t){this.storage.ref(this.basePath).child(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.cc(go),r.cc(bI))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),CI=(()=>{class t{transform(t,e){return(e=e?e.toLocaleLowerCase():"")?t.filter(t=>-1!==t.name.toLocaleLowerCase().indexOf(e)):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Sb({name:"filterPipe",type:t,pure:!0}),t})();function SI(t,e){1&t&&(r.Yb(0,"a",17),r.Ub(1,"i",18),r.xc(2," Kullan\u0131c\u0131 ekle "),r.Xb())}function EI(t,e){1&t&&(r.Yb(0,"div",19),r.Yb(1,"p",20),r.xc(2,"Hen\xfcz bir kullan\u0131c\u0131 eklenmedi!"),r.Xb(),r.Yb(3,"a",17),r.Ub(4,"i",18),r.xc(5," Kullan\u0131c\u0131 ekle "),r.Xb(),r.Xb())}function TI(t,e){if(1&t&&(r.Yb(0,"div",21),r.xc(1),r.Xb()),2&t){const t=r.hc();r.Ib(1),r.zc(" ",t.filterText," arad\u0131n\u0131z ")}}function II(t,e){if(1&t&&(r.Yb(0,"td"),r.xc(1),r.Xb()),2&t){const t=r.hc().$implicit;r.Ib(1),r.yc(t.petName)}}function xI(t,e){1&t&&(r.Yb(0,"td"),r.xc(1,"Evcil Hayvan yok"),r.Xb())}function kI(t,e){if(1&t){const t=r.Zb();r.Yb(0,"tr"),r.Yb(1,"th",22),r.xc(2),r.Xb(),r.Yb(3,"td"),r.Ub(4,"img",23),r.Xb(),r.Yb(5,"td"),r.xc(6),r.Xb(),r.wc(7,II,2,1,"td",24),r.wc(8,xI,2,0,"td",24),r.Yb(9,"td",25),r.Yb(10,"button",26),r.xc(11,"Hayvan ata"),r.Xb(),r.Yb(12,"button",26),r.xc(13,"D\xfczenle"),r.Xb(),r.Yb(14,"button",27),r.fc("click",function(){r.qc(t);const n=e.$implicit;return r.hc().deleteUser(n)}),r.xc(15,"Sil"),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=e.$implicit;r.Ib(2),r.yc(t.id),r.Ib(2),r.kc("src",t.photoURL,r.sc),r.Ib(2),r.yc(t.name),r.Ib(1),r.kc("ngIf",t.petName),r.Ib(1),r.kc("ngIf",!t.petName),r.Ib(2),r.mc("routerLink","/detail-user/",t.id,""),r.Ib(2),r.mc("routerLink","/edit-user/",t.id,"")}}const AI=function(t){return{itemsPerPage:7,currentPage:t}};let jI=(()=>{class t{constructor(t,e,n,r){this.userService=t,this.toastr=e,this.router=n,this.uploadService=r,this.p=1,this.filterText="",this.hideWhenNoUser=!1,this.noData=!1}ngOnInit(){this.userService.getUserList().subscribe(t=>this.userList=t),console.log(this.userList),this.uploadService.getFiles(6).snapshotChanges().pipe(Object(jt.a)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val())))).subscribe(t=>{this.fileUploads=t,console.log(this.fileUploads)})}goBack(){this.router.navigate(["/general-page"])}deleteUser(t){window.confirm("Bu kullan\u0131c\u0131y\u0131 silmek istedi\u011fine emin misiniz ?")&&(this.userService.delete(t.id),this.toastr.success(t.name+" ba\u015far\u0131yla silindi!"))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Zb),r.Tb(eE),r.Tb(wi),r.Tb(OI))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-user-list"]],decls:36,vars:13,consts:[[1,"btn-group",2,"margin-left","5px"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom",2,"margin-left","5px"],[1,"h2"],["routerLink","/register-user","class","btn btn-success",4,"ngIf"],[1,"pricing-header","mx-auto"],["class","no-data text-center",4,"ngIf"],[1,"mb-3",2,"margin-left","5px"],["for","filterText",1,"form-label"],["type","text","id","filterText","placeholder","Arama \u0130fadesi Giriniz",1,"form-control",3,"ngModel","ngModelChange"],["style","margin-left: 5px;","class","alert alert-primary",4,"ngIf"],[1,"table-responsive",2,"margin-left","5px"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["AutoHide","true","Responsive","true",3,"pageChange"],["routerLink","/register-user",1,"btn","btn-success"],[1,"fas","fa-plus","custom-fa-plus"],[1,"no-data","text-center"],[1,"nodata-msg"],[1,"alert","alert-primary",2,"margin-left","5px"],["scope","row"],[2,"width","50px","height","40px",3,"src"],[4,"ngIf"],[1,"text-center","action-block"],["type","submit",1,"btn","btn-primary",2,"margin-right","5px",3,"routerLink"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(r.Ub(0,"br"),r.Ub(1,"br"),r.Ub(2,"br"),r.Yb(3,"div",0),r.Yb(4,"button",1),r.fc("click",function(){return e.goBack()}),r.xc(5,"Geri Git"),r.Xb(),r.Xb(),r.Yb(6,"div",2),r.Yb(7,"h1",3),r.xc(8,"Kullan\u0131c\u0131 Listesi"),r.Xb(),r.wc(9,SI,3,0,"a",4),r.Xb(),r.Yb(10,"div",5),r.wc(11,EI,6,0,"div",6),r.Yb(12,"div",7),r.Yb(13,"label",8),r.xc(14,"Kullan\u0131c\u0131 Ara"),r.Xb(),r.Yb(15,"input",9),r.fc("ngModelChange",function(t){return e.filterText=t}),r.Xb(),r.Xb(),r.wc(16,TI,2,1,"div",10),r.Yb(17,"div",11),r.Yb(18,"table",12),r.Yb(19,"thead"),r.Yb(20,"tr"),r.Yb(21,"th",13),r.xc(22,"Kullan\u0131c\u0131 Id"),r.Xb(),r.Yb(23,"th",13),r.xc(24,"Kullan\u0131c\u0131 Foto\u011fraf\u0131"),r.Xb(),r.Yb(25,"th",13),r.xc(26,"Kullan\u0131c\u0131 Ad\u0131"),r.Xb(),r.Yb(27,"th",13),r.xc(28,"Evcil Hayvan Ad\u0131"),r.Xb(),r.Yb(29,"th",14),r.xc(30,"D\xfczenle"),r.Xb(),r.Xb(),r.Xb(),r.Yb(31,"tbody"),r.wc(32,kI,16,7,"tr",15),r.ic(33,"paginate"),r.ic(34,"filterPipe"),r.Xb(),r.Xb(),r.Xb(),r.Yb(35,"pagination-controls",16),r.fc("pageChange",function(t){return e.p=t}),r.Xb(),r.Xb()),2&t&&(r.Ib(9),r.kc("ngIf",e.hideWhenNoUser),r.Ib(2),r.kc("ngIf",e.noData),r.Ib(4),r.kc("ngModel",e.filterText),r.Ib(1),r.kc("ngIf",e.filterText.length>0),r.Ib(16),r.kc("ngForOf",r.jc(33,5,r.jc(34,8,e.userList,e.filterText),r.nc(11,AI,e.p))))},directives:[F,Y_,yw,Vw,D,xE,Ci,Oi],pipes:[SE,CI],styles:[""]}),t})();class PI{constructor(t){this.file=t}}function RI(t,e){1&t&&(r.Yb(0,"p",18),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen bo\u015f b\u0131rakmay\u0131n\u0131z "),r.Xb())}function NI(t,e){1&t&&(r.Yb(0,"p",18),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"isim 2 kelimeden fazla olmal\u0131 "),r.Xb())}function DI(t,e){1&t&&(r.Yb(0,"p",18),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen bo\u015f b\u0131rakmay\u0131n\u0131z "),r.Xb())}function LI(t,e){1&t&&(r.Yb(0,"p",18),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen bo\u015f b\u0131rakmay\u0131n\u0131z "),r.Xb())}let FI=(()=>{class t{constructor(t,e,n,r,i,o){this.userService=t,this.fb=e,this.actRoute=n,this.uploadService=r,this.router=i,this.toastr=o,this.title="Create",this.user=new Jb,this.actRoute.snapshot.params.id&&(this.userId=this.actRoute.snapshot.paramMap.get("id")||"id gelmiyor",console.log(this.userId))}ngOnInit(){this.userId&&(this.title="Edit",this.userService.getUserById(this.userId).subscribe(t=>{t&&(this.user=t,this.updateUserData(t.name,t.email,t.photoURL))}))}get name(){return this.editForm.get("name")}get email(){return this.editForm.get("email")}get photoURL(){return this.editForm.get("photoURL")}updateUserData(t,e,n){this.editForm=this.fb.group({name:[t],email:[e,[Q_.required,Q_.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],photoURL:[n]})}goBack(){this.router.navigate(["/general-page"])}onUserFormSubmit(){this.userId?this.userService.update(this.userId,this.editForm.value).then(()=>{this.toastr.success(this.editForm.controls.name.value+" ba\u015far\u0131yla g\xfcncelle\u015ftirildi"),this.router.navigate(["/view-users"])}):this.userService.saveUser(this.user).then(()=>{this.router.navigate(["/view-users"])})}getUser(t){this.userId=t,this.userService.getUserById(t).subscribe(t=>{this.editForm.patchValue({id:t.data.id,name:t.data.name,photoURL:t.data.photoURL,email:t.data.email}),console.log(this.userId)})}selectFile(t){this.selectedFiles=t.target.files}upload(){const t=this.selectedFiles.item(0);this.currentFileUpload=new PI(t),this.uploadService.pushFileToStorage(this.currentFileUpload).subscribe(t=>{this.percentage=Math.round(t)},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Zb),r.Tb(aO),r.Tb(nr),r.Tb(OI),r.Tb(wi),r.Tb(eE))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-user-update"]],decls:37,vars:6,consts:[[1,"pt-3","pb-2","mb-3","border-bottom",2,"margin-left","100px"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"row",2,"margin-left","100px"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","id","name","formControlName","name","required","",1,"form-control"],["class","error",4,"ngIf"],["type","email","formControlName","email","required","",1,"form-control"],["type","file","formControlName","photoURL",1,"text-nowrap","text-truncate",3,"change"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"error"]],template:function(t,e){1&t&&(r.Ub(0,"br"),r.Ub(1,"br"),r.Ub(2,"br"),r.Yb(3,"div",0),r.Yb(4,"h1",1),r.xc(5,"Kullan\u0131c\u0131 Detaylar\u0131 D\xfczenleme"),r.Xb(),r.Yb(6,"div",2),r.Yb(7,"div",3),r.Yb(8,"button",4),r.fc("click",function(){return e.goBack()}),r.xc(9,"Geri Git"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(10,"div",5),r.Yb(11,"div",6),r.Yb(12,"div",7),r.Yb(13,"form",8),r.fc("ngSubmit",function(){return e.onUserFormSubmit()}),r.Yb(14,"div",9),r.Yb(15,"div",10),r.Yb(16,"div",9),r.Yb(17,"div",11),r.Yb(18,"label"),r.xc(19,"\u0130sim"),r.Xb(),r.Ub(20,"input",12),r.wc(21,RI,4,0,"p",13),r.wc(22,NI,4,0,"p",13),r.Xb(),r.Xb(),r.Yb(23,"div",9),r.Yb(24,"div",11),r.Yb(25,"label"),r.xc(26,"Email"),r.Xb(),r.Ub(27,"input",14),r.wc(28,DI,4,0,"p",13),r.Xb(),r.Yb(29,"div",11),r.Yb(30,"label"),r.xc(31,"PhotoUrl"),r.Xb(),r.Yb(32,"input",15),r.fc("change",function(t){return e.selectFile(t)}),r.Xb(),r.wc(33,LI,4,0,"p",13),r.Xb(),r.Xb(),r.Yb(34,"div",16),r.Yb(35,"button",17),r.xc(36," Kullan\u0131c\u0131y\u0131 G\xfcncelle "),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.Ib(13),r.kc("formGroup",e.editForm),r.Ib(8),r.kc("ngIf",(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid)),r.Ib(1),r.kc("ngIf",null==e.name||null==e.name.errors?null:e.name.errors.minlength),r.Ib(6),r.kc("ngIf",(null==e.email?null:e.email.touched)&&(null==e.email?null:e.email.invalid)),r.Ib(5),r.kc("ngIf",(null==e.photoURL?null:e.photoURL.touched)&&(null==e.photoURL?null:e.photoURL.invalid)),r.Ib(2),r.kc("disabled",!e.editForm.valid))},directives:[qw,vw,Yw,Y_,yw,Ww,rO,F],styles:[""]}),t})();function MI(t,e){1&t&&(r.Yb(0,"p",16),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen isminizi giriniz "),r.Xb())}function UI(t,e){1&t&&(r.Yb(0,"p",16),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"\u0130sim alan\u0131 2 karakterden b\xfcy\xfck olmal\u0131 "),r.Xb())}function VI(t,e){1&t&&(r.Yb(0,"p",16),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"L\xfctfen ge\xe7erli bir email giriniz"),r.Xb())}function qI(t,e){1&t&&(r.Yb(0,"p",16),r.Yb(1,"sup"),r.xc(2,"*"),r.Xb(),r.xc(3,"bir resim url giriniz "),r.Xb())}const BI=function(t){return{width:t}};function HI(t,e){if(1&t&&(r.Yb(0,"div",17),r.Yb(1,"div",18),r.xc(2),r.Xb(),r.Xb()),2&t){const t=r.hc();r.Ib(1),r.kc("ngStyle",r.nc(3,BI,t.percentage+"%")),r.Jb("aria-valuenow",t.percentage),r.Ib(1),r.zc(" ",t.percentage,"% ")}}let zI=(()=>{class t{constructor(t,e,n,r,i){this.userService=t,this.fb=e,this.toastr=n,this.router=r,this.uploadService=i,this.title="Create"}ngOnInit(){this.userForm(),this.userId&&(this.title="Edit",this.userService.getUserById(this.userId).subscribe(t=>{t&&(this.user=t)}))}onUserFormSubmit(){this.userId?this.userService.update(this.userId,this.user).then(()=>{this.router.navigate(["/"])}):this.submitUserData()}userForm(){this.usersForm=this.fb.group({name:["",[Q_.required,Q_.minLength(2)]],petName:[""],email:["",[Q_.required,Q_.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],photoURL:[""]})}goBack(){this.router.navigate(["/general-page"])}get name(){return this.usersForm.get("name")}get petName(){return this.usersForm.get("petName")}get email(){return this.usersForm.get("email")}get photoUrl(){return this.usersForm.get("photoUrl")}ResetForm(){this.usersForm.reset()}submitUserData(){this.userService.createUser(this.usersForm.value),this.toastr.success(this.usersForm.controls.name.value+"adl\u0131 kullan\u0131c\u0131 ba\u015far\u0131yla eklendi"),this.router.navigate(["/view-users"]),this.ResetForm()}selectFile(t){this.selectedFiles=t.target.files}upload(){const t=this.selectedFiles.item(0);this.currentFileUpload=new PI(t),this.uploadService.pushFileToStorage(this.currentFileUpload).subscribe(t=>{this.percentage=Math.round(t)},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Zb),r.Tb(aO),r.Tb(eE),r.Tb(wi),r.Tb(OI))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-add-user"]],decls:37,vars:7,consts:[[1,"btn-group",2,"margin-left","100px"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"pt-3","pb-2","mb-3","border-bottom",2,"margin-left","100px"],[1,"h2"],["novalidate","",2,"margin-left","100px",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["class","error",4,"ngIf"],["type","email","formControlName","email","required","",1,"form-control"],["type","file","formControlName","photoURL",1,"text-nowrap","text-truncate",3,"change"],["class","progress mt-2",4,"ngIf"],[1,"form-group","text-right"],["type","button",1,"btn","btn-warning","mr-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"error"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"]],template:function(t,e){1&t&&(r.Ub(0,"br"),r.Ub(1,"br"),r.Ub(2,"br"),r.Yb(3,"div",0),r.Yb(4,"button",1),r.fc("click",function(){return e.goBack()}),r.xc(5,"Geri Git"),r.Xb(),r.Xb(),r.Yb(6,"div",2),r.Yb(7,"h1",3),r.xc(8,"Kullan\u0131c\u0131 Kay\u0131t"),r.Xb(),r.Xb(),r.Yb(9,"form",4),r.fc("ngSubmit",function(){return e.submitUserData()}),r.Yb(10,"div",5),r.Yb(11,"div",6),r.Yb(12,"div",5),r.Yb(13,"div",7),r.Yb(14,"label"),r.xc(15,"\u0130sim"),r.Xb(),r.Ub(16,"input",8),r.wc(17,MI,4,0,"p",9),r.wc(18,UI,4,0,"p",9),r.Xb(),r.Xb(),r.Yb(19,"div",5),r.Yb(20,"div",7),r.Yb(21,"label"),r.xc(22,"Email"),r.Xb(),r.Ub(23,"input",10),r.wc(24,VI,4,0,"p",9),r.Xb(),r.Yb(25,"div",7),r.Yb(26,"label"),r.xc(27,"Foto\u011fraf"),r.Xb(),r.Yb(28,"label"),r.Yb(29,"input",11),r.fc("change",function(t){return e.selectFile(t)}),r.Xb(),r.Xb(),r.wc(30,qI,4,0,"p",9),r.Xb(),r.wc(31,HI,3,5,"div",12),r.Xb(),r.Yb(32,"div",13),r.Yb(33,"button",14),r.fc("click",function(){return e.ResetForm()}),r.xc(34,"S\u0131f\u0131rla"),r.Xb(),r.Yb(35,"button",15),r.fc("click",function(){return e.upload()}),r.xc(36,"Kay\u0131t Ol"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.Ib(9),r.kc("formGroup",e.usersForm),r.Ib(8),r.kc("ngIf",(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid)),r.Ib(1),r.kc("ngIf",null==e.name||null==e.name.errors?null:e.name.errors.minlength),r.Ib(6),r.kc("ngIf",null==e.email||null==e.email.errors?null:e.email.errors.pattern),r.Ib(6),r.kc("ngIf",(null==e.photoUrl?null:e.photoUrl.touched)&&(null==e.photoUrl?null:e.photoUrl.invalid)),r.Ib(1),r.kc("ngIf",e.currentFileUpload),r.Ib(4),r.kc("disabled",!e.usersForm.valid))},directives:[qw,vw,Yw,Y_,yw,Ww,rO,F,V],styles:["p.error[_ngcontent-%COMP%]{color:red}.background[_ngcontent-%COMP%]{background-color:#1e1e1e}div.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),t})();function YI(t,e){if(1&t&&(r.Yb(0,"option"),r.xc(1),r.Xb()),2&t){const t=e.$implicit;r.Ib(1),r.yc(t.name)}}const XI=[{path:"",redirectTo:"/login-user",pathMatch:"full"},{path:"register-user",component:XE},{path:"general-page",component:kS},{path:"detail-user/:id",component:(()=>{class t{constructor(t,e,n,r,i,o){this.userService=t,this.fb=e,this.actRoute=n,this.router=r,this.toastr=i,this.petService=o,this.title="Create",this.user=new Jb,this.actRoute.snapshot.params.id&&(this.userId=this.actRoute.snapshot.paramMap.get("id")||"id gelmiyor",console.log(this.userId))}ngOnInit(){this.updateUserData(),this.petService.getPetList().subscribe(t=>this.petList=t),this.userId&&(this.title="Edit",this.userService.getUserById(this.userId).subscribe(t=>{t&&(this.user=t,console.log(t))}))}get name(){return this.editForm.get("name")}get email(){return this.editForm.get("email")}get photoURL(){return this.editForm.get("photoURL")}get petName(){return this.editForm.get("petName")}updateUserData(){this.editForm=this.fb.group({petName:["",[Q_.required]]})}goBack(){this.router.navigate(["/general-page"])}onUserFormSubmit(){this.userId?this.userService.update(this.userId,this.editForm.value).then(()=>{this.toastr.success(this.user.name+" ba\u015far\u0131yla g\xfcncelle\u015ftirildi"),this.router.navigate(["/view-users"])}):this.userService.saveUser(this.user).then(()=>{this.router.navigate(["/view-users"])})}getUser(t){this.userId=t,this.userService.getUserById(t).subscribe(t=>{this.editForm.patchValue({id:t.data.id,name:t.data.name,photoURL:t.data.photoURL,email:t.data.email,petName:t.data.petName}),console.log(this.userId)})}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(Zb),r.Tb(aO),r.Tb(nr),r.Tb(wi),r.Tb(eE),r.Tb(jS))},t.\u0275cmp=r.Nb({type:t,selectors:[["app-user-detail"]],decls:42,vars:5,consts:[[1,"pt-3","pb-2","mb-3","border-bottom",2,"margin-left","100px"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"row",2,"margin-left","100px"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],["scope","row"],[3,"src"],["id","name","formControlName","name"],["id","petId","formControlName","petName",1,"form-control"],[4,"ngFor","ngForOf"],[1,"text-center","action-block"],["type","submit",1,"btn","btn-primary",2,"margin-right","5px"]],template:function(t,e){1&t&&(r.Ub(0,"br"),r.Ub(1,"br"),r.Ub(2,"br"),r.Yb(3,"div",0),r.Yb(4,"h1",1),r.xc(5,"Kullan\u0131c\u0131 Detaylar\u0131 D\xfczenleme"),r.Xb(),r.Yb(6,"div",2),r.Yb(7,"div",3),r.Yb(8,"button",4),r.fc("click",function(){return e.goBack()}),r.xc(9,"Geri Git"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(10,"div",5),r.Yb(11,"div",6),r.Yb(12,"div",7),r.Yb(13,"form",8),r.fc("ngSubmit",function(){return e.onUserFormSubmit()}),r.Yb(14,"table",9),r.Yb(15,"thead"),r.Yb(16,"tr"),r.Yb(17,"th",10),r.xc(18,"Foto\u011fraf"),r.Xb(),r.Yb(19,"th",10),r.xc(20,"Kullan\u0131c\u0131 Ad\u0131"),r.Xb(),r.Yb(21,"th",10),r.xc(22,"Kullan\u0131c\u0131 email"),r.Xb(),r.Yb(23,"th",10),r.xc(24,"Evcil Hayvan"),r.Xb(),r.Yb(25,"th",11),r.xc(26,"Kaydet"),r.Xb(),r.Xb(),r.Xb(),r.Yb(27,"tbody"),r.Yb(28,"tr"),r.Yb(29,"th",12),r.Ub(30,"img",13),r.Xb(),r.Yb(31,"td",14),r.xc(32),r.Xb(),r.Yb(33,"td"),r.xc(34),r.Xb(),r.Yb(35,"select",15),r.Yb(36,"option"),r.xc(37,"Se\xe7iniz"),r.Xb(),r.wc(38,YI,2,1,"option",16),r.Xb(),r.Yb(39,"td",17),r.Yb(40,"button",18),r.xc(41,"Kaydet"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.Ib(13),r.kc("formGroup",e.editForm),r.Ib(17),r.kc("src",e.user.photoURL,r.sc),r.Ib(2),r.yc(e.user.name),r.Ib(2),r.yc(e.user.email),r.Ib(4),r.kc("ngForOf",e.petList))},directives:[qw,vw,Yw,yw,Ww,$w,Qw,eO,D],styles:["div.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),t})()},{path:"add-user",component:zI},{path:"login-user",component:YE},{path:"view-users",component:jI},{path:"edit-user/:id",component:FI},{path:"add-pet",component:lE},{path:"view-pets",component:UE},{path:"edit-pet/:id",component:zE},{path:"navbar/:id",component:o_}];let WI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t}),t.\u0275inj=r.Qb({imports:[[Li.forRoot(XI)],Li]}),t})();const KI={apiKey:"AIzaSyBMqhI4wqhYMtAvr7jEcI75DfXsh78B-xc",authDomain:"petproject-5f88b.firebaseapp.com",databaseURL:"https://petproject-5f88b-default-rtdb.firebaseio.com",projectId:"petproject-5f88b",storageBucket:"petproject-5f88b.appspot.com",messagingSenderId:"410913759097",appId:"1:410913759097:web:21c158186786ce9f5b59a8",measurementId:"G-NM40FSFSPX"};let GI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Rb({type:t,bootstrap:[s_]}),t.\u0275inj=r.Qb({providers:[],imports:[[Ct,le.a.initializeApp(KI),mo,$b,ve,wI,oO,IS,iE.forRoot({positionClass:"toast-top-full-width"}),PE,WI,M_,sO]]}),t})();Object(r.ab)(),wt().bootstrapModule(GI).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);